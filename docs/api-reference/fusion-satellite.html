<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-api-reference/fusion-satellite" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Fusion Satellite | DataMesh Fusion API</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://datameshgroup.github.io/fusion/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://datameshgroup.github.io/fusion/img/logo.png"><meta data-rh="true" property="og:url" content="https://datameshgroup.github.io/fusion/docs/api-reference/fusion-satellite"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Fusion Satellite | DataMesh Fusion API"><meta data-rh="true" name="description" content="The Fusion Satellite API allows a Sale System running on the POI terminal to communicate with the DataMesh Satellite payment application on the same POI terminal using inter-app communication with Android intents."><meta data-rh="true" property="og:description" content="The Fusion Satellite API allows a Sale System running on the POI terminal to communicate with the DataMesh Satellite payment application on the same POI terminal using inter-app communication with Android intents."><link data-rh="true" rel="icon" href="/fusion/img/logo.png"><link data-rh="true" rel="canonical" href="https://datameshgroup.github.io/fusion/docs/api-reference/fusion-satellite"><link data-rh="true" rel="alternate" href="https://datameshgroup.github.io/fusion/docs/api-reference/fusion-satellite" hreflang="en"><link data-rh="true" rel="alternate" href="https://datameshgroup.github.io/fusion/docs/api-reference/fusion-satellite" hreflang="x-default"><link rel="stylesheet" href="/fusion/assets/css/styles.f37a401e.css">
<script src="/fusion/assets/js/runtime~main.d567d638.js" defer="defer"></script>
<script src="/fusion/assets/js/main.df2c9ab0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/fusion/"><div class="navbar__logo"><img src="/fusion/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/fusion/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Overview</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fusion/docs/getting-started">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/datameshgroup" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fusion/docs/getting-started">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/fusion/docs/category/api-reference">API Reference</a><button aria-label="Collapse sidebar category &#x27;API Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/fusion-app">Fusion App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/fusion-cloud">Fusion Cloud</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/fusion/docs/api-reference/fusion-satellite">Fusion Satellite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/data-model">Data model</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fusion/docs/testing">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fusion/docs/production">Production</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fusion/docs/appendix">Appendix</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/fusion/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/fusion/docs/category/api-reference"><span itemprop="name">API Reference</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Fusion Satellite</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Fusion Satellite</h1>
<p>The Fusion Satellite API allows a Sale System running on the POI terminal to communicate with the DataMesh Satellite payment application on the same POI terminal using inter-app communication with <a href="https://developer.android.com/guide/components/intents-filters" target="_blank" rel="noopener noreferrer">Android intents</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="libraries">Libraries<a href="#libraries" class="hash-link" aria-label="Direct link to Libraries" title="Direct link to Libraries">​</a></h2>
<p>DataMesh have published a library to Maven Central which wraps the Satellite API. This is the recommended method of interacting with the Fusion Satellite API.</p>
<table><thead><tr><th>Description</th><th>Location</th><th><div style="width:180px"></div></th></tr></thead><tbody><tr><td>Library</td><td>on <a href="https://central.sonatype.com/artifact/com.datameshgroup.fusion/fusion-sdk/1.3.4/versions" target="_blank" rel="noopener noreferrer">Maven Central</a></td><td></td></tr><tr><td>Library</td><td>on <a href="https://github.com/datameshgroup/fusionsatellite-sdk-java" target="_blank" rel="noopener noreferrer">GitHub</a></td><td></td></tr><tr><td>Demo Application utilising the library</td><td>on <a href="https://github.com/datameshgroup/fusionsatellite-sdk-android-demo" target="_blank" rel="noopener noreferrer">GitHub</a></td><td>Tested on PAX (PAX 920)</td></tr><tr><td>Another POS on Pinpad Demo Application</td><td>on <a href="https://github.com/datameshgroup/pos-on-pinpad-demo" target="_blank" rel="noopener noreferrer">GitHub</a></td><td>Tested on PAX (PAX 920) and Ingenico (DX8000)</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-include-the-library">How to include the library<a href="#how-to-include-the-library" class="hash-link" aria-label="Direct link to How to include the library" title="Direct link to How to include the library">​</a></h3>
<p><code>implementation &quot;com.datameshgroup.fusion:fusion-sdk:1.3.4&quot;</code></p>
<p>If you are using Android you will need to add Java 8 syntax desugaring. In your app&#x27;s build.gradle</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">android {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	compileOptions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		sourceCompatibility JavaVersion.VERSION_1_8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		targetCompatibility JavaVersion.VERSION_1_8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		coreLibraryDesugaringEnabled true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dependencies {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	coreLibraryDesugaring &#x27;com.android.tools:desugar_jdk_libs:1.1.5&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="device-specific-changes">Device Specific Changes<a href="#device-specific-changes" class="hash-link" aria-label="Direct link to Device Specific Changes" title="Direct link to Device Specific Changes">​</a></h2>
<p>If your <em>Sale System on Pinpad</em> uses the device(s) listed below, the following changes need to be included in your application:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="printer">Printer<a href="#printer" class="hash-link" aria-label="Direct link to Printer" title="Direct link to Printer">​</a></h3>
<p><strong>If your <em>Sale System on Pinpad</em> only supports PAX:</strong></p>
<ul>
<li>Modify the App Manifest file to add the following permission: <br> <code>&lt;uses-permission android:name=&quot;com.pax.permission.PRINTER&quot; /&gt;</code></li>
</ul>
<p><strong>If your <em>Sale System on Pinpad</em> supports Ingenico or</strong></p>
<p><strong>If your <em>Sale System on Pinpad</em> supports both Ingenico and PAX:</strong></p>
<p>Since not all the required changes specific to your application may be listed below, please refer to the <a href="https://github.com/datameshgroup/pos-on-pinpad-demo" target="_blank" rel="noopener noreferrer">POS on Pinpad Demo Application code in GitHub</a>.  This <a href="https://github.com/datameshgroup/pos-on-pinpad-demo" target="_blank" rel="noopener noreferrer">POS on Pinpad Demo Application code in GitHub</a> has been tested in both Ingenico (DX8000) and PAX (PAX 920)</p>
<p><em>Please only copy the code/files relevant to the device(s) that you support.(e.g. copy only the relevant Ingenico code/file(s) if you only support Ingenico)</em></p>
<ul>
<li>Add the relevant <a href="https://github.com/datameshgroup/pos-on-pinpad-demo/tree/master/app/libs" target="_blank" rel="noopener noreferrer">Library Files</a></li>
<li>Add the relevant device specific files:<!-- -->
<ul>
<li><a href="https://github.com/datameshgroup/pos-on-pinpad-demo/tree/master/app/src/Ingenico/java/au/com/dmg/devices" target="_blank" rel="noopener noreferrer">Ingenico</a></li>
<li><a href="https://github.com/datameshgroup/pos-on-pinpad-demo/tree/master/app/src/Pax/java/au/com/dmg/devices" target="_blank" rel="noopener noreferrer">PAX</a></li>
</ul>
</li>
<li>Add the <a href="https://github.com/datameshgroup/pos-on-pinpad-demo/blob/master/app/src/main/java/au/com/dmg/terminalposdemo/DeviceInterface.java" target="_blank" rel="noopener noreferrer">DeviceInterface.java</a> file and its references to your code.</li>
<li>Update your app&#x27;s build.gradle</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    flavorDimensions &#x27;device&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    productFlavors {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pax {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dimension &quot;device&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            applicationId = &quot;you_application_id_here&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            buildConfigField &#x27;boolean&#x27;, &#x27;DEVICE_PAX&#x27;, &#x27;true&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            buildConfigField &#x27;boolean&#x27;, &#x27;DEVICE_IGO&#x27;, &#x27;false&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            buildConfigField &#x27;String&#x27;, &#x27;VERSION_TYPE&#x27;, &quot;\&quot;v1\&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ingenico {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dimension &quot;device&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            applicationId = &quot;you_application_id_here&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            buildConfigField &#x27;boolean&#x27;, &#x27;DEVICE_PAX&#x27;, &#x27;false&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            buildConfigField &#x27;boolean&#x27;, &#x27;DEVICE_IGO&#x27;, &#x27;true&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            buildConfigField &#x27;String&#x27;, &#x27;VERSION_TYPE&#x27;, &quot;\&quot;v1\&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sending-messages">Sending messages<a href="#sending-messages" class="hash-link" aria-label="Direct link to Sending messages" title="Direct link to Sending messages">​</a></h2>
<p>The Satellite API utilises an Android intent with request/response objects based on the Nexo <code>SaleToPOIRequest</code> and <code>SaleToPOIResponse</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-code-for-sending-a-payment-request">Sample code for Sending a Payment Request<a href="#sample-code-for-sending-a-payment-request" class="hash-link" aria-label="Direct link to Sample code for Sending a Payment Request" title="Direct link to Sample code for Sending a Payment Request">​</a></h3>
<p>Please refer to the method in the file listed below to view sample code handling on how to perform a payment/refund.</p>
<table><thead><tr><th style="text-align:center">Method Name</th><th style="text-align:center">GitHub File</th><th style="text-align:center">GitHub Repository</th></tr></thead><tbody><tr><td style="text-align:center">sendPaymentRequest</td><td style="text-align:center"><a href="https://github.com/datameshgroup/pos-on-pinpad-demo/blob/master/app/src/main/java/au/com/dmg/terminalposdemo/ActivityPayment.java" target="_blank" rel="noopener noreferrer">ActivityPayment.java</a></td><td style="text-align:center"><a href="https://github.com/datameshgroup/pos-on-pinpad-demo" target="_blank" rel="noopener noreferrer">pos-on-pinpad-demo</a></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="intent-request">Intent request<a href="#intent-request" class="hash-link" aria-label="Direct link to Intent request" title="Direct link to Intent request">​</a></h3>
<p>The app uses intents to send and receive messages</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Intent intent = new Intent(Message.INTENT_ACTION_SALETOPOI_REQUEST);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// All messages to and from the terminal are wrapped inside a Message object.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Here request is a SaleToPOIRequest object.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Message message = new Message(request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">intent.putExtra(Message.INTENT_EXTRA_MESSAGE, message.toJson());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// name of this app, that get&#x27;s treated as the POS label by the terminal.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">intent.putExtra(Message.INTENT_EXTRA_APPLICATION_NAME, &quot;DemoPOS&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">intent.putExtra(Message.INTENT_EXTRA_APPLICATION_VERSION, &quot;1.0.0&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// we are using 100 as the request code - but you can use anything you want.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">startActivityForResult(intent, 100);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="intent-response">Intent response<a href="#intent-response" class="hash-link" aria-label="Direct link to Intent response" title="Direct link to Intent response">​</a></h3>
<p>In the same activity, add the following code.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protected void onActivityResult(int requestCode, int responseCode, Intent data){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    super.onActivityResult(requestCode, responseCode, data);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(data != null &amp;&amp; data.hasExtra(Message.INTENT_EXTRA_MESSAGE)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.handleResponseIntent(data);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void handleResponseIntent(Intent intent){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The response is sent as a Json and we will need to deserialize it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message message = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message = Message.fromJson(intent.getStringExtra(Message.INTENT_EXTRA_MESSAGE));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch(Exception e){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // json errors may occur,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // if this is occuring, make sure you are using the latest fusion-sdk library</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SaleToPOIResponse response = message.response;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // we can now access the data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="requestresponse-object">Request/response object<a href="#requestresponse-object" class="hash-link" aria-label="Direct link to Request/response object" title="Direct link to Request/response object">​</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>SaleToPOIRequest</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;SaleToPOIRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;MessageHeader&quot;:{...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;PaymentRequest&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>SaleToPOIResponse</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;SaleToPOIResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;MessageHeader&quot;:{...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;LoginRequest&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p>All messages use JSON format with UTF-8 encoding.</p>
<p>Supported primitive data elements are:</p>
<ol>
<li><strong>String</strong> text string of variable length</li>
<li><strong>Boolean</strong> true or false</li>
<li><strong>Number</strong> defined in this document as either <code>integer</code> or <code>decimal</code>. For all number fields the Sale System <em>MUST</em> remove the digits equal to zero on left and the right of the value and any useless
decimal point (eg. 00320.00 is expressed 320, and 56.10 is expressed 56.1). This simplifies parsing and MAC calculations.</li>
<li><strong>Null</strong> optional types can be represented as null</li>
</ol>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Additional fields will be added to the message specification over time. To ensure forwards compatibility
the Sale System must ignore when extra objects and fields are present in response messages.</p></div></div>
<p>The base of every message is the <code>SaleToPOIRequest</code> object for requests, and <code>SaleToPOIResponse</code> object for responses.</p>
<p>The <code>SaleToPOIRequest</code> and <code>SaleToPOIResponse</code> contain two objects:</p>
<ol>
<li>A <a href="#messageheader">MessageHeader</a> object.</li>
<li>A <a href="#payload">Payload</a> object of variable types.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="messageheader">MessageHeader<a href="#messageheader" class="hash-link" aria-label="Direct link to MessageHeader" title="Direct link to MessageHeader">​</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>MessageHeader</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;MessageClass&quot;:&quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;MessageCategory&quot;:&quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;MessageType&quot;:&quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ServiceID&quot;:&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p>A <code>MessageHeader</code> is included with each request and response. It defines the protocol and message type.</p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>Informs the receiver of the class of message. Possible values are &quot;Service&quot;, &quot;Device&quot;, or &quot;Event&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the category of message. Possible values are &quot;CardAcquisition&quot;, &quot;Display&quot;, &quot;Login&quot;, &quot;Logout&quot;, &quot;Payment&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>Type of message. Possible values are &quot;Request&quot;, &quot;Response&quot;, or &quot;Notification&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="payload">Payload<a href="#payload" class="hash-link" aria-label="Direct link to Payload" title="Direct link to Payload">​</a></h3>
<p>An object which defines fields for the request/response. The object name depends on the <a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a> defined in the <code>MessageHeader</code></p>
<p>e.g. a payment will include a <code>PaymentRequest</code>/<code>PaymentResponse</code>.</p>
<p>The <em>Satellite API Reference</em> outlines the expected payload for each supported request.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="methods">Methods<a href="#methods" class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="payment">Payment<a href="#payment" class="hash-link" aria-label="Direct link to Payment" title="Direct link to Payment">​</a></h3>
<p>The payment message is used to perform purchase, purchase + cash out, cash out only, refund, pre-authorisation, and completion requests.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="payment-request">Payment request<a href="#payment-request" class="hash-link" aria-label="Direct link to Payment request" title="Direct link to Payment request">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Payment request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;PaymentRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;OperatorID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;OperatorLanguage&quot;:&quot;en&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ShiftNumber&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleTransactionID&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TransactionID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TimeStamp&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleReferenceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleTerminalData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TerminalEnvironment&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;SaleCapabilities&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TotalsGroupID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;TokenRequestedType&quot;:&quot;Customer | Transaction&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;PaymentTransaction&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;AmountsReq&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Currency&quot;:&quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;RequestedAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;CashBackAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TipAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;PaidAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;MaximumCashBackAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;MinimumSplitAmount&quot;:&quot;x.xx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;OriginalPOITransaction&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;POIID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;POITransactionID&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;TransactionID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;TimeStamp&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ReuseCardDataFlag&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ApprovalCode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;LastTransactionFlag&quot;:true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;TransactionConditions&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AllowedPaymentBrands&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AcquirerID&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;DebitPreferredFlag&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ForceOnlineFlag&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;MerchantCategoryCode&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleItem&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ItemID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ProductCode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;EanUpc&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;UnitOfMeasure&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;Quantity&quot;:&quot;xx.x&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;UnitPrice&quot;:&quot;xx.x&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ItemAmount&quot;:&quot;xx.x&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;TaxCode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;SaleChannel&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ProductLabel&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;AdditionalProductInfo&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;CostBase&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;Discount&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;Categories&quot;:[&quot;xxx&quot;,&quot;xxx&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;Brand&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;QuantityInStock&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;Tags&quot;:[&quot;xxx&quot;,&quot;xxx&quot;,&quot;xxx&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;PageURL&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ImageURLs&quot;:[&quot;xxx&quot;,&quot;xxx&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;Size&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;Colour&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;Weight&quot;:xx.xx,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;WeightUnitOfMeasure&quot;:&quot;xxx&quot;	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;PaymentData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;PaymentType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;PaymentInstrumentData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;PaymentInstrumentType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;CardData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;EntryMode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ProtectedCardData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;ContentType&quot;:&quot;id-envelopedData&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;EnvelopedData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;Version&quot;:&quot;v0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;Recipient&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           &quot;KEK&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;Version&quot;:&quot;v4&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;KEKIdentifier&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 &quot;KeyIdentifier&quot;:&quot;xxxDATKey&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 &quot;KeyVersion&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;KeyEncryptionAlgorithm&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 &quot;Algorithm&quot;:&quot;des-ede3-cbc&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;EncryptedKey&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;EncryptedContent&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           &quot;ContentType&quot;:&quot;id-data&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           &quot;ContentEncryptionAlgorithm&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;Algorithm&quot;:&quot;des-ede3-cbc&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;Parameter&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 &quot;InitialisationVector&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           &quot;EncryptedData&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;SensitiveCardData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;PAN&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;ExpiryDate&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;CCV&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;PaymentToken&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;TokenRequestedType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;TokenValue&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;CustomFields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Key&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Type&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Value&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Payment&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr></tbody></table>
<p><strong>PaymentRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><strong>SaleData</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Sale System information attached to this payment</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#operatorid">OperatorID</a></td><td style="text-align:center"></td><td>String</td><td>Only required if different from Login Request</td></tr><tr><td> <a href="#operatorlanguage">OperatorLanguage</a></td><td style="text-align:center"></td><td>String</td><td>Set to &quot;en&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#shiftnumber">ShiftNumber</a></td><td style="text-align:center"></td><td>String</td><td>Only required if different from Login Request</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#salereferenceid">SaleReferenceID</a></td><td style="text-align:center"></td><td>String</td><td>Mandatory for pre-authorisation and completion, otherwise optional. See <a href="/fusion/docs/api-reference/data-model#salereferenceid">SaleReferenceID</a></td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#tokenrequestedtype">TokenRequestedType</a></td><td style="text-align:center"></td><td>String</td><td>If present, indicates which type of token should be created for this payment. See <a href="/fusion/docs/api-reference/data-model#tokenrequestedtype">TokenRequestedType</a></td></tr><tr><td> <strong>SaleTransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>Unique reference for this sale ticket. Not necessarily unique per payment request; for example a sale with split payments will have a number of payments with the same <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Time of initiating the payment request on the POI System, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a> DateTime. e.g. &quot;2019-09-02T09:13:51.0+01:00&quot;</td></tr><tr><td> <strong>SaleTerminalData</strong></td><td style="text-align:center"></td><td>Object</td><td>Define Sale System configuration. Only include if elements within have different values to those in Login Request</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#terminalenvironment">TerminalEnvironment</a></td><td style="text-align:center"></td><td>String</td><td>&quot;Attended&quot;, &quot;SemiAttended&quot;, or &quot;Unattended&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#salecapabilities">SaleCapabilities</a></td><td style="text-align:center"></td><td>Array</td><td>Advises the POI System of the Sale System capabilities. See <a href="/fusion/docs/api-reference/data-model#salecapabilities">SaleCapabilities</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#totalsgroupid">TotalsGroupId</a></td><td style="text-align:center"></td><td>String</td><td>Groups transactions in a login session</td></tr><tr><td><strong>PaymentTransaction</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td> <strong>AmountsReq</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object which contains the various components which make up the payment amount</td></tr><tr><td>  <a href="#currency">Currency</a></td><td style="text-align:center">✔</td><td>String</td><td>Three character currency code. Set to &quot;AUD&quot;</td></tr><tr><td>  <a href="#requestedamount">RequestedAmount</a></td><td style="text-align:center">✔</td><td>Decimal</td><td>The requested amount for the transaction sale items, including cash back and tip requested</td></tr><tr><td>  <a href="#cashbackamount">CashBackAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>The Cash back amount. Only if cash back is included in the transaction by the Sale System</td></tr><tr><td>  <a href="#tipamount">TipAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>The Tip amount. Inlude this in the request if you want the Tip handled on your app. Otherwise, if you want to show the Tip Prompt via Satellite, do not include this parameter in the request.</td></tr><tr><td>  <a href="#paidamount">PaidAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>Sum of the amount of sale items – <code>RequestedAmount</code>. Present only if an amount has already been paid in the case of a split payment.</td></tr><tr><td>  <a href="#maximumcashbackamount">MaximumCashBackAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>Available if <code>CashBackAmount</code> is not present. If present, the POI Terminal prompts for the cash back amount up to a maximum of <code>MaximumCashBackAmount</code></td></tr><tr><td>  <a href="#minimumsplitamount">MinimumSplitAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>Present only if the POI Terminal can process an amount less than the <code>RequestedAmount</code> as a split amount. Limits the minimum split amount allowed.</td></tr><tr><td> <strong><a href="/fusion/docs/api-reference/data-model#originalpoitransaction">OriginalPOITransaction</a></strong></td><td style="text-align:center"></td><td>Object</td><td>Identifies a previous POI transaction. Mandatory for Refund and Completion. See <a href="/fusion/docs/api-reference/data-model#originalpoitransaction">OriginalPOITransaction</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a> which performed the original transaction</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a> which performed the original transaction</td></tr><tr><td>  <strong>POITransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td><code>TransactionID</code> from the original transaction</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td><code>TimeStamp</code> from the original transaction</td></tr><tr><td>  <a href="#reusecarddataflag">ReuseCardDataFlag</a></td><td style="text-align:center"></td><td>Boolean</td><td>If &#x27;true&#x27; the POI Terminal will retrieve the card data from file based on the <code>PaymentToken</code> included in the request. Otherwise the POI Terminal will read the same card again.</td></tr><tr><td>  <a href="#approvalcode">ApprovalCode</a></td><td style="text-align:center"></td><td>String</td><td>Present if a referral code is obtained from an Acquirer</td></tr><tr><td>  <a href="#lasttransactionflag">LastTransactionFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>Set to true to process the Last Transaction with a referral code</td></tr><tr><td> <strong>TransactionConditions</strong></td><td style="text-align:center"></td><td>Object</td><td>Optional transaction configuration. Present only if any of the JSON elements within are present.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#allowedpaymentbrands">AllowedPaymentBrands</a></td><td style="text-align:center"></td><td>Array</td><td>Restricts the request to specified card brands. See <a href="/fusion/docs/api-reference/data-model#allowedpaymentbrands">AllowedPaymentBrands</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#paymenttransaction.transactionconditions.acquirerid">AcquirerID</a></td><td style="text-align:center"></td><td>Array</td><td>Used to restrict the payment to specified acquirers. See <a href="/fusion/docs/api-reference/data-model#paymenttransaction.transactionconditions.acquirerid">AcquirerID</a></td></tr><tr><td>  <a href="#debitpreferredflag">DebitPreferredFlag</a></td><td style="text-align:center"></td><td>Boolean</td><td>If present, debit processing is preferred to credit processing.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#forceonlineflag">ForceOnlineFlag</a></td><td style="text-align:center"></td><td>Boolean</td><td>If &#x27;true&#x27; the transaction will only be processed in online mode, and will fail if there is no response from the Acquirer.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#merchantcategorycode">MerchantCategoryCode</a></td><td style="text-align:center"></td><td>String</td><td>If present, overrides the MCC used for processing the transaction if allowed. Refer to ISO 18245 for available codes.</td></tr><tr><td> <strong><a href="/fusion/docs/api-reference/data-model#saleitem">SaleItem</a></strong></td><td style="text-align:center">✔</td><td>Array</td><td>Array of <a href="/fusion/docs/api-reference/data-model#saleitem">SaleItem</a> objects which represent the product basket attached to this transaction. See <a href="/fusion/docs/api-reference/data-model#saleitem">SaleItem</a> for examples.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#itemid">ItemID</a></td><td style="text-align:center">✔</td><td>Integer</td><td>A unique identifier for the sale item within the context of this payment. e.g. a 0..n integer which increments by one for each sale item.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#productcode">ProductCode</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique identifier for the product within the merchant, such as the SKU. For example if two customers purchase the same product at two different stores owned by the merchant, both purchases should contain the same <code>ProductCode</code>.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#eanupc">EanUpc</a></td><td style="text-align:center"></td><td>String</td><td>A standard unique identifier for the product. Either the UPC, EAN, or ISBN. Required for products with a UPC, EAN, or ISBN</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#unitofmeasure">UnitOfMeasure</a></td><td style="text-align:center">✔</td><td>String</td><td>Unit of measure of the <code>Quantity</code>. If this item has no unit of measure, set to &quot;Other&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#quantity">Quantity</a></td><td style="text-align:center">✔</td><td>Decimal</td><td>Sale item quantity based on <code>UnitOfMeasure</code>.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#unitprice">UnitPrice</a></td><td style="text-align:center">✔</td><td>Decimal</td><td>Price per sale item unit. Present if <code>Quantity</code> is included.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#itemamount">ItemAmount</a></td><td style="text-align:center">✔</td><td>Decimal</td><td>Total amount of the sale item</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#taxcode">TaxCode</a></td><td style="text-align:center"></td><td>String</td><td>Type of tax associated with the sale item. Default = &quot;GST&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#salechannel">SaleChannel</a></td><td style="text-align:center"></td><td>String</td><td>Commercial or distribution channel of the sale item. Default = &quot;Unknown&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#productlabel">ProductLabel</a></td><td style="text-align:center">✔</td><td>String</td><td>a short, human readable, descriptive name of the product.  For example, <code>ProductLabel</code> could contain the product name typically printed on the customer receipt.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#additionalproductinfo">AdditionalProductInfo</a></td><td style="text-align:center"></td><td>String</td><td>Additional information, or more detailed description of the product item.</td></tr><tr><td>  <a href="#parentitemid">ParentItemID</a></td><td style="text-align:center"></td><td>Integer</td><td><em>Required</em> if this item is a &#x27;modifier&#x27; or sub-item. Contains the <a href="/fusion/docs/api-reference/data-model#itemid">ItemID</a> of the parent <code>SaleItem</code></td></tr><tr><td>  <a href="#costbase">CostBase</a></td><td style="text-align:center"></td><td>Decimal</td><td>Cost of the product to the merchant per unit</td></tr><tr><td>  <a href="#discount">Discount</a></td><td style="text-align:center"></td><td>Decimal</td><td>If applied, the amount this sale item was discounted by</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#categories">Categories</a></td><td style="text-align:center"></td><td>Array</td><td>Array of categories. Top level &quot;main&quot; category at categories[0]. See <a href="/fusion/docs/api-reference/data-model#categories">Categories</a> for more information.</td></tr><tr><td>  <a href="#brand">Brand</a></td><td style="text-align:center"></td><td>String</td><td>Brand name - typically visible on the product packaging or label</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#quantityinstock">QuantityInStock</a></td><td style="text-align:center"></td><td>Decimal</td><td>Remaining number of this item in stock in same unit of measure as <code>Quantity</code></td></tr><tr><td>  <a href="#sale-item-tags">Tags</a></td><td style="text-align:center"></td><td>Array</td><td>String array with descriptive tags for the product</td></tr><tr><td>  <a href="#restricted">Restricted</a></td><td style="text-align:center"></td><td>Boolean</td><td><code>true</code> if this is a restricted item, <code>false</code> otherwise. Defaults to <code>false</code> when field is null.</td></tr><tr><td>  <a href="#productpageurl">PageURL</a></td><td style="text-align:center"></td><td>String</td><td>URL link to the sale items product page</td></tr><tr><td>  <a href="#productimageurls">ImageURLs</a></td><td style="text-align:center"></td><td>Array</td><td>String array of images URLs for this sale item</td></tr><tr><td>  <a href="#style">Style</a></td><td style="text-align:center"></td><td>String</td><td>Style of the sale item</td></tr><tr><td>  <a href="#size">Size</a></td><td style="text-align:center"></td><td>String</td><td>Size of the sale item</td></tr><tr><td>  <a href="#colour">Colour</a></td><td style="text-align:center"></td><td>String</td><td>Colour of the sale item</td></tr><tr><td>  <a href="#weight">Weight</a></td><td style="text-align:center"></td><td>Decimal</td><td>Sale item weight, based on <code>WeightUnitOfMeasure</code></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#unitofmeasure">WeightUnitOfMeasure</a></td><td style="text-align:center"></td><td>String</td><td>Unit of measure of the <code>Weight</code>.</td></tr><tr><td> <strong>PaymentData</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object representing the payment method. Present only if any of the JSON elements within are present.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#paymenttype">PaymentType</a></td><td style="text-align:center">✔</td><td>String</td><td>Defaults to &quot;Normal&quot;. Indicates the type of payment to process. &quot;Normal&quot;, &quot;Refund&quot;, &quot;CashAdvance&quot;, &quot;FirstReservation&quot;, or &quot;Completion&quot;. See <a href="/fusion/docs/api-reference/data-model#paymenttype">PaymentType</a></td></tr><tr><td>  <strong><a href="/fusion/docs/api-reference/data-model#paymentinstrumentdata">PaymentInstrumentData</a></strong></td><td style="text-align:center"></td><td>Object</td><td>Object with represents card details for token or manually enter card details. See  for object structure</td></tr><tr><td> <strong><a href="/fusion/docs/api-reference/data-model#customfields">CustomFields</a></strong></td><td style="text-align:center"></td><td>Array</td><td>Array of key/type/value objects containing additional payment information</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="payment-response">Payment response<a href="#payment-response" class="hash-link" aria-label="Direct link to Payment response" title="Direct link to Payment response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Payment response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;PaymentResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Result&quot;:&quot;Success| Partial | Failure&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ErrorCondition&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;AdditionalResponse&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleTransactionID&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TransactionID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TimeStamp&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleReferenceID&quot;:&quot;xxxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;POITransactionID&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TransactionID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TimeStamp&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;POIReconciliationID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;PaymentResult&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;PaymentType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;PaymentInstrumentData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;PaymentInstrumentType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;CardData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;EntryMode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;PaymentBrand&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;Account&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;MaskedPAN&quot;:&quot;xxxxxx…xxxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;PaymentToken&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;TokenRequestedType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;TokenValue&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;ExpiryDateTime&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;AmountsResp&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Currency&quot;:&quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AuthorizedAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TotalFeesAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;CashBackAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TipAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			   &quot;SurchargeAmount&quot;:&quot;x.xx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;OnlineFlag&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;PaymentAcquirerData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AcquirerID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;MerchantID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AcquirerPOIID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AcquirerTransactionID&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;TransactionID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;TimeStamp&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ApprovalCode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ResponseCode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;HostReconciliationID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;AllowedProductCodes&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;PaymentReceipt&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;DocumentQualifier&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;RequiredSignatureFlag&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;OutputContent&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;OutputFormat&quot;:&quot;XHTML&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;OutputXHTML&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Payment&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr></tbody></table>
<p><strong>PaymentResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><strong>Response</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object indicating the result of the payment</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the result of the response. Possible values are &quot;Success&quot; and &quot;Failure&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr><tr><td><strong>SaleData</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td> <strong>SaleTransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#salereferenceid">SaleReferenceID</a></td><td style="text-align:center"></td><td>String</td><td>Mirrored from the request</td></tr><tr><td><strong>POIData</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td> <strong>POITransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique transaction id from the POI system</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Time on the POI system, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a></td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#poireconciliationid">POIReconciliationID</a></td><td style="text-align:center"></td><td>String</td><td>Present if <code>Result</code> is &quot;Success&quot; or &quot;Partial&quot;. See <a href="/fusion/docs/api-reference/data-model#poireconciliationid">POIReconciliationID</a></td></tr><tr><td><strong>PaymentResult</strong></td><td style="text-align:center"></td><td>Object</td><td>Object related to a processed payment</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#paymenttype">PaymentType</a></td><td style="text-align:center"></td><td>String</td><td>Mirrored from the request</td></tr><tr><td> <strong>PaymentInstrumentData</strong></td><td style="text-align:center"></td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#paymentinstrumenttype">PaymentInstrumentType</a></td><td style="text-align:center"></td><td>String</td><td>&quot;Card&quot; or &quot;Mobile&quot;</td></tr><tr><td>  <strong>CardData</strong></td><td style="text-align:center"></td><td>Object</td><td></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#entrymode">EntryMode</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates how the card was presented. See <a href="/fusion/docs/api-reference/data-model#entrymode">EntryMode</a></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#paymentbrand">PaymentBrand</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the card type used. See <a href="/fusion/docs/api-reference/data-model#paymentbrand">PaymentBrand</a></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#maskedpan">MaskedPAN</a></td><td style="text-align:center">✔</td><td>String</td><td>PAN masked with dots, first 6 and last 4 digits visible</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#account">Account</a></td><td style="text-align:center"></td><td>String</td><td>Present if <code>EntryMode</code> is &quot;MagStripe&quot;, &quot;ICC&quot;, or &quot;Tapped&quot;. Indicates the card account used. See <a href="/fusion/docs/api-reference/data-model#account">Account</a></td></tr><tr><td>   <strong>PaymentToken</strong></td><td style="text-align:center"></td><td>Object</td><td>Object representing a token. Only present if token was requested</td></tr><tr><td>    <a href="/fusion/docs/api-reference/data-model#tokenrequestedtype">TokenRequestedType</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td>    <a href="#tokenvalue">TokenValue</a></td><td style="text-align:center">✔</td><td>String</td><td>The value of the token</td></tr><tr><td>    <a href="#expirydatetime">ExpiryDateTime</a></td><td style="text-align:center">✔</td><td>String</td><td>Expiry of the token, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a></td></tr><tr><td> <strong>AmountsResp</strong></td><td style="text-align:center"></td><td>Object</td><td>Present if <code>Result</code> is &quot;Success&quot; or &quot;Partial&quot;</td></tr><tr><td>  <a href="#currency">Currency</a></td><td style="text-align:center"></td><td>String</td><td>&quot;AUD&quot;</td></tr><tr><td>  <a href="#authorizedamount">AuthorizedAmount</a></td><td style="text-align:center">✔</td><td>Decimal</td><td>Authorised amount which could be more, or less than the requested amount</td></tr><tr><td>  <a href="#totalfeesamount">TotalFeesAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>Total of financial fees associated with the payment transaction if known at time of transaction</td></tr><tr><td>  <a href="#cashbackamount">CashBackAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>Cash back paid amount</td></tr><tr><td>  <a href="#tipamount">TipAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>The amount of any tip added to the transaction</td></tr><tr><td>  <a href="#surchargeamount">SurchargeAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>The amount of any surcharge added to the transaction</td></tr><tr><td> <a href="#onlineflag">OnlineFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>True if the transaction was processed online, false otherwise</td></tr><tr><td> <strong>PaymentAcquirerData</strong></td><td style="text-align:center"></td><td>Object</td><td>Data related to the response from the payment acquirer</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#paymentacquirerdata.acquirerid">AcquirerID</a></td><td style="text-align:center">✔</td><td>String</td><td>The ID of the acquirer which processed the transaction</td></tr><tr><td>  <a href="#merchantid">MerchantID</a></td><td style="text-align:center">✔</td><td>String</td><td>The acquirer merchant ID (MID)</td></tr><tr><td>  <a href="#acquirerPOIID">AcquirerPOIID</a></td><td style="text-align:center">✔</td><td>String</td><td>The acquirer terminal ID (TID)</td></tr><tr><td>  <strong>AcquirerTransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>The acquirer transaction ID</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Timestamp from the acquirer, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a></td></tr><tr><td>  <a href="#approvalcode">ApprovalCode</a></td><td style="text-align:center">✔</td><td>String</td><td>The Acquirer Approval Code. Also referred to as the Authentication Code</td></tr><tr><td>  <a href="#responsecode">ResponseCode</a></td><td style="text-align:center">✔</td><td>String</td><td>The Acquirer Response Code. Also referred as the PINPad response code</td></tr><tr><td>  <a href="#stan">STAN</a></td><td style="text-align:center"></td><td>String</td><td>The Acquirer STAN if available</td></tr><tr><td>  <a href="#rrn">RRN</a></td><td style="text-align:center"></td><td>String</td><td>The Acquirer RRN if available</td></tr><tr><td>  <a href="#hostreconciliationid">HostReconciliationID</a></td><td style="text-align:center">✔</td><td>String</td><td>Identifier of a reconciliation period with the acquirer. This normally has a date and time component in it</td></tr><tr><td> <a href="#allowedproductcodes">AllowedProductCodes</a></td><td style="text-align:center"></td><td>Array</td><td>Present if <code>ErrorCondition</code> is &quot;PaymentRestriction&quot;. Consists of a list of product codes corresponding to products that are purchasable with the given card. Items that exist in the basket but do not belong to this list corresponds to restricted items</td></tr><tr><td> <strong>PaymentReceipt</strong></td><td style="text-align:center"></td><td>Array</td><td>Array of payment receipt objects which represent receipts to be printed</td></tr><tr><td>  <a href="#documentqualifier">DocumentQualifier</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;CashierReceipt&quot; for a merchant receipt, otherwise &quot;SaleReceipt&quot;</td></tr><tr><td>  <a href="#requiredsignatureflag">RequiredSignatureFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>If true, the card holder signature is required on the merchant CashierReceipt.</td></tr><tr><td>  <strong>OutputContent</strong></td><td style="text-align:center"></td><td>Array</td><td>Array of payment receipt objects which represent receipts to be printed</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#outputformat">OutputFormat</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;XHTML&quot;</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#outputxhtml">OutputXHTML</a></td><td style="text-align:center">✔</td><td>String</td><td>The payment receipt in XHTML format but coded in BASE64</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-status">Transaction status<a href="#transaction-status" class="hash-link" aria-label="Direct link to Transaction status" title="Direct link to Transaction status">​</a></h3>
<p>A transaction status request can be used to obtain the status of a previous transaction. Required for error handling.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-status-request">Transaction status request<a href="#transaction-status-request" class="hash-link" aria-label="Direct link to Transaction status request" title="Direct link to Transaction status request">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Transaction status request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;TransactionStatus&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;TransactionStatusRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageReference&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MessageCategory&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ServiceID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;TransactionStatus&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr></tbody></table>
<p><strong>TransactionStatusRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><em>MessageReference</em></td><td style="text-align:center"></td><td>Object</td><td>Identification of a previous POI transaction. Present if it contains any data.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center"></td><td>String</td><td>&quot;Payment&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center"></td><td>String</td><td>The <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a> of the transaction to retrieve the status of. If not included the last payment status is returned.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-status-response">Transaction status response<a href="#transaction-status-response" class="hash-link" aria-label="Direct link to Transaction status response" title="Direct link to Transaction status response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Transaction status response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;TransactionStatus&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;TransactionStatusResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Result&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ErrorCondition&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;AdditionalResponse&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageReference&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MessageCategory&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ServiceID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;RepeatedMessageResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MessageHeader&quot;:{...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;RepeatedResponseMessageBody&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;PaymentResponse&quot;:{...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ReversalResponse&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;TransactionStatus&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from request</td></tr></tbody></table>
<p><strong>TransactionStatusResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><em>Response</em></td><td style="text-align:center">✔</td><td>Object</td><td>Object indicating the result of the payment</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the result of the response. Possible values are &quot;Success&quot; and &quot;Failure&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr><tr><td><em>MessageReference</em></td><td style="text-align:center"></td><td>Object</td><td>Identification of a previous POI transaction. Present if <code>Result</code> is &quot;Success&quot;, or <code>Result</code> is &quot;Failure&quot; and <code>ErrorCondition</code> is &quot;InProgress&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from request</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from request, or <code>ServiceID</code> of last transaction if not present in request.</td></tr><tr><td><em>RepeatedMessageResponse</em></td><td style="text-align:center"></td><td>Object</td><td>Present if <code>Result</code> is &quot;Success&quot;</td></tr><tr><td> <em>MessageHeader</em></td><td style="text-align:center">✔</td><td>Object</td><td><code>MessageHeader</code> of the requested payment</td></tr><tr><td> <em>PaymentResponse</em></td><td style="text-align:center">✔</td><td>Object</td><td><code>PaymentResponse</code> of the requested payment</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="voidreversal">Void/Reversal<a href="#voidreversal" class="hash-link" aria-label="Direct link to Void/Reversal" title="Direct link to Void/Reversal">​</a></h3>
<p>A successful payment transaction can be voided/reversed by sending a reversal request message.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>There are only specific cases wherein the reversal request message must be sent.  In most cases, refund request message should be sent instead.</p><p>Please discuss first with the DataMesh Integrations team at <a href="mailto:integrations@datameshgroup.com"><a href="mailto:integrations@datameshgroup.com" target="_blank" rel="noopener noreferrer">integrations@datameshgroup.com</a></a> if you plan to implement any void/reversal processing.</p></div></div>
<p>When the Sale System receives the successful payment response, the Sale System needs to store the <strong>TransactionID</strong> (<em>Response.POIData.POITransactionID.TransactionID</em>) since this will be used in the reversal request message.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="reversal-request">Reversal request<a href="#reversal-request" class="hash-link" aria-label="Direct link to Reversal request" title="Direct link to Reversal request">​</a></h5>
<p>The reversal message is used to perform void/reversal request.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Reversal request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;SaleToPOIRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageCategory&quot;: &quot;Reversal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageType&quot;: &quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ProtocolVersion&quot;: &quot;3.1-dmg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ServiceID&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;ReversalRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;OriginalPOITransaction&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;ReuseCardDataFlag&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POIID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;xxx&quot; //This should be the set to the TransactionID in the Original Successful Payment Response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleID&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ReversalReason&quot;: &quot;SignatureDeclined&quot;// (e.g. CustCancel, MerchantCancel, Malfunction, Unable2Compl, SignatureDeclined, Unknown)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Reversal&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#protocolversion">ProtocolVersion</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;3.1-dmg&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr></tbody></table>
<p><strong>ReversalRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td> <strong><a href="/fusion/docs/api-reference/data-model#originalpoitransaction">OriginalPOITransaction</a></strong></td><td style="text-align:center">✔</td><td>Object</td><td>Identifies a previous POI transaction. See <a href="/fusion/docs/api-reference/data-model#originalpoitransaction">OriginalPOITransaction</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a> which performed the original transaction</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a> which performed the original transaction</td></tr><tr><td>  <a href="#reusecarddataflag">ReuseCardDataFlag</a></td><td style="text-align:center"></td><td>Boolean</td><td>If &#x27;true&#x27; the POI Terminal will retrieve the card data from file based on the <code>PaymentToken</code> included in the request. Otherwise the POI Terminal will read the same card again.</td></tr><tr><td>  <strong>POITransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td><code>TransactionID</code> from the original transaction</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td><code>TimeStamp</code> from the original transaction</td></tr><tr><td> <strong><a href="/fusion/docs/api-reference/data-model#reversal-reason">ReversalReason</a></strong></td><td style="text-align:center">✔</td><td>Object</td><td>Reason for cancelling the successful payment transaction.  See <a href="/fusion/docs/api-reference/data-model#reversalreason">ReversalReason</a></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="reversal-response">Reversal response<a href="#reversal-response" class="hash-link" aria-label="Direct link to Reversal response" title="Direct link to Reversal response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Reversal response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;SaleToPOIResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageCategory&quot;: &quot;Reversal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageType&quot;: &quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ProtocolVersion&quot;: &quot;3.1-dmg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ServiceID&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;ReversalResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;xxxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentReceipt&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;DocumentQualifier&quot;: &quot;SaleReceipt&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;OutputContent&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputFormat&quot;: &quot;XHTML&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputXHTML&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RequiredSignatureFlag&quot;: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;DocumentQualifier&quot;: &quot;CashierReceipt&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;OutputContent&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputFormat&quot;: &quot;XHTML&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputXHTML&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RequiredSignatureFlag&quot;: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;Response&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;Result&quot;: &quot;Success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Reversal&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#protocolversion">ProtocolVersion</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;3.1-dmg&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr></tbody></table>
<p><strong>ReversalResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><strong>Response</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object indicating the result of the payment</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the result of the response. Possible values are &quot;Success&quot; and &quot;Failure&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr><tr><td><strong>POIData</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td> <strong>POITransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique transaction id from the POI system</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Time on the POI system, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a></td></tr><tr><td> <strong>PaymentReceipt</strong></td><td style="text-align:center"></td><td>Array</td><td>Array of payment receipt objects which represent receipts to be printed</td></tr><tr><td>  <a href="#documentqualifier">DocumentQualifier</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;CashierReceipt&quot; for a merchant receipt, otherwise &quot;SaleReceipt&quot;</td></tr><tr><td>  <a href="#requiredsignatureflag">RequiredSignatureFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>If true, the card holder signature is required on the merchant CashierReceipt.</td></tr><tr><td>  <strong>OutputContent</strong></td><td style="text-align:center"></td><td>Array</td><td>Array of payment receipt objects which represent receipts to be printed</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#outputformat">OutputFormat</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;XHTML&quot;</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#outputxhtml">OutputXHTML</a></td><td style="text-align:center">✔</td><td>String</td><td>The payment receipt in XHTML format but coded in BASE64</td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/fusion/docs/api-reference/fusion-cloud"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Fusion Cloud</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/fusion/docs/api-reference/data-model"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data model</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#libraries" class="table-of-contents__link toc-highlight">Libraries</a><ul><li><a href="#how-to-include-the-library" class="table-of-contents__link toc-highlight">How to include the library</a></li></ul></li><li><a href="#device-specific-changes" class="table-of-contents__link toc-highlight">Device Specific Changes</a><ul><li><a href="#printer" class="table-of-contents__link toc-highlight">Printer</a></li></ul></li><li><a href="#sending-messages" class="table-of-contents__link toc-highlight">Sending messages</a><ul><li><a href="#sample-code-for-sending-a-payment-request" class="table-of-contents__link toc-highlight">Sample code for Sending a Payment Request</a></li><li><a href="#intent-request" class="table-of-contents__link toc-highlight">Intent request</a></li><li><a href="#intent-response" class="table-of-contents__link toc-highlight">Intent response</a></li><li><a href="#requestresponse-object" class="table-of-contents__link toc-highlight">Request/response object</a></li><li><a href="#messageheader" class="table-of-contents__link toc-highlight">MessageHeader</a></li><li><a href="#payload" class="table-of-contents__link toc-highlight">Payload</a></li></ul></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods</a><ul><li><a href="#payment" class="table-of-contents__link toc-highlight">Payment</a><ul><li><a href="#payment-request" class="table-of-contents__link toc-highlight">Payment request</a></li><li><a href="#payment-response" class="table-of-contents__link toc-highlight">Payment response</a></li></ul></li><li><a href="#transaction-status" class="table-of-contents__link toc-highlight">Transaction status</a><ul><li><a href="#transaction-status-request" class="table-of-contents__link toc-highlight">Transaction status request</a></li><li><a href="#transaction-status-response" class="table-of-contents__link toc-highlight">Transaction status response</a></li></ul></li><li><a href="#voidreversal" class="table-of-contents__link toc-highlight">Void/Reversal</a><ul><li><a href="#reversal-response" class="table-of-contents__link toc-highlight">Reversal response</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">2023-11-14</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">Useful Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.datameshgroup.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">DataMesh Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/datameshgroup" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:integrations@datameshgroup.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">DataMesh<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 <a href="https://www.datameshgroup.com/">DataMesh Group</a>.</div></div></div></footer></div>
</body>
</html>