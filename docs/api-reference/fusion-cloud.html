<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-api-reference/fusion-cloud" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Fusion Cloud | DataMesh Fusion API</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://datameshgroup.github.io/fusion/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://datameshgroup.github.io/fusion/img/logo.png"><meta data-rh="true" property="og:url" content="https://datameshgroup.github.io/fusion/docs/api-reference/fusion-cloud"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Fusion Cloud | DataMesh Fusion API"><meta data-rh="true" name="description" content="The Fusion Cloud API allows the Sale System to communicate with a POI terminal via a Websocket connected to the DataMesh Unify switch."><meta data-rh="true" property="og:description" content="The Fusion Cloud API allows the Sale System to communicate with a POI terminal via a Websocket connected to the DataMesh Unify switch."><link data-rh="true" rel="icon" href="/fusion/img/logo.png"><link data-rh="true" rel="canonical" href="https://datameshgroup.github.io/fusion/docs/api-reference/fusion-cloud"><link data-rh="true" rel="alternate" href="https://datameshgroup.github.io/fusion/docs/api-reference/fusion-cloud" hreflang="en"><link data-rh="true" rel="alternate" href="https://datameshgroup.github.io/fusion/docs/api-reference/fusion-cloud" hreflang="x-default"><link rel="stylesheet" href="/fusion/assets/css/styles.427cef24.css">
<script src="/fusion/assets/js/runtime~main.4166a7ea.js" defer="defer"></script>
<script src="/fusion/assets/js/main.9f7500cf.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/fusion/"><div class="navbar__logo"><img src="/fusion/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/fusion/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">DataMesh Group</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fusion/docs/getting-started">Fusion API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/datameshgroup" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fusion/docs/getting-started">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/fusion/docs/category/api-reference">API Reference</a><button aria-label="Collapse sidebar category &#x27;API Reference&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/fusion-app">Fusion App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/fusion/docs/api-reference/fusion-cloud">Fusion Cloud</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/fusion-satellite">Fusion Satellite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/fusion-api-fuel-extension">Fusion API Fuel Extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/fusion-api-stored-value-extension">Fusion API Stored Value Extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/data-model">Data model</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fusion/docs/testing">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fusion/docs/production">Production</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fusion/docs/appendix">Appendix</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/fusion/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/fusion/docs/category/api-reference"><span itemprop="name">API Reference</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Fusion Cloud</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Fusion Cloud</h1>
<p>The Fusion Cloud API allows the Sale System to communicate with a POI terminal via a Websocket connected to the DataMesh Unify switch.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference-code">Reference code<a class="hash-link" aria-label="Direct link to Reference code" title="Direct link to Reference code" href="/fusion/docs/api-reference/fusion-cloud#reference-code">​</a></h2>
<table><thead><tr><th style="text-align:center"><div style="width:180px">Development Language</div></th><th>Description</th><th>Location</th></tr></thead><tbody><tr><td style="text-align:center">.Net</td><td>.Net NuGet package</td><td>on <a href="https://www.nuget.org/packages/DataMeshGroup.Fusion.FusionClient/" target="_blank" rel="noopener noreferrer">Nuget</a></td></tr><tr><td style="text-align:center"></td><td>Source Code</td><td>on <a href="https://github.com/datameshgroup/sdk-dotnet" target="_blank" rel="noopener noreferrer">GitHub</a></td></tr><tr><td style="text-align:center"></td><td>Demo Application implementing the sdk</td><td>on <a href="https://github.com/datameshgroup/sdk-dotnet-purchasedemo" target="_blank" rel="noopener noreferrer">GitHub</a></td></tr><tr><td style="text-align:center">Java</td><td>Source Code</td><td>on <a href="https://github.com/datameshgroup/fusioncloud-sdk-java" target="_blank" rel="noopener noreferrer">GitHub</a></td></tr><tr><td style="text-align:center"></td><td>Library</td><td>on <a href="https://central.sonatype.com/artifact/com.datameshgroup.fusion/fusion-cloud" target="_blank" rel="noopener noreferrer">Maven Central</a></td></tr><tr><td style="text-align:center"></td><td>Demo Application implementing the sdk</td><td>on <a href="https://github.com/datameshgroup/fusioncloud-sdk-java-demo" target="_blank" rel="noopener noreferrer">GitHub</a></td></tr><tr><td style="text-align:center"></td><td>Android Demo Application implementing the sdk</td><td>on <a href="https://github.com/datameshgroup/fusioncloud-sdk-android-demo" target="_blank" rel="noopener noreferrer">GitHub</a></td></tr><tr><td style="text-align:center">Swift Framework (for iOS)</td><td>Source Code</td><td>on <a href="https://github.com/datameshgroup/fusioncloud-sdk-ios" target="_blank" rel="noopener noreferrer">GitHub</a></td></tr><tr><td style="text-align:center"></td><td>Demo Application implementing the sdk</td><td>on <a href="https://github.com/datameshgroup/fusioncloud-sdk-ios-demo" target="_blank" rel="noopener noreferrer">GitHub</a></td></tr><tr><td style="text-align:center">FusionCloudIOS cocoapod (for iOS)</td><td>Source Code</td><td>on <a href="https://github.com/datameshgroup/FusionCloudIOS" target="_blank" rel="noopener noreferrer">GitHub</a></td></tr><tr><td style="text-align:center"></td><td>Demo included in the pod Example</td><td></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="security-requirements">Security requirements<a class="hash-link" aria-label="Direct link to Security requirements" title="Direct link to Security requirements" href="/fusion/docs/api-reference/fusion-cloud#security-requirements">​</a></h2>
<p>Unify utilises secure websockets for communication between Sale System and POI Server.</p>
<ul>
<li>The Sale System and merchant environment must support outgoing TCP connections to <code>*.datameshgroup.io:443</code>, <code>*.datameshgroup.io:4000</code>, and <code>*.datameshgroup.io:5000</code> for both the terminal and Sale System</li>
<li>As a cloud service, Unify may run on several IP addresses.<!-- -->
<ul>
<li>The Sale System must always use the DNS endpoints provided by DataMesh and never limit connectivity to a specific IP address</li>
</ul>
</li>
<li>The Sale System websocket connection must use TLS v1.2 or v1.3 with the SNI extension and one of the following ciphers:<!-- -->
<ul>
<li>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 (TLS v1.2)</li>
<li>TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 (TLS v1.2)</li>
<li>TLS_AES_128_GCM_SHA256 (TLS v1.3)</li>
<li>TLS_CHACHA20_POLY1305_SHA256 (TLS v1.3)</li>
<li>TLS_AES_256_GCM_SHA384 (TLS v1.3)</li>
</ul>
</li>
<li>The Sale System must ensure the connection to Unify is trusted by validating the server-side certificate chain<!-- -->
<ul>
<li>Unify utilises standard, public Root CA</li>
<li>Contact <a href="mailto:integrations@datameshgroup.com" target="_blank" rel="noopener noreferrer">integrations@datameshgroup.com</a> for alternative connection methods if required</li>
<li>If certificate validation fails the Sale System must display an error and drop the connection.</li>
</ul>
</li>
<li>The Sale System must resolve the DNS address before each connection attempt, and never hard code IP addresses</li>
<li>The Sale System should manage SSL certificate revocation lists and ensure OS security updates are applied</li>
<li>The Sale System should store the <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a>, <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a>, and <a href="/fusion/docs/api-reference/data-model#kek">KEK</a> in a secure location. These values are used to identify the Sale System and authenticate the <a href="/fusion/docs/api-reference/fusion-cloud#securitytrailer">SecurityTrailer</a></li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Over time, Data Mesh may require the Sale System to update the TLS requirements provided above if a security risk is identified. In this situation DataMesh will provide the new requirements and allow a reasonable amount of time to allow the Sale System to meet the new requirements.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="endpoints">Endpoints<a class="hash-link" aria-label="Direct link to Endpoints" title="Direct link to Endpoints" href="/fusion/docs/api-reference/fusion-cloud#endpoints">​</a></h2>
<p>Production environment</p>
<p><code>wss://nexo.datameshgroup.io:5000</code></p>
<p>Test environment</p>
<p><code>wss://www.cloudposintegration.io/nexouat1</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="message-format">Message format<a class="hash-link" aria-label="Direct link to Message format" title="Direct link to Message format" href="/fusion/docs/api-reference/fusion-cloud#message-format">​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>SaleToPOIRequest</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;SaleToPOIRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;MessageHeader&quot;:{...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;PaymentRequest&quot;:{...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>SaleToPOIResponse</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;SaleToPOIResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;MessageHeader&quot;:{...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;PaymentResponse&quot;:{...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p>All messages use JSON format with UTF-8 encoding.</p>
<p>Supported primitive data elements are:</p>
<ol>
<li><strong>String</strong> text string of variable length</li>
<li><strong>Boolean</strong> true or false</li>
<li><strong>Number</strong> defined in this document as either <code>integer</code> or <code>decimal</code>. For all number fields the Sale System <em>MUST</em> remove the digits equal to zero on left and the right of the value and any useless
decimal point (eg. 00320.00 is expressed 320, and 56.10 is expressed 56.1). This simplifies parsing and MAC calculations.</li>
<li><strong>Null</strong> optional types can be represented as null</li>
</ol>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Additional fields will be added to the message specification over time. To ensure forwards compatibility
the Sale System must ignore when extra objects and fields are present in response messages.</p></div></div>
<p>The base of every message is the <code>SaleToPOIRequest</code> object for requests, and <code>SaleToPOIResponse</code> object for responses.</p>
<p>The <code>SaleToPOIRequest</code> and <code>SaleToPOIResponse</code> contain three objects:</p>
<ol>
<li>A <a href="/fusion/docs/api-reference/fusion-cloud#messageheader">MessageHeader</a> object.</li>
<li>A <a href="/fusion/docs/api-reference/fusion-cloud#payload">Payload</a> object of variable types.</li>
<li>A <a href="/fusion/docs/api-reference/fusion-cloud#securitytrailer">SecurityTrailer</a> object.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="messageheader">MessageHeader<a class="hash-link" aria-label="Direct link to MessageHeader" title="Direct link to MessageHeader" href="/fusion/docs/api-reference/fusion-cloud#messageheader">​</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>MessageHeader</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ProtocolVersion&quot;:&quot;3.1-dmg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;MessageClass&quot;:&quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;MessageCategory&quot;:&quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;MessageType&quot;:&quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ServiceID&quot;:&quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;SaleID&quot;:&quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;POIID&quot;:&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p>A <code>MessageHeader</code> is included with each request and response. It defines the protocol, message type, sale and POI id.</p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#protocolversion">ProtocolVersion</a></td><td style="text-align:center">✔</td><td>String</td><td>Version of the Sale to POI protocol specifications. Set to &quot;3.1-dmg&quot;. Present when <code>MessageCategory</code> is &quot;Login&quot; otherwise absent.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>Informs the receiver of the class of message. Possible values are &quot;Service&quot;, &quot;Device&quot;, or &quot;Event&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the category of message. Possible values are &quot;CardAcquisition&quot;, &quot;Display&quot;, &quot;Login&quot;, &quot;Logout&quot;, &quot;Payment&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>Type of message. Possible values are &quot;Request&quot;, &quot;Response&quot;, or &quot;Notification&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the Sale System. The <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a> is provided by DataMesh, and must match the SaleID configured in Unify.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the POI Terminal. The <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a> is provided by DataMesh, and must match the POIID configured in Unify. For Sale Systems that do not need a POI Terminal, the value must be &quot;POI Server&quot;</td></tr><tr><td></td><td style="text-align:center"></td><td></td><td>Only in the Login request after a successful <a href="/fusion/docs/getting-started#qr-pos-pairing">QR POS Pairing</a>, this field will contain the PairingPOIID value from the <a href="/fusion/docs/getting-started#pairing-qr-code">pairing QR code data</a></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="payload">Payload<a class="hash-link" aria-label="Direct link to Payload" title="Direct link to Payload" href="/fusion/docs/api-reference/fusion-cloud#payload">​</a></h3>
<p>An object which defines fields for the request/response. The object name depends on the <a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a> defined in the <code>MessageHeader</code></p>
<p>e.g. a login will include <code>LoginRequest</code>/<code>LoginResponse</code>, and a payment will include a <code>PaymentRequest</code>/<code>PaymentResponse</code>.</p>
<p>The <em>Cloud API Reference</em> outlines the expected payload for each supported request.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="securitytrailer">SecurityTrailer<a class="hash-link" aria-label="Direct link to SecurityTrailer" title="Direct link to SecurityTrailer" href="/fusion/docs/api-reference/fusion-cloud#securitytrailer">​</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>SecurityTrailer</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;SecurityTrailer&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ContentType&quot;:&quot;id-ctauthData&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;AuthenticatedData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Version&quot;:&quot;v0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;Recipient&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;KEK&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Version&quot;:&quot;v4&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;KEKIdentifier&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;KeyIdentifier&quot;:&quot;SpecV2TestMACKey&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;KeyVersion&quot;:&quot;20191122164326.594&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;KeyEncryptionAlgorithm&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Algorithm&quot;:&quot;des-ede3-cbc&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;EncryptedKey&quot;:&quot;834EAB305DD18724B9ADF361FC698CE0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;MACAlgorithm&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Algorithm&quot;:&quot;id-retail-cbc-mac-sha-256&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;EncapsulatedContent&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ContentType&quot;:&quot;iddata&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;MAC&quot;:&quot;C5142F4DB828AA1C&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p>A <code>SecurityTrailer</code> object is included with each request and response.</p>
<p>Unify authenticates requests from the Sale System by examining the <code>SecurityTrailer</code>, along with the <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a>, <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a>, and <code>CertificationCode</code></p>
<p>Session Keys are used to generate/verify a Message Authentication Code (MAC) to prove the authenticity of transactions. They are also used to protect Sensitive Card Data if sent from the Sale System. Session keys must change for every message.</p>
<p><strong>SecurityTrailer</strong></p>
<table><thead><tr><th><div style="width:180px">Attribute</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#contenttype">ContentType</a></td><td style="text-align:center">✔</td><td>String</td><td>Set to &quot;id-ctauthData&quot;</td></tr><tr><td><em>AuthenticatedData</em></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#version">Version</a></td><td style="text-align:center">✔</td><td>String</td><td>Set to &quot;v0&quot;</td></tr><tr><td> <em>Recipient</em></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <em>KEK</em></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>   <a href="/fusion/docs/api-reference/fusion-cloud#version">Version</a></td><td style="text-align:center">✔</td><td>String</td><td>Set to &quot;v4&quot;</td></tr><tr><td>   <em>KEKIdentifier</em></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>    <a href="/fusion/docs/api-reference/data-model#keyidentifier">KeyIdentifier</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;SpecV2TestMACKey&quot; for test environment, and &quot;SpecV2ProdMACKey&quot; for production</td></tr><tr><td>    <a href="/fusion/docs/api-reference/data-model#keyversion">KeyVersion</a></td><td style="text-align:center">✔</td><td>String</td><td>An incrementing value. Either a counter or date formatted as YYYYMMDDHHmmss.mmm. See <a href="/fusion/docs/api-reference/data-model#keyversion">KeyVersion</a></td></tr><tr><td>   <em>KeyEncryptionAlgorithm</em></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>    <a href="/fusion/docs/api-reference/data-model#algorithm">Algorithm</a></td><td style="text-align:center">✔</td><td>String</td><td>Set to &quot;des-ede3-cbc&quot;.</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#encryptedkey">EncryptedKey</a></td><td style="text-align:center">✔</td><td>String</td><td>A double length 3DES key. See <a href="/fusion/docs/api-reference/data-model#encryptedkey">EncryptedKey</a></td></tr><tr><td>  <em>MACAlgorithm</em></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#algorithm">Algorithm</a></td><td style="text-align:center">✔</td><td>String</td><td>Set to &quot;id-retail-cbc-mac-sha-256&quot;</td></tr><tr><td>   <em>EncapsulatedContent</em></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>    <a href="/fusion/docs/api-reference/fusion-cloud#contenttype">ContentType</a></td><td style="text-align:center">✔</td><td>String</td><td>Set to &quot;iddata&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#mac">MAC</a></td><td style="text-align:center">✔</td><td>String</td><td>MAC of message content. See <a href="/fusion/docs/api-reference/data-model#mac">MAC</a></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>For brevity the <code>SecurityTrailer</code> has been excluded from examples.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="perform-a-purchase">Perform a purchase<a class="hash-link" aria-label="Direct link to Perform a purchase" title="Direct link to Perform a purchase" href="/fusion/docs/api-reference/fusion-cloud#perform-a-purchase">​</a></h2>
<p>To perform a purchase the Sale System will need to implement requests, and handle responses outlined in the <a href="/fusion/docs/api-reference/fusion-cloud#getting-started-design-your-integration-payment-lifecycle">payment lifecycle</a>.</p>
<ul>
<li>If a login hasn&#x27;t already been sent for the session, send a login request as detailed in <a href="/fusion/docs/api-reference/fusion-cloud#login">login request</a>
<ul>
<li>Ensure &quot;PrinterReceipt&quot; is included in <a href="/fusion/docs/api-reference/data-model#salecapabilities">SaleTerminalData.SaleCapabilities</a> if payment receipts are to be redirected to the Sale System</li>
</ul>
</li>
<li>Await the a login response and<!-- -->
<ul>
<li>Ensure the <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a> in the result matches the request</li>
<li>Record the <a href="/fusion/docs/api-reference/data-model#poiserialnumber">POISerialNumber</a> to be sent in subsequent login requests</li>
</ul>
</li>
<li>Send a payment request, including all required fields, as detailed in <a href="/fusion/docs/api-reference/fusion-cloud#payment">payment request</a>
<ul>
<li>Set <a href="/fusion/docs/api-reference/data-model#paymenttype">PaymentData.PaymentType</a> to &quot;Normal&quot;</li>
<li>Set the purchase amount in <a href="/fusion/docs/api-reference/data-model#requestedamount">PaymentTransaction.AmountsReq.RequestedAmount</a></li>
<li>Set <a href="/fusion/docs/api-reference/data-model#saletransactionid">SaleTransactionID</a> to a unique value for the sale on this Sale System</li>
<li>Populate the <a href="/fusion/docs/api-reference/data-model#saleitem">SaleItem</a> array with the product basket for the transaction</li>
</ul>
</li>
<li>If configured in <a href="/fusion/docs/api-reference/data-model#salecapabilities">SaleTerminalData.SaleCapabilities</a>, handle any <a href="/fusion/docs/api-reference/fusion-cloud#display">display</a>, <a href="/fusion/docs/api-reference/fusion-cloud#print">print</a>, and <a href="/fusion/docs/api-reference/fusion-cloud#input">input</a> events the POI System sends<!-- -->
<ul>
<li>The expected user interface handling is outlined in <a href="/fusion/docs/api-reference/fusion-cloud#user-interface">user interface</a></li>
<li>The expected payment receipt handling is outlined in <a href="/fusion/docs/api-reference/fusion-cloud#receipt-printing">receipt printing</a></li>
</ul>
</li>
<li>Await the payment response<!-- -->
<ul>
<li>Ensure the <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a> in the result matches the request</li>
<li>Check <a href="/fusion/docs/api-reference/data-model#result">Response.Result</a> for the transaction result</li>
<li>If <a href="/fusion/docs/api-reference/data-model#result">Response.Result</a> is &quot;Success&quot;, record the following to enable future matched refunds: <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a>, <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a>, and <a href="/fusion/docs/api-reference/data-model#poitransactionid">POITransactionID</a></li>
<li>Check <a href="/fusion/docs/api-reference/fusion-cloud#authorizedamount">PaymentResult.AmountsResp.AuthorizedAmount</a> (it may not equal the <code>RequestedAmount</code> in the payment request)</li>
<li>If the Sale System is handling tipping or surcharge, check the <a href="/fusion/docs/api-reference/data-model#tipamount">PaymentResult.AmountsResp.TipAmount</a>, and <a href="/fusion/docs/api-reference/data-model#surchargeamount">PaymentResult.AmountsResp.SurchargeAmount</a></li>
<li>Print the receipt contained in <code>PaymentReceipt</code></li>
</ul>
</li>
<li>Implement error handling outlined in <a href="/fusion/docs/api-reference/fusion-cloud#error-handling">error handling</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="perform-a-refund">Perform a refund<a class="hash-link" aria-label="Direct link to Perform a refund" title="Direct link to Perform a refund" href="/fusion/docs/api-reference/fusion-cloud#perform-a-refund">​</a></h2>
<p>To perform a refund the Sale System will need to implement requests, and handle responses outlined in the <a href="/fusion/docs/api-reference/fusion-cloud#getting-started-design-your-integration-payment-lifecycle">payment lifecycle</a>.</p>
<p>If refunding a previous purchase, the Sale System should include details of the original purchase.</p>
<ul>
<li>If a login hasn&#x27;t already been sent for the session, send a login request as detailed in <a href="/fusion/docs/api-reference/fusion-cloud#login">login request</a>
<ul>
<li>Ensure &quot;PrinterReceipt&quot; is included in <a href="/fusion/docs/api-reference/data-model#salecapabilities">SaleTerminalData.SaleCapabilities</a> if payment receipts are to be redirected to the Sale System</li>
</ul>
</li>
<li>Await the a login response and<!-- -->
<ul>
<li>Ensure the <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a> in the result matches the request</li>
<li>Record the <a href="/fusion/docs/api-reference/data-model#poiserialnumber">POISerialNumber</a> to be sent in subsequent login requests</li>
</ul>
</li>
<li>Send a payment request, including all required fields, as detailed in <a href="/fusion/docs/api-reference/fusion-cloud#payment">payment request</a>
<ul>
<li>Set <a href="/fusion/docs/api-reference/data-model#paymenttype">PaymentData.PaymentType</a> to &quot;Refund&quot;</li>
<li>Set the refund amount in <a href="/fusion/docs/api-reference/data-model#requestedamount">PaymentTransaction.AmountsReq.RequestedAmount</a></li>
<li>Set <a href="/fusion/docs/api-reference/data-model#saletransactionid">SaleTransactionID</a> to a unique value for the sale on this Sale System</li>
<li>If refunding a previous purchase, set the following fields in <a href="/fusion/docs/api-reference/data-model#originalpoitransaction">PaymentTransaction.OriginalPOITransaction</a>
<ul>
<li>Set <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a> to the <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a> of the original purchase payment request</li>
<li>Set <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a> to the <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a> of the original purchase payment request</li>
<li>Set <a href="/fusion/docs/api-reference/data-model#poitransactionid">POITransactionID</a> to the value returned in <a href="/fusion/docs/api-reference/data-model#poitransactionid">POIData.POITransactionID</a> of the original purchase payment response</li>
<li>The product basket is not required for refunds</li>
</ul>
</li>
</ul>
</li>
<li>If configured in <a href="/fusion/docs/api-reference/data-model#salecapabilities">SaleTerminalData.SaleCapabilities</a>, handle any <a href="/fusion/docs/api-reference/fusion-cloud#display">display</a>, <a href="/fusion/docs/api-reference/fusion-cloud#print">print</a>, and <a href="/fusion/docs/api-reference/fusion-cloud#input">input</a> events the POI System sends<!-- -->
<ul>
<li>The expected user interface handling is outlined in <a href="/fusion/docs/api-reference/fusion-cloud#user-interface">user interface</a></li>
<li>The expected payment receipt handling is outlined in <a href="/fusion/docs/api-reference/fusion-cloud#receipt-printing">receipt printing</a></li>
</ul>
</li>
<li>Await the payment response<!-- -->
<ul>
<li>Ensure the <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a> in the result matches the request</li>
<li>Check <a href="/fusion/docs/api-reference/data-model#result">Response.Result</a> for the transaction result</li>
<li>Check <a href="/fusion/docs/api-reference/fusion-cloud#authorizedamount">PaymentResult.AmountsResp.AuthorizedAmount</a> (it may not equal the <code>RequestedAmount</code> in the payment request)</li>
<li>Print the receipt contained in <code>PaymentReceipt</code></li>
</ul>
</li>
<li>Implement error handling outlined in <a href="/fusion/docs/api-reference/fusion-cloud#error-handling">error handling</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample-code-for-performing-a-purchase-or-refund">Sample code for Performing a Purchase or Refund<a class="hash-link" aria-label="Direct link to Sample code for Performing a Purchase or Refund" title="Direct link to Sample code for Performing a Purchase or Refund" href="/fusion/docs/api-reference/fusion-cloud#sample-code-for-performing-a-purchase-or-refund">​</a></h2>
<p>Please refer to the methods in the files listed below to view sample code handling on how to perform a payment/refund.</p>
<table><thead><tr><th style="text-align:center">Development Language</th><th style="text-align:center">Method Name</th><th style="text-align:center">GitHub File</th><th style="text-align:center">GitHub Repository</th></tr></thead><tbody><tr><td style="text-align:center">C# .Net</td><td style="text-align:center"><em>DoPayment</em></td><td style="text-align:center"><a href="https://github.com/datameshgroup/sdk-dotnet-testpos/blob/master/SimplePOS/MainWindow.xaml.cs" target="_blank" rel="noopener noreferrer">MainWindow.xaml.cs</a></td><td style="text-align:center"><a href="https://github.com/datameshgroup/sdk-dotnet-testpos" target="_blank" rel="noopener noreferrer">sdk-dotnet-testpos</a></td></tr><tr><td style="text-align:center">Java</td><td style="text-align:center"><em>doPayment</em></td><td style="text-align:center"><a href="https://github.com/datameshgroup/fusioncloud-sdk-java-demo/blob/master/fusion-client-demo/src/main/java/com/dmg/fusion/FusionClientDemo.java" target="_blank" rel="noopener noreferrer">FusionClientDemo.java</a></td><td style="text-align:center"><a href="https://github.com/datameshgroup/fusioncloud-sdk-java-demo" target="_blank" rel="noopener noreferrer">fusioncloud-sdk-java-demo</a></td></tr><tr><td style="text-align:center">Swift</td><td style="text-align:center"><em>doPayment</em></td><td style="text-align:center"><a href="https://github.com/datameshgroup/fusioncloud-sdk-ios-demo/blob/master/TestAppDM/ViewController.swift" target="_blank" rel="noopener noreferrer">ViewController.swift</a></td><td style="text-align:center"><a href="https://github.com/datameshgroup/fusioncloud-sdk-ios-demo" target="_blank" rel="noopener noreferrer">fusioncloud-sdk-ios-demo</a></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="methods">Methods<a class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods" href="/fusion/docs/api-reference/fusion-cloud#methods">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="login">Login<a class="hash-link" aria-label="Direct link to Login" title="Direct link to Login" href="/fusion/docs/api-reference/fusion-cloud#login">​</a></h3>
<p>The Sale System sends a NEXO Login request when it is ready to pair with a POI terminal and
before any Reconciliation Request. The Sale System can pair with multiple POI terminals by
sending another NEXO Login request.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="login-request">Login request<a class="hash-link" aria-label="Direct link to Login request" title="Direct link to Login request" href="/fusion/docs/api-reference/fusion-cloud#login-request">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Login request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ProtocolVersion&quot;:&quot;3.1-dmg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Login&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;LoginRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;DateTime&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleSoftware&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ProviderIdentification&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ApplicationName&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SoftwareVersion&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;CertificationCode&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleTerminalData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;TerminalEnvironment&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleCapabilities&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;TotalsGroupID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;OperatorLanguage&quot;:&quot;en&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;OperatorID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ShiftNumber&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POISerialNumber&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Pairing&quot;: &quot;true or false&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#protocolversion">ProtocolVersion</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;3.1-dmg&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Login&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the Sale System</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the POI Terminal</td></tr><tr><td></td><td style="text-align:center"></td><td></td><td>Only in the Login request after a successful <a href="/fusion/docs/getting-started#qr-pos-pairing">QR POS Pairing</a>, this field will contain the PairingPOIID value from the <a href="/fusion/docs/getting-started#pairing-qr-code">pairing QR code data</a></td></tr></tbody></table>
<p><strong>LoginRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#datetime">DateTime</a></td><td style="text-align:center">✔</td><td>String</td><td>Current Sale System time, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a> DateTime. e.g. &quot;2019-09-02T09:13:51.0+01:00&quot;</td></tr><tr><td><strong>SaleSoftware</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object containing Sale System identification</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#provideridentification">ProviderIdentification</a></td><td style="text-align:center">✔</td><td>String</td><td>The name of the company supplying the Sale System. Provided by DataMesh.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#applicationname">ApplicationName</a></td><td style="text-align:center">✔</td><td>String</td><td>The name of the Sale System application. Provided by DataMesh.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#softwareversion">SoftwareVersion</a></td><td style="text-align:center">✔</td><td>String</td><td>The software version of the Sale System. Must be the software version of the current build.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#certificationcode">CertificationCode</a></td><td style="text-align:center">✔</td><td>String</td><td>Certification code for this Sale System. Provided by DataMesh.</td></tr><tr><td><strong>SaleTerminalData</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object containing Sale System configuration</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#terminalenvironment">TerminalEnvironment</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Attended&quot;, &quot;SemiAttended&quot;, or &quot;Unattended&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#salecapabilities">SaleCapabilities</a></td><td style="text-align:center">✔</td><td>Array</td><td>Advises the POI System of the Sale System capabilities. See <a href="/fusion/docs/api-reference/data-model#salecapabilities">SaleCapabilities</a></td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#totalsgroupid">TotalsGroupId</a></td><td style="text-align:center"></td><td>String</td><td>Groups transactions in a login session</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#operatorlanguage">OperatorLanguage</a></td><td style="text-align:center"></td><td>String</td><td>Operator language. Set to &#x27;en&#x27;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#operatorid">OperatorId</a></td><td style="text-align:center"></td><td>String</td><td>Groups transactions under this operator id</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#shiftnumber">ShiftNumber</a></td><td style="text-align:center"></td><td>String</td><td>Groups transactions under this shift number</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiserialnumber">POISerialNumber</a></td><td style="text-align:center"></td><td>String</td><td>The POISerialNumber from the last login response, or absent if this is the first login</td></tr><tr><td>Pairing</td><td style="text-align:center"></td><td>Boolean</td><td>True if the POI ID in the MessageHeader is the PairingPOIID value from the <a href="/fusion/docs/getting-started#pairing-qr-code">pairing QR code data</a> for the <a href="/fusion/docs/getting-started#qr-pos-pairing">QR POS Pairing</a></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="login-response">Login response<a class="hash-link" aria-label="Direct link to Login response" title="Direct link to Login response" href="/fusion/docs/api-reference/fusion-cloud#login-response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Login response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ProtocolVersion&quot;:&quot;3.1-dmg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Login&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;LoginResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Result&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ErrorCondition&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;AdditionalResponse&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POISystemData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;DateTime&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;POISoftware&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ProviderIdentification&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ApplicationName&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;SoftwareVersion&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;POITerminalData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TerminalEnvironment&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;POICapabilities&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;POIProfile&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;GenericProfile&quot;:&quot;Custom&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;POISerialNumber&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;POIStatus&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;GlobalStatus&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;PEDOKFlag&quot;:&quot;true or false&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;CardReaderOKFlag&quot;:&quot;true or false&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;PrinterStatus&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;CommunicationOKFlag&quot;:&quot;true or false&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;FraudPreventionFlag&quot;:&quot;true or false&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;TokenRequestStatus&quot;:&quot;true or false&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#protocolversion">ProtocolVersion</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;3.1-dmg&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Login&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr></tbody></table>
<p><strong>LoginResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><strong>Response</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object indicating the result of the login</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the result of the response. Possible values are &quot;Success&quot; and &quot;Failure&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr><tr><td><strong>POISystemData</strong></td><td style="text-align:center"></td><td>Object</td><td>Only present when <code>Result</code> is &quot;Success&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#datetime">DateTime</a></td><td style="text-align:center">✔</td><td>String</td><td>Time on the POI System, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a> DateTime. e.g. &quot;2019-09-02T09:13:51.0+01:00&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#tokenrequeststatus">TokenRequestStatus</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>True if POI tokenisation of PANs is available and usable</td></tr><tr><td> <strong>POITerminalData</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object representing the POI Terminal</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#terminalenvironment">TerminalEnvironment</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#poicapabilities">POICapabilities</a></td><td style="text-align:center">✔</td><td>Array</td><td>An array of strings which reflect the hardware capabilities of the POI Terminal. &quot;MagStripe&quot;, &quot;ICC&quot;, and &quot;EMVContactless&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#genericprofile">GenericProfile</a></td><td style="text-align:center">✔</td><td>String</td><td>Set to &quot;Custom&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#poiserialnumber">POISerialNumber</a></td><td style="text-align:center">✔</td><td>String</td><td>If POIID is &quot;POI Server&quot;, then a virtual POI Terminal Serial Number. Otherwise the serial number of the POI Terminal</td></tr><tr><td> <strong>POIStatus</strong></td><td style="text-align:center">✔</td><td>String</td><td>Object representing the current status of the POI Terminal</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#globalstatus">GlobalStatus</a></td><td style="text-align:center">✔</td><td>String</td><td>The current status of the POI Terminal. &quot;OK&quot; when the terminal is available. &quot;Maintenance&quot; if unavailable due to maintenance processing. &quot;Unreachable&quot; if unreachable or not responding</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#securityokflag">SecurityOKFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>True if the security module is present</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#pedokflag">PEDOKFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>True if PED is available and usable for PIN entry</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#cardreaderokflag">CardReaderOKFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>True if card reader is available and usable</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#printerstatus">PrinterStatus</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates terminal printer status. Possible values are &quot;OK&quot;, &quot;PaperLow&quot;, &quot;NoPaper&quot;, &quot;PaperJam&quot;, &quot;OutOfOrder&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#communicationokflag">CommunicationOKFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>True if terminal&#x27;s communication is available and usable</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#fraudpreventionflag">FraudPreventionFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>True if the POI detects possible fraud</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="logout">Logout<a class="hash-link" aria-label="Direct link to Logout" title="Direct link to Logout" href="/fusion/docs/api-reference/fusion-cloud#logout">​</a></h3>
<p>Logging out is optional.</p>
<p>If sent, it tells the POI system that it won’t send new transactions to the POI Terminal
and unpairs the Sale Terminal from the POI Terminal. Any further transactions to that POI Terminal
will be rejected by the POI System until the next Login.</p>
<p>The Sale System may send multiple Login requests without a Logout request.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="logout-request">Logout request<a class="hash-link" aria-label="Direct link to Logout request" title="Direct link to Logout request" href="/fusion/docs/api-reference/fusion-cloud#logout-request">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Logout request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Logout&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;LogoutRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MaintenanceAllowed&quot;:&quot;true or false&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Logout&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the Sale System</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the POI Terminal</td></tr></tbody></table>
<p><strong>LogoutRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th>Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#maintenanceallowed">MaintenanceAllowed</a></td><td></td><td>Boolean</td><td>Indicates if the POI Terminal can enter maintenance mode. Default to true if not present.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="logout-response">Logout response<a class="hash-link" aria-label="Direct link to Logout response" title="Direct link to Logout response" href="/fusion/docs/api-reference/fusion-cloud#logout-response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Logout response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Logout&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;LogoutResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Response&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ErrorCondition&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;AdditionalResponse&quot;:&quot;xxx xxxx xxxx xxxx xxxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Logout&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the Sale System</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the POI Terminal</td></tr></tbody></table>
<p><strong>LogoutResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><strong>Response</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object which represents the result of the response</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the result of the response. Possible values are &quot;Success&quot; and &quot;Failure&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when result is &quot;Failure&quot;. Possible values are &quot;MessageFormat&quot;, &quot;Busy&quot;, &quot;DeviceOut&quot;, &quot;UnavailableService&quot; and others. Note the Sale System should handle error conditions outside the ones documented in this specification.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when result is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information of possible values.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="payment">Payment<a class="hash-link" aria-label="Direct link to Payment" title="Direct link to Payment" href="/fusion/docs/api-reference/fusion-cloud#payment">​</a></h3>
<p>The payment message is used to perform purchase, purchase + cash out, cash out only, and refund requests.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="payment-request">Payment request<a class="hash-link" aria-label="Direct link to Payment request" title="Direct link to Payment request" href="/fusion/docs/api-reference/fusion-cloud#payment-request">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Payment request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;PaymentRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;OperatorID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;OperatorLanguage&quot;:&quot;en&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ShiftNumber&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleTransactionID&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TransactionID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TimeStamp&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleReferenceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleTerminalData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TerminalEnvironment&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;SaleCapabilities&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TotalsGroupID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;TokenRequestedType&quot;:&quot;Customer | Transaction&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;PaymentTransaction&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;AmountsReq&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Currency&quot;:&quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;RequestedAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;CashBackAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TipAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;PaidAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;MaximumCashBackAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;MinimumSplitAmount&quot;:&quot;x.xx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;OriginalPOITransaction&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;POIID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;POITransactionID&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;TransactionID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;TimeStamp&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ReuseCardDataFlag&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ApprovalCode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;LastTransactionFlag&quot;:true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;TransactionConditions&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AllowedPaymentBrand&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AcquirerID&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;DebitPreferredFlag&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ForceOnlineFlag&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;MerchantCategoryCode&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleItem&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ItemID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ProductCode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;EanUpc&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;UnitOfMeasure&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;Quantity&quot;:&quot;xx.x&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;UnitPrice&quot;:&quot;xx.x&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ItemAmount&quot;:&quot;xx.x&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;TaxCode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;SaleChannel&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ProductLabel&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;AdditionalProductInfo&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;CostBase&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;Discount&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;Categories&quot;:[&quot;xxx&quot;,&quot;xxx&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;Brand&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;QuantityInStock&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;Tags&quot;:[&quot;xxx&quot;,&quot;xxx&quot;,&quot;xxx&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;PageURL&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ImageURLs&quot;:[&quot;xxx&quot;,&quot;xxx&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;Size&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;Colour&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;Weight&quot;:xx.xx,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;WeightUnitOfMeasure&quot;:&quot;xxx&quot;				  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;PaymentData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;PaymentType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;PaymentInstrumentData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;PaymentInstrumentType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;CardData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;EntryMode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ProtectedCardData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;ContentType&quot;:&quot;id-envelopedData&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;EnvelopedData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;Version&quot;:&quot;v0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;Recipient&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           &quot;KEK&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;Version&quot;:&quot;v4&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;KEKIdentifier&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 &quot;KeyIdentifier&quot;:&quot;xxxDATKey&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 &quot;KeyVersion&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;KeyEncryptionAlgorithm&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 &quot;Algorithm&quot;:&quot;des-ede3-cbc&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;EncryptedKey&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;EncryptedContent&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           &quot;ContentType&quot;:&quot;id-data&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           &quot;ContentEncryptionAlgorithm&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;Algorithm&quot;:&quot;des-ede3-cbc&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;Parameter&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 &quot;InitialisationVector&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           &quot;EncryptedData&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;SensitiveCardData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;PAN&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;ExpiryDate&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;CCV&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;PaymentToken&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;TokenRequestedType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;TokenValue&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;CustomFields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Key&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Type&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Value&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Payment&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the Sale System</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the POI Terminal</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="paymentrequest"><strong>PaymentRequest</strong><a class="hash-link" aria-label="Direct link to paymentrequest" title="Direct link to paymentrequest" href="/fusion/docs/api-reference/fusion-cloud#paymentrequest">​</a></h5>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><strong>SaleData</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Sale System information attached to this payment</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#operatorid">OperatorID</a></td><td style="text-align:center"></td><td>String</td><td>Only required if different from Login Request</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#operatorlanguage">OperatorLanguage</a></td><td style="text-align:center"></td><td>String</td><td>Set to &quot;en&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#shiftnumber">ShiftNumber</a></td><td style="text-align:center"></td><td>String</td><td>Only required if different from Login Request</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#salereferenceid">SaleReferenceID</a></td><td style="text-align:center"></td><td>String</td><td>Mandatory for pre-authorisation and completion, otherwise optional. See <a href="/fusion/docs/api-reference/data-model#salereferenceid">SaleReferenceID</a></td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#tokenrequestedtype">TokenRequestedType</a></td><td style="text-align:center"></td><td>String</td><td>If present, indicates which type of token should be created for this payment. See <a href="/fusion/docs/api-reference/data-model#tokenrequestedtype">TokenRequestedType</a></td></tr><tr><td> <strong>SaleTransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>Unique reference for this sale ticket. Not necessarily unique per payment request; for example a sale with split payments will have a number of payments with the same <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Time of initiating the payment request on the POI System, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a> DateTime. e.g. &quot;2019-09-02T09:13:51.0+01:00&quot;</td></tr><tr><td> <strong>SaleTerminalData</strong></td><td style="text-align:center"></td><td>Object</td><td>Define Sale System configuration. Only include if elements within have different values to those in Login Request</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#terminalenvironment">TerminalEnvironment</a></td><td style="text-align:center"></td><td>String</td><td>&quot;Attended&quot;, &quot;SemiAttended&quot;, or &quot;Unattended&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#salecapabilities">SaleCapabilities</a></td><td style="text-align:center"></td><td>Array</td><td>Advises the POI System of the Sale System capabilities. See <a href="/fusion/docs/api-reference/data-model#salecapabilities">SaleCapabilities</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#totalsgroupid">TotalsGroupId</a></td><td style="text-align:center"></td><td>String</td><td>Groups transactions in a login session</td></tr><tr><td><strong>PaymentTransaction</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td> <strong>AmountsReq</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object which contains the various components which make up the payment amount</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#currency">Currency</a></td><td style="text-align:center">✔</td><td>String</td><td>Three character currency code. Set to &quot;AUD&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#requestedamount">RequestedAmount</a></td><td style="text-align:center">✔</td><td>Decimal</td><td>The requested amount for the transaction sale items, including cash back and tip requested</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#cashbackamount">CashBackAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>The Cash back amount. Only if cash back is included in the transaction by the Sale System</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#tipamount">TipAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>The Tip amount. Only if tip is included in the transaction.  Setting TipAmount to 0 will display the Tip Entry screen in the POI Terminal.  Do not set TipAmount to 0 if you don&#x27;t want the Tip Entry screen to be displayed in the POI terminal.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#paidamount">PaidAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>Sum of the amount of sale items – <code>RequestedAmount</code>. Present only if an amount has already been paid in the case of a split payment.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#maximumcashbackamount">MaximumCashBackAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>Available if <code>CashBackAmount</code> is not present. If present, the POI Terminal prompts for the cash back amount up to a maximum of <code>MaximumCashBackAmount</code></td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#minimumsplitamount">MinimumSplitAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>Present only if the POI Terminal can process an amount less than the <code>RequestedAmount</code> as a split amount. Limits the minimum split amount allowed.</td></tr><tr><td> <strong><a href="/fusion/docs/api-reference/data-model#originalpoitransaction">OriginalPOITransaction</a></strong></td><td style="text-align:center"></td><td>Object</td><td>Identifies a previous POI transaction. Mandatory for Refund and Completion. See <a href="/fusion/docs/api-reference/data-model#originalpoitransaction">OriginalPOITransaction</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a> which performed the original transaction</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a> which performed the original transaction</td></tr><tr><td>  <strong>POITransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td><code>TransactionID</code> from the original transaction</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td><code>TimeStamp</code> from the original transaction</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#reusecarddataflag">ReuseCardDataFlag</a></td><td style="text-align:center"></td><td>Boolean</td><td>If &#x27;true&#x27; the POI Terminal will retrieve the card data from file based on the <code>PaymentToken</code> included in the request. Otherwise the POI Terminal will read the same card again.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#approvalcode">ApprovalCode</a></td><td style="text-align:center"></td><td>String</td><td>Present if a referral code is obtained from an Acquirer</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#lasttransactionflag">LastTransactionFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>Set to true to process the Last Transaction with a referral code</td></tr><tr><td> <strong>TransactionConditions</strong></td><td style="text-align:center"></td><td>Object</td><td>Optional transaction configuration. Present only if any of the JSON elements within are present.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#allowedpaymentbrand">AllowedPaymentBrand</a></td><td style="text-align:center"></td><td>Array</td><td>Restricts the request to specified card brands. See <a href="/fusion/docs/api-reference/data-model#allowedpaymentbrand">AllowedPaymentBrand</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#paymenttransaction.transactionconditions.acquirerid">AcquirerID</a></td><td style="text-align:center"></td><td>Array</td><td>Used to restrict the payment to specified acquirers. See <a href="/fusion/docs/api-reference/data-model#paymenttransaction.transactionconditions.acquirerid">AcquirerID</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#debitpreferredflag">DebitPreferredFlag</a></td><td style="text-align:center"></td><td>Boolean</td><td>If present, debit processing is preferred to credit processing.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#forceonlineflag">ForceOnlineFlag</a></td><td style="text-align:center"></td><td>Boolean</td><td>If &#x27;true&#x27; the transaction will only be processed in online mode, and will fail if there is no response from the Acquirer.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#merchantcategorycode">MerchantCategoryCode</a></td><td style="text-align:center"></td><td>String</td><td>If present, overrides the MCC used for processing the transaction if allowed. Refer to ISO 18245 for available codes.</td></tr><tr><td> <strong><a href="/fusion/docs/api-reference/data-model#saleitem">SaleItem</a></strong></td><td style="text-align:center">✔</td><td>Array</td><td>Array of <a href="/fusion/docs/api-reference/data-model#s">SaleItem</a> objects which represent the product basket attached to this transaction. See <a href="/fusion/docs/api-reference/data-model#saleitem">SaleItem</a> for examples.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#itemid">ItemID</a></td><td style="text-align:center">✔</td><td>Integer</td><td>A unique identifier for the sale item within the context of this payment. e.g. a 0..n integer which increments by one for each sale item.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#productcode">ProductCode</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique identifier for the product within the merchant, such as the SKU. For example if two customers purchase the same product at two different stores owned by the merchant, both purchases should contain the same <code>ProductCode</code>.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#eanupc">EanUpc</a></td><td style="text-align:center"></td><td>String</td><td>A standard unique identifier for the product. Either the UPC, EAN, or ISBN. Required for products with a UPC, EAN, or ISBN</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#unitofmeasure">UnitOfMeasure</a></td><td style="text-align:center">✔</td><td>String</td><td>Unit of measure of the <code>Quantity</code>. If this item has no unit of measure, set to &quot;Other&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#quantity">Quantity</a></td><td style="text-align:center">✔</td><td>Decimal</td><td>Sale item quantity based on <code>UnitOfMeasure</code>.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#unitprice">UnitPrice</a></td><td style="text-align:center">✔</td><td>Decimal</td><td>Price per sale item unit. Present if <code>Quantity</code> is included.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#itemamount">ItemAmount</a></td><td style="text-align:center">✔</td><td>Decimal</td><td>Total amount of the sale item</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#taxcode">TaxCode</a></td><td style="text-align:center"></td><td>String</td><td>Type of tax associated with the sale item. Default = &quot;GST&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#salechannel">SaleChannel</a></td><td style="text-align:center"></td><td>String</td><td>Commercial or distribution channel of the sale item. Default = &quot;Unknown&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#productlabel">ProductLabel</a></td><td style="text-align:center">✔</td><td>String</td><td>a short, human readable, descriptive name of the product.  For example, <code>ProductLabel</code> could contain the product name typically printed on the customer receipt.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#additionalproductinfo">AdditionalProductInfo</a></td><td style="text-align:center"></td><td>String</td><td>Additional information, or more detailed description of the product item.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#parentitemid">ParentItemID</a></td><td style="text-align:center"></td><td>Integer</td><td><em>Required</em> if this item is a &#x27;modifier&#x27; or sub-item. Contains the <a href="/fusion/docs/api-reference/data-model#itemid">ItemID</a> of the parent <code>SaleItem</code></td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#costbase">CostBase</a></td><td style="text-align:center"></td><td>Decimal</td><td>Cost of the product to the merchant per unit</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#discount">Discount</a></td><td style="text-align:center"></td><td>Decimal</td><td>If applied, the amount this sale item was discounted by</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#categories">Categories</a></td><td style="text-align:center"></td><td>Array</td><td>Array of categories. Top level &quot;main&quot; category at categories[0]. See <a href="/fusion/docs/api-reference/data-model#categories">Categories</a> for more information.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#brand">Brand</a></td><td style="text-align:center"></td><td>String</td><td>Brand name - typically visible on the product packaging or label</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#quantityinstock">QuantityInStock</a></td><td style="text-align:center"></td><td>Decimal</td><td>Remaining number of this item in stock in same unit of measure as <code>Quantity</code></td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#sale-item-tags">Tags</a></td><td style="text-align:center"></td><td>Array</td><td>String array with descriptive tags for the product</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#restricted">Restricted</a></td><td style="text-align:center"></td><td>Boolean</td><td><code>true</code> if this is a restricted item, <code>false</code> otherwise. Defaults to <code>false</code> when field is null.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#productpageurl">PageURL</a></td><td style="text-align:center"></td><td>String</td><td>URL link to the sale items product page</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#productimageurls">ImageURLs</a></td><td style="text-align:center"></td><td>Array</td><td>String array of images URLs for this sale item</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#style">Style</a></td><td style="text-align:center"></td><td>String</td><td>Style of the sale item</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#size">Size</a></td><td style="text-align:center"></td><td>String</td><td>Size of the sale item</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#colour">Colour</a></td><td style="text-align:center"></td><td>String</td><td>Colour of the sale item</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#weight">Weight</a></td><td style="text-align:center"></td><td>Decimal</td><td>Sale item weight, based on <code>WeightUnitOfMeasure</code></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#unitofmeasure">WeightUnitOfMeasure</a></td><td style="text-align:center"></td><td>String</td><td>Unit of measure of the <code>Weight</code>.</td></tr><tr><td> <strong>PaymentData</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object representing the payment method. Present only if any of the JSON elements within are present.  </td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#paymenttype">PaymentType</a></td><td style="text-align:center">✔</td><td>String</td><td>Defaults to &quot;Normal&quot;. Indicates the type of payment to process. &quot;Normal&quot;, &quot;Refund&quot;, or &quot;CashAdvance&quot;. See <a href="/fusion/docs/api-reference/data-model#paymenttype">PaymentType</a>  </td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#paymentinstrumentdata">PaymentInstrumentData</a></td><td style="text-align:center"></td><td>Object</td><td>Object with represents card details for token or manually enter card details. See  for object structure.  </td></tr><tr><td> <strong><a href="/fusion/docs/api-reference/data-model#customfields">CustomFields</a></strong></td><td style="text-align:center"></td><td>Array</td><td>Array of key/type/value objects containing additional payment information</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="payment-response">Payment response<a class="hash-link" aria-label="Direct link to Payment response" title="Direct link to Payment response" href="/fusion/docs/api-reference/fusion-cloud#payment-response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Payment response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;PaymentResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Result&quot;:&quot;Success| Partial | Failure&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ErrorCondition&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;AdditionalResponse&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleTransactionID&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TransactionID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TimeStamp&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleReferenceID&quot;:&quot;xxxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;POITransactionID&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TransactionID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TimeStamp&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;POIReconciliationID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;PaymentResult&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;PaymentType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;PaymentInstrumentData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;PaymentInstrumentType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;CardData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;EntryMode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;PaymentBrand&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;PaymentBrandID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;PaymentBrandLabel&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				  &quot;Account&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;MaskedPAN&quot;:&quot;xxxxxx…xxxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;PaymentToken&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;TokenRequestedType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;TokenValue&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;ExpiryDateTime&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;AmountsResp&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Currency&quot;:&quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AuthorizedAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TotalFeesAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;CashBackAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TipAmount&quot;:&quot;x.xx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			   &quot;SurchargeAmount&quot;:&quot;x.xx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;OnlineFlag&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;PaymentAcquirerData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AcquirerID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;MerchantID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AcquirerPOIID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AcquirerTransactionID&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;TransactionID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;TimeStamp&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ApprovalCode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ResponseCode&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;HostReconciliationID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;AllowedProductCodes&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;PaymentReceipt&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;DocumentQualifier&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;RequiredSignatureFlag&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;OutputContent&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;OutputFormat&quot;:&quot;XHTML&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;OutputXHTML&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Payment&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr></tbody></table>
<p><strong>PaymentResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><strong>Response</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object indicating the result of the payment</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the result of the response. Possible values are &quot;Success&quot; and &quot;Failure&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr><tr><td><strong>SaleData</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td> <strong>SaleTransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#salereferenceid">SaleReferenceID</a></td><td style="text-align:center"></td><td>String</td><td>Mirrored from the request</td></tr><tr><td><strong>POIData</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td> <strong>POITransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique transaction id from the POI system</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Time on the POI system, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a></td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#poireconciliationid">POIReconciliationID</a></td><td style="text-align:center"></td><td>String</td><td>Present if <code>Result</code> is &quot;Success&quot; or &quot;Partial&quot;. See <a href="/fusion/docs/api-reference/data-model#poireconciliationid">POIReconciliationID</a></td></tr><tr><td><strong>PaymentResult</strong></td><td style="text-align:center"></td><td>Object</td><td>Object related to a processed payment</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#paymenttype">PaymentType</a></td><td style="text-align:center"></td><td>String</td><td>Mirrored from the request</td></tr><tr><td> <strong>PaymentInstrumentData</strong></td><td style="text-align:center"></td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#paymentinstrumenttype">PaymentInstrumentType</a></td><td style="text-align:center"></td><td>String</td><td>&quot;Card&quot; or &quot;Mobile&quot;</td></tr><tr><td>  <strong>CardData</strong></td><td style="text-align:center"></td><td>Object</td><td></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#entrymode">EntryMode</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates how the card was presented. See <a href="/fusion/docs/api-reference/data-model#entrymode">EntryMode</a></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#paymentbrand">PaymentBrand</a></td><td style="text-align:center">✔</td><td><a href="/fusion/docs/api-reference/fusion-cloud#data-format">String(1,128)</a></td><td>Deprecated. Use <a href="/fusion/docs/api-reference/data-model#paymentbrandid">PaymentBrandId</a></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#paymentbrandid">PaymentBrandId</a></td><td style="text-align:center">✔</td><td><a href="/fusion/docs/api-reference/fusion-cloud#data-format">String(4,4)</a></td><td>Indicates the payment type used.</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#paymentbrandlabel">PaymentBrandLabel</a></td><td style="text-align:center">✔</td><td><a href="/fusion/docs/api-reference/fusion-cloud#data-format">String(0,256)</a></td><td>Descriptive label of the payment type used.</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#maskedpan">MaskedPAN</a></td><td style="text-align:center">✔</td><td>String</td><td>PAN masked with dots, first 6 and last 4 digits visible</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#account">Account</a></td><td style="text-align:center"></td><td>String</td><td>Present if <code>EntryMode</code> is &quot;MagStripe&quot;, &quot;ICC&quot;, or &quot;Tapped&quot;. Indicates the card account used. See <a href="/fusion/docs/api-reference/data-model#account">Account</a></td></tr><tr><td>   <strong>PaymentToken</strong></td><td style="text-align:center"></td><td>Object</td><td>Object representing a token. Only present if token was requested</td></tr><tr><td>    <a href="/fusion/docs/api-reference/data-model#tokenrequestedtype">TokenRequestedType</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td>    <a href="/fusion/docs/api-reference/fusion-cloud#tokenvalue">TokenValue</a></td><td style="text-align:center">✔</td><td>String</td><td>The value of the token</td></tr><tr><td>    <a href="/fusion/docs/api-reference/fusion-cloud#expirydatetime">ExpiryDateTime</a></td><td style="text-align:center">✔</td><td>String</td><td>Expiry of the token, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a></td></tr><tr><td> <strong>AmountsResp</strong></td><td style="text-align:center"></td><td>Object</td><td>Present if <code>Result</code> is &quot;Success&quot; or &quot;Partial&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#currency">Currency</a></td><td style="text-align:center"></td><td>String</td><td>&quot;AUD&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#authorizedamount">AuthorizedAmount</a></td><td style="text-align:center">✔</td><td>Decimal</td><td>Authorised amount which could be more, or less than the requested amount</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#totalfeesamount">TotalFeesAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>Total of financial fees associated with the payment transaction if known at time of transaction</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#cashbackamount">CashBackAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>Cash back paid amount</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#tipamount">TipAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>The amount of any tip added to the transaction</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#surchargeamount">SurchargeAmount</a></td><td style="text-align:center"></td><td>Decimal</td><td>The amount of any surcharge added to the transaction</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#onlineflag">OnlineFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>True if the transaction was processed online, false otherwise</td></tr><tr><td> <strong>PaymentAcquirerData</strong></td><td style="text-align:center"></td><td>Object</td><td>Data related to the response from the payment acquirer</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#paymentacquirerdata.acquirerid">AcquirerID</a></td><td style="text-align:center">✔</td><td>String</td><td>The ID of the acquirer which processed the transaction</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#merchantid">MerchantID</a></td><td style="text-align:center">✔</td><td>String</td><td>The acquirer merchant ID (MID)</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#acquirerPOIID">AcquirerPOIID</a></td><td style="text-align:center">✔</td><td>String</td><td>The acquirer terminal ID (TID)</td></tr><tr><td>  <strong>AcquirerTransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>The acquirer transaction ID</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Timestamp from the acquirer, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#approvalcode">ApprovalCode</a></td><td style="text-align:center">✔</td><td>String</td><td>The Acquirer Approval Code. Also referred to as the Authentication Code</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#responsecode">ResponseCode</a></td><td style="text-align:center">✔</td><td>String</td><td>The Acquirer Response Code. Also referred as the PINPad response code</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#stan">STAN</a></td><td style="text-align:center"></td><td>String</td><td>The Acquirer STAN if available</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#rrn">RRN</a></td><td style="text-align:center"></td><td>String</td><td>The Acquirer RRN if available</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#hostreconciliationid">HostReconciliationID</a></td><td style="text-align:center">✔</td><td>String</td><td>Identifier of a reconciliation period with the acquirer. This normally has a date and time component in it</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#allowedproductcodes">AllowedProductCodes</a></td><td style="text-align:center"></td><td>Array</td><td>Present if <code>ErrorCondition</code> is &quot;PaymentRestriction&quot;. Consists of a list of product codes corresponding to products that are purchasable with the given card. Items that exist in the basket but do not belong to this list corresponds to restricted items</td></tr><tr><td> <strong>PaymentReceipt</strong></td><td style="text-align:center"></td><td>Array</td><td>Array of payment receipt objects which represent receipts to be printed</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#documentqualifier">DocumentQualifier</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;CashierReceipt&quot; for a merchant receipt, otherwise &quot;SaleReceipt&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#requiredsignatureflag">RequiredSignatureFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>If true, the card holder signature is required on the merchant CashierReceipt.</td></tr><tr><td>  <strong>OutputContent</strong></td><td style="text-align:center"></td><td>Object</td><td>Payment receipt object which represents the receipt that needs to be printed</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#outputformat">OutputFormat</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;XHTML&quot;</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#outputxhtml">OutputXHTML</a></td><td style="text-align:center">✔</td><td>String</td><td>The payment receipt in XHTML format but coded in BASE64</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="display">Display<a class="hash-link" aria-label="Direct link to Display" title="Direct link to Display" href="/fusion/docs/api-reference/fusion-cloud#display">​</a></h3>
<p>During a payment, the POI System will send status and error display requests to the Sale System, which enables the Sale System to inform the cashier of the current transaction status.</p>
<p>Follow the <a href="/fusion/docs/api-reference/fusion-cloud#user-interface">user interface</a> guide for details on how to implement the required UI to handle display and input requests.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="display-request">Display request<a class="hash-link" aria-label="Direct link to Display request" title="Direct link to Display request" href="/fusion/docs/api-reference/fusion-cloud#display-request">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Display request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Device&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Display&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;DeviceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;DisplayRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;DisplayOutput&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ResponseRequiredFlag&quot;:false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Device&quot;:&quot;CashierDisplay&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;InfoQualify&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;OutputContent&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;OutputFormat&quot;:&quot;Text&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;OutputText&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;Text&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Device&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Display&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment</td></tr></tbody></table>
<p><strong>DisplayRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><strong>DisplayOutput</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object which represents the display</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#responserequiredflag">ResponseRequiredFlag</a></td><td style="text-align:center"></td><td>Boolean</td><td>Indicates if the POI System requires a <code>DisplayResponse</code> to be sent for this <code>DisplayRequest</code></td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#device">Device</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;CashierDisplay&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#infoqualify">InfoQualify</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Status&quot; or &quot;Error&quot;. See <a href="/fusion/docs/api-reference/data-model#infoqualify">InfoQualify</a></td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#outputformat">OutputFormat</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Text&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#text">Text</a></td><td style="text-align:center">✔</td><td>String</td><td>Single line of text to display</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="display-response">Display response<a class="hash-link" aria-label="Direct link to Display response" title="Direct link to Display response" href="/fusion/docs/api-reference/fusion-cloud#display-response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Display response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Device&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Display&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;DeviceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;DisplayResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;OutputResult&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Device&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;InfoQualify&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;Result&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;ErrorCondition&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;AdditionalResponse&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p>The Sale System is expected to send a <code>DisplayResponse</code> if one or more displays in <code>DisplayOutput</code> have <a href="/fusion/docs/api-reference/data-model#responserequiredflag">ResponseRequiredFlag</a> set to true.</p>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Device&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Display&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from display request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from display request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from display request</td></tr></tbody></table>
<p><strong>DisplayResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><em>OutputResult</em></td><td style="text-align:center">✔</td><td>Object</td><td>Response for Device/InfoQualify pair where corresponding <code>ResponseRequiredFlag</code> in the <code>DisplayRequest</code> is set to true.</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#device">Device</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from display request</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#infoqualify">InfoQualify</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from display request</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Success&quot;, &quot;Partial&quot;, or &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#result">Result</a>.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="input">Input<a class="hash-link" aria-label="Direct link to Input" title="Direct link to Input" href="/fusion/docs/api-reference/fusion-cloud#input">​</a></h3>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>The <code>Input UI</code> elements are not currently available, and will be supported by a future Unify release. Support for these elements by the Sale System is optional.</p></div></div>
<p>During a payment, the POI System will input requests to the Sale System if cashier interaction is required (e.g. signature approved yes/no)</p>
<p>Follow the <a href="/fusion/docs/api-reference/fusion-cloud#user-interface">user interface</a> guide for details on how to implement the required UI to handle display and input requests.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="input-request">Input request<a class="hash-link" aria-label="Direct link to Input request" title="Direct link to Input request" href="/fusion/docs/api-reference/fusion-cloud#input-request">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Input request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Device&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Input&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;DeviceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;InputRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;DisplayOutput&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Device&quot;:&quot;CashierDisplay&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;InfoQualify&quot;:&quot;POIReplication&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;OutputContent&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;OutputFormat&quot;:&quot;Text&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;OutputText&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;Text&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MenuEntry&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;OutputFormat&quot;:&quot;Text&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;OutputText&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     &quot;Text&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;InputData&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Device&quot;:&quot;CashierInput&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;InfoQualify&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;InputCommand&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MaxInputTime&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MinLength&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MaxLength&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MaskCharactersFlag&quot;:&quot;true or false&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Device&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Input&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment request</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#deviceid">DeviceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Unique message identifier</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment request</td></tr></tbody></table>
<p><strong>InputRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><strong>DisplayOutput</strong></td><td style="text-align:center"></td><td>Object</td><td>Information to display and the way to process the display.</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#device">Device</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;CashierDisplay&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#infoqualify">InfoQualify</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;POIReplication&quot;. See <a href="/fusion/docs/api-reference/data-model#infoqualify">InfoQualify</a></td></tr><tr><td> <strong>OutputContent</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#outputformat">OutputFormat</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Text&quot;</td></tr><tr><td>  <strong>OutputText</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Wrapper for text content</td></tr><tr><td>   <a href="/fusion/docs/api-reference/fusion-cloud#text">Text</a></td><td style="text-align:center">✔</td><td>String</td><td>Single line of text. e.g. &quot;Signature Ok?&quot;, &quot;Merchant Password&quot;, &quot;Select Account Type&quot;</td></tr><tr><td> <strong>MenuEntry</strong></td><td style="text-align:center"></td><td>Array</td><td>Conditional. Array of items to be presented as a menu. Only present if <a href="/fusion/docs/api-reference/data-model#inputcommand">InputCommand</a> = &quot;GetMenuEntry&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#outputformat">OutputFormat</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Text&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#text">Text</a></td><td style="text-align:center">✔</td><td>String</td><td>One of the selection String items for the cashier to select from. For example: &quot;Savings&quot;, &quot;Cheque&quot; and &quot;Credit&quot; for an account type selection.</td></tr><tr><td><strong>InputData</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Information related to an <code>Input</code> request</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#device">Device</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;CashierInput&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#infoqualify">InfoQualify</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Input&quot; or &quot;CustomerAssistance&quot;. See <a href="/fusion/docs/api-reference/data-model#infoqualify">InfoQualify</a></td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#inputcommand">InputCommand</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;GetConfirmation&quot;, &quot;Password&quot;, &quot;TextString&quot;, &quot;DigitString&quot;, &quot;DecimalString&quot;, or &quot;GetMenuEntry&quot;. See <a href="/fusion/docs/api-reference/data-model#inputcommand">InputCommand</a></td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#maxinputtime">MaxInputTime</a></td><td style="text-align:center"></td><td>Number</td><td>The maximum number of seconds allowed for providing input.  Note the Sale Terminal needs to abort the Input process if it receives a DisplayRequest or InputRequest whilst waiting on input from the Cashier.</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#minlength">MinLength</a></td><td style="text-align:center"></td><td>Number</td><td>The minimum number of characters allowed for entry. Present if <a href="/fusion/docs/api-reference/data-model#inputcommand">InputCommand</a> = &quot;Password&quot;, &quot;TextString&quot;, &quot;DigitString&quot;, or &quot;DecimalString&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#maxlength">MaxLength</a></td><td style="text-align:center"></td><td>Number</td><td>The maximum number of characters allowed for entry. Present if <a href="/fusion/docs/api-reference/data-model#inputcommand">InputCommand</a> = &quot;Password&quot;, &quot;TextString&quot;, &quot;DigitString&quot;, or &quot;DecimalString&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#maskcharactersflag">MaskCharactersFlag</a></td><td style="text-align:center"></td><td>Boolean</td><td>If true, input should be masked with &#x27;*&#x27;. Present if <a href="/fusion/docs/api-reference/data-model#inputcommand">InputCommand</a> = &quot;Password&quot;</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="input-response">Input response<a class="hash-link" aria-label="Direct link to Input response" title="Direct link to Input response" href="/fusion/docs/api-reference/fusion-cloud#input-response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Input response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Device&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Input&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;DeviceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;InputResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;OutputResult&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Device&quot;:&quot;CashierDisplay&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;InfoQualify&quot;:&quot;POIReplication&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Result&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ErrorCondition&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AdditionalResponse&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;InputResult&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Device&quot;:&quot;CashierInput&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;InfoQualify&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Result&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ErrorCondition&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;AdditionalResponse&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Input&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;InputCommand&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ConfirmedFlag&quot;:&quot;true or false&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;Password&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;MenuEntryNumber&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Device&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Input&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#deviceid">DeviceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from input request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from input request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from input request</td></tr></tbody></table>
<p><strong>InputResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><em>OutputResult</em></td><td style="text-align:center"></td><td>Object</td><td>Present if <code>DisplayOutput</code> is present in the request</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#device">Device</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from input request</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#infoqualify">InfoQualify</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from input request</td></tr><tr><td> <em>Response</em></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Success&quot;, &quot;Partial&quot;, or &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#result">Result</a>.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr><tr><td><em>InputResult</em></td><td style="text-align:center">✔</td><td>Object</td><td>Information related to the result the input</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#device">Device</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from input request</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#infoqualify">InfoQualify</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from input request</td></tr><tr><td> <em>Response</em></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Success&quot;, &quot;Partial&quot;, or &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#result">Result</a>.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr><tr><td> <em>Input</em></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#inputcommand">InputCommand</a></td><td style="text-align:center"></td><td>String</td><td>Mirrored from input request</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#confirmedflag">ConfirmedFlag</a></td><td style="text-align:center"></td><td>Boolean</td><td>Result of GetConfirmation input request. Present if <a href="/fusion/docs/api-reference/data-model#inputcommand">InputCommand</a> = &quot;GetConfirmation&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#password">Password</a></td><td style="text-align:center"></td><td>String</td><td>Password entered by the Cashier. Mandatory, if <a href="/fusion/docs/api-reference/data-model#inputcommand">InputCommand</a> is &quot;Password&quot;. Not allowed, otherwise</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#menuentrynumber">MenuEntryNumber</a></td><td style="text-align:center"></td><td>Number</td><td>A number from 1 to n, when n is total number of objects in <code>MenuEntry</code> of <code>InputRequest</code>. Mandatory, if <a href="/fusion/docs/api-reference/data-model#inputcommand">InputCommand</a> is &quot;GetMenuEntry&quot;. Not allowed, otherwise</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#textinput">TextInput</a></td><td style="text-align:center"></td><td>String</td><td>Value entered by the Cashier. Mandatory, if <a href="/fusion/docs/api-reference/data-model#inputcommand">InputCommand</a> is &quot;TextString&quot; or &quot;DecimalString&quot;. Not allowed, otherwise</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#digitinput">DigitInput</a></td><td style="text-align:center"></td><td>String</td><td>Value entered by the Cashier. Mandatory, if <a href="/fusion/docs/api-reference/data-model#inputcommand">InputCommand</a> is &quot;DigitInput&quot;. Not allowed, otherwise</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="print">Print<a class="hash-link" aria-label="Direct link to Print" title="Direct link to Print" href="/fusion/docs/api-reference/fusion-cloud#print">​</a></h3>
<p>During a payment, the POI System may send print requests to the Sale System if a receipt is to be printed before the payment response can be finalised (e.g. when a signature is required).</p>
<p>In this case the Sale System should examine the properties in the print request and print the receipt accordingly.</p>
<p>The final payment receipt, which is to be included in the Sale receipt, is returned in the payment response.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="print-request">Print request<a class="hash-link" aria-label="Direct link to Print request" title="Direct link to Print request" href="/fusion/docs/api-reference/fusion-cloud#print-request">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Print request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Device&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Print&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;DeviceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;PrintRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;PrintOutput&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;DocumentQualifier&quot;:&quot;CashierReceipt&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;IntegratedPrintFlag&quot;:false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;RequiredSignatureFlag&quot;:true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;OutputContent&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;OutputFormat&quot;:&quot;XHTML&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;OutputXHTML&quot;:&quot;xxxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Device&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Print&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment request</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#deviceid">DeviceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Unique message identifier</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment request</td></tr></tbody></table>
<p><strong>PrintRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td> <strong>PrintOutput</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#documentqualifier">DocumentQualifier</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;CashierReceipt&quot; for a merchant receipt, otherwise &quot;SaleReceipt&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#integratedprintflag">IntegratedPrintFlag</a></td><td style="text-align:center"></td><td>Boolean</td><td>True if the receipt should be included with the Sale receipt, false if the receipt should be printed now and paper cut (e.g. for a signature receipt)</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#requiredsignatureflag">RequiredSignatureFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>If true, the card holder signature is required on the merchant CashierReceipt.</td></tr><tr><td>  <strong>OutputContent</strong></td><td style="text-align:center"></td><td>Object</td><td>Payment receipt object which represents the receipt that needs to be printed</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#outputformat">OutputFormat</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;XHTML&quot;</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#outputxhtml">OutputXHTML</a></td><td style="text-align:center">✔</td><td>String</td><td>The payment receipt in XHTML format but coded in BASE64</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="print-response">Print response<a class="hash-link" aria-label="Direct link to Print response" title="Direct link to Print response" href="/fusion/docs/api-reference/fusion-cloud#print-response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Print response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Device&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Print&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;DeviceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;PrintResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	     &quot;DocumentQualifier&quot;:&quot;CashierReceipt&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Result&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ErrorCondition&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;AdditionalResponse&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Device&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Print&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from print request</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#deviceid">DeviceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from print request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from print request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from print request</td></tr></tbody></table>
<p><strong>PrintResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#documentqualifier">DocumentQualifier</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from print request</td></tr><tr><td> <em>Response</em></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Success&quot;, &quot;Partial&quot;, or &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#result">Result</a>.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-status">Transaction status<a class="hash-link" aria-label="Direct link to Transaction status" title="Direct link to Transaction status" href="/fusion/docs/api-reference/fusion-cloud#transaction-status">​</a></h3>
<p>A transaction status request can be used to obtain the status of a previous transaction. Required for error handling.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-status-request">Transaction status request<a class="hash-link" aria-label="Direct link to Transaction status request" title="Direct link to Transaction status request" href="/fusion/docs/api-reference/fusion-cloud#transaction-status-request">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Transaction status request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;TransactionStatus&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;TransactionStatusRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageReference&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MessageCategory&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;TransactionStatus&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the Sale System</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the POI Terminal</td></tr></tbody></table>
<p><strong>TransactionStatusRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><em>MessageReference</em></td><td style="text-align:center"></td><td>Object</td><td>Identification of a previous POI transaction. Present if it contains any data.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center"></td><td>String</td><td>&quot;Payment&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center"></td><td>String</td><td>The <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a> of the transaction to retrieve the status of. If not included the last payment status is returned.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center"></td><td>String</td><td>The <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a> of the transaction to retrieve the status of. Only required if different from the <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a> provided in the <code>MessageHeader</code></td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center"></td><td>String</td><td>The <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a> of the transaction to retrieve the status of. Only required if different from the <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a> provided in the <code>MessageHeader</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-status-response">Transaction status response<a class="hash-link" aria-label="Direct link to Transaction status response" title="Direct link to Transaction status response" href="/fusion/docs/api-reference/fusion-cloud#transaction-status-response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Transaction status response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;TransactionStatus&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;TransactionStatusResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Result&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ErrorCondition&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;AdditionalResponse&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageReference&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MessageCategory&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;RepeatedMessageResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MessageHeader&quot;:{...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;RepeatedResponseMessageBody&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;PaymentResponse&quot;:{...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;ReversalResponse&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;TransactionStatus&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from request</td></tr></tbody></table>
<p><strong>TransactionStatusResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><em>Response</em></td><td style="text-align:center">✔</td><td>Object</td><td>Object indicating the result of the payment</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the result of the response. Possible values are &quot;Success&quot; and &quot;Failure&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr><tr><td><em>MessageReference</em></td><td style="text-align:center"></td><td>Object</td><td>Identification of a previous POI transaction. Present if <code>Result</code> is &quot;Success&quot;, or <code>Result</code> is &quot;Failure&quot; and <code>ErrorCondition</code> is &quot;InProgress&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from request</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from request, or <code>ServiceID</code> of last transaction if not present in request.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center"></td><td>String</td><td>Mirrored from request, but only if present in the request</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center"></td><td>String</td><td>Mirrored from request, but only if present in the request</td></tr><tr><td><em>RepeatedMessageResponse</em></td><td style="text-align:center"></td><td>Object</td><td>Present if <code>Result</code> is &quot;Success&quot;</td></tr><tr><td> <em>MessageHeader</em></td><td style="text-align:center">✔</td><td>Object</td><td><code>MessageHeader</code> of the requested payment</td></tr><tr><td> <em>PaymentResponse</em></td><td style="text-align:center">✔</td><td>Object</td><td><code>PaymentResponse</code> of the requested payment</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="abort-transaction">Abort transaction<a class="hash-link" aria-label="Direct link to Abort transaction" title="Direct link to Abort transaction" href="/fusion/docs/api-reference/fusion-cloud#abort-transaction">​</a></h3>
<p>The Sale System can send an <code>abort transaction</code> message to request cancellation of the in-progress transaction.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Cancel transaction is a &quot;request to cancel&quot;. Cancellation of the transaction is not guaranteed. There are a number of instances where cancellation is not possible (for example, when the payment has already completed).</p><p>After sending a cancel transaction request, the Sale System should <b>always</b> wait for the payment/card acquisition response and validate the success of the sale by checking the <code>Result</code> property.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="abort-transaction-request">Abort transaction request<a class="hash-link" aria-label="Direct link to Abort transaction request" title="Direct link to Abort transaction request" href="/fusion/docs/api-reference/fusion-cloud#abort-transaction-request">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Abort transaction request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Abort&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;AbortRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageReference&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MessageCategory&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ServiceID&quot;:&quot;xxxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;AbortReason&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Abort&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Unique identifier for the Sale System</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the POI Terminal</td></tr></tbody></table>
<p><strong>AbortRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><em>MessageReference</em></td><td style="text-align:center">✔</td><td>Object</td><td>Identification of a POI transaction</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Payment&quot; or &quot;CardAcquisition&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>The <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a> of the transaction to cancel</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center"></td><td>String</td><td>The <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a> of the transaction to cancel. Only required if different from the <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a> provided in the <code>MessageHeader</code></td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center"></td><td>String</td><td>The <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a> of the transaction to cancel. Only required if different from the <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a> provided in the <code>MessageHeader</code></td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#abortreason">AbortReason</a></td><td style="text-align:center">✔</td><td>String</td><td>Any text describing the reason for cancelling the transaction. For example, &quot;User Cancel&quot;</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="abort-transaction-response">Abort transaction response<a class="hash-link" aria-label="Direct link to Abort transaction response" title="Direct link to Abort transaction response" href="/fusion/docs/api-reference/fusion-cloud#abort-transaction-response">​</a></h4>
<p>Once an abort transaction request has been sent, please continue to wait for the payment response.</p>
<p>If the transaction is successfully aborted, a payment response is returned with <code>Result</code> = &quot;Failure&quot; and <code>ErrorCondition</code> = &quot;Aborted&quot;.</p>
<p>If the transaction cannot be aborted, a normal payment response (<code>Result</code> = &quot;Success&quot;) is sent back in time.</p>
<p>However, if the abort transaction request message contains an invalid data (e.g. message format error) or if the referenced transaction cannot be not found (e.g. due to an incorrect ServiceID value), an Event Notification will be returned.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Abort transaction response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;:&quot;Event&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;:&quot;Event&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;:&quot;Notification&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;DeviceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;EventNotification&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;TimeStamp&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;EventToNotify&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;EventDetails&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Event&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Event&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Notification&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#deviceid">DeviceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Unique message identifier</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment request</td></tr></tbody></table>
<p><strong>EventNotification</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td> <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Time of the event on the POI System, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a></td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#eventtonotify">EventToNotify</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Reject&quot; if the abort request cannot be accepted (e.g. message format error, <code>ServiceId</code> not found). &quot;CompletedMessage&quot; if payment has already completed.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#eventdetails">EventDetails</a></td><td style="text-align:center">✔</td><td>String</td><td>Extra detail on the reason for the event</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reconciliation">Reconciliation<a class="hash-link" aria-label="Direct link to Reconciliation" title="Direct link to Reconciliation" href="/fusion/docs/api-reference/fusion-cloud#reconciliation">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="reconciliation-request">Reconciliation request<a class="hash-link" aria-label="Direct link to Reconciliation request" title="Direct link to Reconciliation request" href="/fusion/docs/api-reference/fusion-cloud#reconciliation-request">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Reconciliation request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;SaleToPOIRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageCategory&quot;:&quot;Reconciliation&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageType&quot;:&quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ServiceID&quot;:&quot;xxxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ReconciliationRequest&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ReconciliationType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;POIReconciliationID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Reconciliation&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Unique identifier for the Sale System</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the POI Terminal</td></tr></tbody></table>
<p><strong>ReconciliationRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#reconciliationtype">ReconciliationType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;SaleReconciliation&quot; to close the current period, &quot;PreviousReconciliation&quot; to request the result of a previous reconciliation</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poireconciliationid">POIReconciliationID</a></td><td style="text-align:center"></td><td>String</td><td>Present if ReconciliationType is &quot;PreviousReconciliation&quot;. See <a href="/fusion/docs/api-reference/data-model#poireconciliationid">POIReconciliationID</a></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="reconciliation-response">Reconciliation response<a class="hash-link" aria-label="Direct link to Reconciliation response" title="Direct link to Reconciliation response" href="/fusion/docs/api-reference/fusion-cloud#reconciliation-response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Reconciliation response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;SaleToPOIResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;MessageHeader&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageClass&quot;:&quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageCategory&quot;:&quot;Reconciliation&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageType&quot;:&quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ServiceID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SaleID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;POIID&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ReconciliationResponse&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Response&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Result&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ErrorCondition&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;AdditionalResponse&quot;:&quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ReconciliationType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;POIReconciliationID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;TransactionTotals&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;PaymentInstrumentType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;CardBrand&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;OperatorID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;ShiftNumber&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;TotalsGroupID&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;PaymentCurrency&quot;:&quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;PaymentTotals&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;TransactionType&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;TransactionCount&quot;:&quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;TransactionAmount&quot;:&quot;0.00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			  &quot;TipAmount&quot;:&quot;0.00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			  &quot;SurchargeAmount&quot;:&quot;0.00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SecurityTrailer&quot;:{...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Reconciliation&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#deviceid">DeviceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Unique message identifier</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment request</td></tr></tbody></table>
<p><strong>ReconciliationResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><em>Response</em></td><td style="text-align:center">✔</td><td>Object</td><td>Object indicating the result of the login</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the result of the response. Possible values are &quot;Success&quot; and &quot;Failure&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#reconciliationtype">ReconciliationType</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poireconciliationid">POIReconciliationID</a></td><td style="text-align:center"></td><td>String</td><td>Present if <code>Result</code> is &quot;Success&quot;. The <code>ReconciliationID</code> of the period requested</td></tr><tr><td><em>TransactionTotals</em></td><td style="text-align:center"></td><td>Array</td><td>Present if <code>Result</code> is &quot;Success&quot;. An array of totals grouped by card brand, then operator, then shift, then TotalsGroupID, then payment currency.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#paymentinstrumenttype">PaymentInstrumentType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Card&quot; (card payment) or &quot;Mobile&quot; (phone/QR code payments)</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#cardbrand">CardBrand</a></td><td style="text-align:center"></td><td>String</td><td>A card brand used during this reconciliation period</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#operatorid">OperatorID</a></td><td style="text-align:center"></td><td>String</td><td>An operator id used during this reconciliation period</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#shiftnumber">ShiftNumber</a></td><td style="text-align:center"></td><td>String</td><td>A shift number used during the reconciliation period</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#totalsgroupid">TotalsGroupID</a></td><td style="text-align:center"></td><td>String</td><td>A custom grouping of transactions as defined by the Sale System</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#paymentcurrency">PaymentCurrency</a></td><td style="text-align:center"></td><td>String</td><td>&quot;AUD&quot;</td></tr><tr><td> <em>PaymentTotals</em></td><td style="text-align:center"></td><td>Array</td><td>An array [0..10] of totals grouped by transaction payment type. Present if both <code>TransactionCount</code> and <code>TransactionAmount</code> are not equal to zero</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#transactiontype">TransactionType</a></td><td style="text-align:center"></td><td>String</td><td>Transaction type for this payment. See <a href="/fusion/docs/api-reference/data-model#transactiontype">TransactionType</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#transactioncount">TransactionCount</a></td><td style="text-align:center"></td><td>String</td><td>The number of transactions for the transaction type for the current grouping of transactions</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#transactionamount">TransactionAmount</a></td><td style="text-align:center"></td><td>Number</td><td>The total amount of transactions for the transaction type for the current grouping of transactions</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="card-acquisition">Card acquisition<a class="hash-link" aria-label="Direct link to Card acquisition" title="Direct link to Card acquisition" href="/fusion/docs/api-reference/fusion-cloud#card-acquisition">​</a></h3>
<p>The card acquisition request allows the Sale System to tokenise a card which can be used in future payment requests.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="card-acquisition-request">Card acquisition request<a class="hash-link" aria-label="Direct link to Card acquisition request" title="Direct link to Card acquisition request" href="/fusion/docs/api-reference/fusion-cloud#card-acquisition-request">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Card acquisition request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;SaleToPOIRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageCategory&quot;: &quot;CardAcquisition&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageType&quot;: &quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ServiceID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SaleID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;POIID&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;CardAcquisitionRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SaleData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;OperatorID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;OperatorLanguage&quot;: &quot;en&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ShiftNumber&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;CustomerLanguage&quot;: &quot;en&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;SaleTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;TransactionID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;TimeStamp&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;SaleTerminalData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;TerminalEnvironment&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;SaleCapabilities&quot;: [&quot;xxx&quot;, &quot;xxx&quot;, &quot;xxx&quot;, …]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;TokenRequestedType&quot;: &quot;Customer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;CardAcquisitionTransaction&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;AllowedPaymentBrand&quot;: [&quot;xxx&quot;, &quot;xxx&quot;, &quot;xxx&quot;, …],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ForceEntryMode&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SecurityTrailer&quot;: { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;CardAcquisition&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Unique identifier for the Sale System</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Uniquely identifies the POI Terminal</td></tr></tbody></table>
<p><strong>CardAcquisitionRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><em>SaleData</em></td><td style="text-align:center">✔</td><td>Object</td><td>Object Sale System information attached to this payment</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#operatorid">OperatorID</a></td><td style="text-align:center"></td><td>String</td><td>Only required if different from Login Request</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#operatorlanguage">OperatorLanguage</a></td><td style="text-align:center"></td><td>String</td><td>Set to &quot;en&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#shiftnumber">ShiftNumber</a></td><td style="text-align:center"></td><td>String</td><td>Only required if different from Login Request</td></tr><tr><td> <a href="/fusion/docs/api-reference/fusion-cloud#customerlanguage">CustomerLanguage</a></td><td style="text-align:center"></td><td>String</td><td>Set to &quot;en&quot; for English</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#tokenrequestedtype">TokenRequestedType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Customer&quot;</td></tr><tr><td> <em>SaleTransactionID</em></td><td style="text-align:center"></td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>Unique reference for this sale ticket</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Time of initiating the request on the POI System, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a> DateTime. e.g. &quot;2019-09-02T09:13:51.0+01:00&quot;</td></tr><tr><td> <em>SaleTerminalData</em></td><td style="text-align:center"></td><td>Object</td><td>Define Sale System configuration. Only include if elements within have different values to those in Login Request</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#terminalenvironment">TerminalEnvironment</a></td><td style="text-align:center"></td><td>String</td><td>&quot;Attended&quot;, &quot;SemiAttended&quot;, or &quot;Unattended&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#salecapabilities">SaleCapabilities</a></td><td style="text-align:center"></td><td>Array</td><td>Advises the POI System of the Sale System capabilities. See <a href="/fusion/docs/api-reference/data-model#salecapabilities">SaleCapabilities</a></td></tr><tr><td><em>CardAcquisitionTransaction</em></td><td style="text-align:center"></td><td>Object</td><td>Present if any of the JSON elements within are present</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#allowedpaymentbrand">AllowedPaymentBrand</a></td><td style="text-align:center"></td><td>Array</td><td>Restricts the request to specified card brands. See <a href="/fusion/docs/api-reference/data-model#allowedpaymentbrand">AllowedPaymentBrand</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#forceentrymode">ForceEntryMode</a></td><td style="text-align:center"></td><td>String</td><td>If present, restricts card presentment to the specified type. See <a href="/fusion/docs/api-reference/data-model#forceentrymode">ForceEntryMode</a></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="card-acquisition-response">Card acquisition response<a class="hash-link" aria-label="Direct link to Card acquisition response" title="Direct link to Card acquisition response" href="/fusion/docs/api-reference/fusion-cloud#card-acquisition-response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Card acquisition response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;SaleToPOIResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageCategory&quot;: &quot;CardAcquisition&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageType&quot;: &quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ServiceID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SaleID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;POIID&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;CardAcquisitionResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Response&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Result&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ErrorCondition&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;AdditionalResponse&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SaleData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;SaleTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;TransactionID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;TimeStamp&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;POIData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;TransactionID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;TimeStamp&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;PaymentInstrumentData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;PaymentInstrumentType&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;CardData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;MaskedPAN&quot;: &quot;xxxxxx......xxxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;EntryMode&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;PaymentToken&quot;:  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;TokenRequestedType&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;TokenValue&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ExpiryDateTime&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SecurityTrailer&quot;: {...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;CardAcquisition&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#deviceid">DeviceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Unique message identifier</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment request</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from payment request</td></tr></tbody></table>
<p><strong>CardAcquisitionResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><strong>Response</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object indicating the result of the login</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the result of the response. Possible values are &quot;Success&quot; and &quot;Failure&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr><tr><td><strong>SaleData</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td> <strong>SaleTransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#salereferenceid">SaleReferenceID</a></td><td style="text-align:center"></td><td>String</td><td>Mirrored from the request</td></tr><tr><td><strong>POIData</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td> <strong>POITransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique transaction id from the POI system</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Time on the POI system, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a></td></tr><tr><td> <strong><a href="/fusion/docs/api-reference/data-model#paymentinstrumentdata">PaymentInstrumentData</a></strong></td><td style="text-align:center"></td><td>Object</td><td>Object with represents card details for token or manually enter card details.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#paymentinstrumenttype">PaymentInstrumentType</a></td><td style="text-align:center"></td><td>String</td><td>Defaults to &quot;Card&quot;. Indicates the card source for the payment. See <a href="/fusion/docs/api-reference/data-model#paymentinstrumenttype">PaymentInstrumentType</a></td></tr><tr><td><strong>CardData</strong></td><td style="text-align:center"></td><td>Object</td><td></td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#entrymode">EntryMode</a></td><td style="text-align:center"></td><td>String</td><td>Only present if <code>PaymentInstrumentType</code> is &quot;Card&quot;. &quot;File&quot; if a Payment Token is used, and &quot;Keyed&quot; for a Card Not Present transaction.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#maskedpan">MaskedPAN</a></td><td style="text-align:center">✔</td><td>String</td><td>PAN masked with dots, first 6 and last 4 digits visible</td></tr><tr><td> <strong>PaymentToken</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Only present if <a href="/fusion/docs/api-reference/data-model#entrymode">EntryMode</a> is &quot;File&quot;. Object with identifies the payment token.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#tokenrequestedtype">TokenRequestedType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Transaction&quot; or &quot;Customer&quot;. Must match the type of token recorded in the POI System.</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#tokenvalue">TokenValue</a></td><td style="text-align:center">✔</td><td>String</td><td>Token previously returned from the POI System in the payment, or card acquisition response</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="voidreversal">Void/Reversal<a class="hash-link" aria-label="Direct link to Void/Reversal" title="Direct link to Void/Reversal" href="/fusion/docs/api-reference/fusion-cloud#voidreversal">​</a></h3>
<p>A successful payment transaction can be voided/reversed by sending a reversal request message.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>There are only specific cases where the reversal request is supported (such as a pre-authorisation cancel).  In most cases, refund request message should be sent instead.</p><p>Please discuss first with the DataMesh Integrations team at <a href="mailto:integrations@datameshgroup.com"><a href="mailto:integrations@datameshgroup.com" target="_blank" rel="noopener noreferrer">integrations@datameshgroup.com</a></a> if you plan to implement any void/reversal processing.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="reversal-request">Reversal request<a class="hash-link" aria-label="Direct link to Reversal request" title="Direct link to Reversal request" href="/fusion/docs/api-reference/fusion-cloud#reversal-request">​</a></h4>
<p>The reversal message is used to perform void/reversal request.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Reversal request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;: &quot;Reversal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;: &quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ProtocolVersion&quot;: &quot;3.1-dmg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;xxx&quot;         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ReversalRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;422543aba9fc4e9a9a6512517961513c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T04:33:56.8703432Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleReferenceID&quot;: &quot;8c583b0d-f1dc-4b7d-a13f-adb8bf0c761d&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},	         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;OriginalPOITransaction&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;65656db57a54cb8f801069ee&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T15:34:10.16+11:00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ReversalReason&quot;: &quot;MerchantCancel&quot;// (e.g. CustCancel, MerchantCancel, Malfunction, Unable2Compl, SignatureDeclined, Unknown)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Reversal&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Request&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#protocolversion">ProtocolVersion</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;3.1-dmg&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique value which will be mirrored in the response. See <a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a>.</td></tr></tbody></table>
<p><strong>ReversalRequest</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td> <strong><a href="/fusion/docs/api-reference/data-model#originalpoitransaction">OriginalPOITransaction</a></strong></td><td style="text-align:center">✔</td><td>Object</td><td>Identifies a previous POI transaction. See <a href="/fusion/docs/api-reference/data-model#originalpoitransaction">OriginalPOITransaction</a></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a></td><td style="text-align:center">✔</td><td>String</td><td><a href="/fusion/docs/api-reference/data-model#saleid">SaleID</a> which performed the original transaction</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#poiid">POIID</a></td><td style="text-align:center">✔</td><td>String</td><td><a href="/fusion/docs/api-reference/data-model#poiid">POIID</a> which performed the original transaction</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#reusecarddataflag">ReuseCardDataFlag</a></td><td style="text-align:center"></td><td>Boolean</td><td>If &#x27;true&#x27; the POI Terminal will retrieve the card data from file based on the <code>PaymentToken</code> included in the request. Otherwise the POI Terminal will read the same card again.</td></tr><tr><td>  <strong>POITransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td><code>TransactionID</code> from the original transaction</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td><code>TimeStamp</code> from the original transaction</td></tr><tr><td> <strong><a href="/fusion/docs/api-reference/data-model#reversal-reason">ReversalReason</a></strong></td><td style="text-align:center">✔</td><td>Object</td><td>Reason for cancelling the successful payment transaction.  See <a href="/fusion/docs/api-reference/data-model#reversalreason">ReversalReason</a></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="reversal-response">Reversal response<a class="hash-link" aria-label="Direct link to Reversal response" title="Direct link to Reversal response" href="/fusion/docs/api-reference/fusion-cloud#reversal-response">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Reversal response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;SaleToPOIResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageCategory&quot;: &quot;Reversal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;MessageType&quot;: &quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ProtocolVersion&quot;: &quot;3.1-dmg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;ServiceID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleID&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;xxx&quot;         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ReversalResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;POIData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TimeStamp&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;TransactionID&quot;: &quot;xxxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;PaymentReceipt&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;DocumentQualifier&quot;: &quot;SaleReceipt&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;OutputContent&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;OutputFormat&quot;: &quot;XHTML&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;OutputXHTML&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;RequiredSignatureFlag&quot;: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;DocumentQualifier&quot;: &quot;CashierReceipt&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;OutputContent&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;OutputFormat&quot;: &quot;XHTML&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;OutputXHTML&quot;: &quot;xxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;RequiredSignatureFlag&quot;: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Response&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Result&quot;: &quot;Success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<p><strong>MessageHeader</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#messageclass">MessageClass</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Service&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagecategory">MessageCategory</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Reversal&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#messagetype">MessageType</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;Response&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#protocolversion">ProtocolVersion</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;3.1-dmg&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#serviceid">ServiceID</a></td><td style="text-align:center">✔</td><td>String</td><td>Mirrored from the request</td></tr></tbody></table>
<p><strong>ReversalResponse</strong></p>
<table><thead><tr><th><div style="width:240px">Attributes</div></th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><strong>Response</strong></td><td style="text-align:center">✔</td><td>Object</td><td>Object indicating the result of the payment</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#result">Result</a></td><td style="text-align:center">✔</td><td>String</td><td>Indicates the result of the response. Possible values are &quot;Success&quot; and &quot;Failure&quot;</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a></td><td style="text-align:center"></td><td>String</td><td>Indicates the reason an error occurred. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#errorcondition">ErrorCondition</a> for more information on possible values.</td></tr><tr><td> <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a></td><td style="text-align:center"></td><td>String</td><td>Provides additional error information. Only present when <code>Result</code> is &quot;Failure&quot;. See <a href="/fusion/docs/api-reference/data-model#additionalresponse">AdditionalResponse</a> for more information on possible values.</td></tr><tr><td><strong>POIData</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td> <strong>POITransactionID</strong></td><td style="text-align:center">✔</td><td>Object</td><td></td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#transactionid">TransactionID</a></td><td style="text-align:center">✔</td><td>String</td><td>A unique transaction id from the POI system</td></tr><tr><td>  <a href="/fusion/docs/api-reference/data-model#timestamp">TimeStamp</a></td><td style="text-align:center">✔</td><td>String</td><td>Time on the POI system, formatted as <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO8601</a></td></tr><tr><td> <strong>PaymentReceipt</strong></td><td style="text-align:center"></td><td>Array</td><td>Array of payment receipt objects which represent receipts to be printed</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#documentqualifier">DocumentQualifier</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;CashierReceipt&quot; for a merchant receipt, otherwise &quot;SaleReceipt&quot;</td></tr><tr><td>  <a href="/fusion/docs/api-reference/fusion-cloud#requiredsignatureflag">RequiredSignatureFlag</a></td><td style="text-align:center">✔</td><td>Boolean</td><td>If true, the card holder signature is required on the merchant CashierReceipt.</td></tr><tr><td>  <strong>OutputContent</strong></td><td style="text-align:center"></td><td>Object</td><td>Payment receipt object which represents the receipt that needs to be printed</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#outputformat">OutputFormat</a></td><td style="text-align:center">✔</td><td>String</td><td>&quot;XHTML&quot;</td></tr><tr><td>   <a href="/fusion/docs/api-reference/data-model#outputxhtml">OutputXHTML</a></td><td style="text-align:center">✔</td><td>String</td><td>The payment receipt in XHTML format but coded in BASE64</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="error-handling">Error handling<a class="hash-link" aria-label="Direct link to Error handling" title="Direct link to Error handling" href="/fusion/docs/api-reference/fusion-cloud#error-handling">​</a></h2>
<p>When the Sale System sends a request, it will receive a matching response. For example, if the Sale System sends a <a href="/fusion/docs/api-reference/fusion-cloud#payment_request">payment request</a> it will receive a <a href="/fusion/docs/api-reference/fusion-cloud#payment-response">payment response</a>.</p>
<p>The Sale System should verify the result of the transaction by checking the <a href="/fusion/docs/api-reference/data-model#result">Response.Result</a> field in the response.</p>
<ul>
<li>If the <a href="/fusion/docs/api-reference/data-model#result">Response.Result</a> is &quot;Success&quot;, the payment transaction was successful.</li>
<li>If the <a href="/fusion/docs/api-reference/data-model#result">Response.Result</a> is &quot;Failure&quot;, the payment transaction failed.  The Sale System may check for any errors specified in the <a href="/fusion/docs/api-reference/data-model#errorcondition">Response.ErrorCondition</a> field in the same response message and handle the error accordingly.</li>
</ul>
<p>In the event the Sale System does not receive a response (for example, due to network error, timeout, or any other unexpected error) it must enter error handling.</p>
<p>Error handling due to network error, timeout, or any other unexpected error is outlined in the diagram below.</p>
<ol>
<li>Cashier initiates a payment.</li>
<li>Sale System sets txn_in_progress flag in local persistent storage.</li>
<li>Sale System sends a <a href="/fusion/docs/api-reference/fusion-cloud#payment">payment request</a>.  The timeout period for waiting for a response is 60 seconds.  This should reset every time a response (for example, <a href="/fusion/docs/api-reference/fusion-cloud#display">display request</a>) is received.</li>
<li>Sale System saves message reference details in local persistent storage.</li>
<li>Network error/timeout/any other unexpected error occurs.</li>
<li>Sale System awaits Internet availability.</li>
<li>Sale System enters error handling:<!-- -->
<ol>
<li>
<p>Sale System sends an <a href="/fusion/docs/api-reference/fusion-cloud#abort-transaction">abort transaction request</a>.</p>
<ul>
<li>Sale System must set the <code>AbortRequest.AbortReason</code> field to describe the reason for cancelling the transaction.</li>
</ul>
<table><thead><tr><th style="text-align:center"><code>AbortRequest.AbortReason</code> value</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">Network Error</td><td style="text-align:center">Network related error occured.</td></tr><tr><td style="text-align:center">Timeout</td><td style="text-align:center">No response from the host after the timeout period.</td></tr><tr><td style="text-align:center">Message Format Error</td><td style="text-align:center">An error occured while converting a message.</td></tr><tr><td style="text-align:center">Invalid Data</td><td style="text-align:center">An invalid data was received.</td></tr><tr><td style="text-align:center">Other Exception</td><td style="text-align:center">An unwanted exception has occured.</td></tr></tbody></table>
</li>
<li>
<p>For a maximum of 90 seconds, the Sale System should perform the below in a loop:</p>
<ol>
<li>Sale System sends a <a href="/fusion/docs/api-reference/fusion-cloud#transaction-status-request">transaction status request</a> and awaits a <a href="/fusion/docs/api-reference/fusion-cloud#transaction-status-response">transaction status response</a></li>
<li>Sale System handles the transaction status response:</li>
</ol>
<table><thead><tr><th style="text-align:center"><code>Response.Result</code> value</th><th style="text-align:center"><code>Response.ErrorCondition</code> value</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">Success</td><td style="text-align:center"></td><td style="text-align:center">The transaction was successful.</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">The transaction result will be contained in <code>RepeatedMessageResponse</code>.</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">The <code>RepeatedMessageResponse</code> will contain the <a href="/fusion/docs/api-reference/fusion-cloud#payment-response">payment response</a>.</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">Failure</td><td style="text-align:center">&quot;InProgress&quot;</td><td style="text-align:center">The Terminal is still processing the payment.</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">The Sale System should wait for 5 seconds and send a <a href="/fusion/docs/api-reference/fusion-cloud#transaction_status_request">transaction status request</a> again.</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">Failure</td><td style="text-align:center">any other value aside from &quot;InProgress&quot;</td><td style="text-align:center">The payment failed.</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">The Sale System can exit the loop.</td><td style="text-align:center"></td></tr></tbody></table>
</li>
<li>
<p>If the Sale System is unable retrieve a result within 90 seconds:</p>
<ul>
<li>Sale System must display UI to ask Cashier to check the transaction history in the POI terminal.</li>
<li>Cashier confirms in the Sale System whether the payment transaction succeeded or failed basing on the transaction record in the transaction history in the POI terminal.</li>
</ul>
</li>
<li>
<p>Sale System clears the message reference details in the local persistent storage.</p>
</li>
<li>
<p>Sale System clears the txn_in_progress flag in the local persistent storage.</p>
</li>
</ol>
</li>
<li>Sale System proceeds with its successful/failed transaction processing, depending on the transaction result.</li>
</ol>
<p><img decoding="async" loading="lazy" src="/fusion/assets/images/payment-error-handling-8f27e9ed571a357c00f2ed9aa1f5e9aa.png" width="1023" height="1690" class="img_ev3q"></p>
<p><strong>Power failure handling</strong></p>
<p>The Sale System can handle a power failure by checking a local transaction status on start up.</p>
<ol>
<li>Cashier initiates a payment.</li>
<li>Sale System sets txn_in_progress flag in local persistent storage.</li>
<li>Sale System sends a <a href="/fusion/docs/api-reference/fusion-cloud#payment">payment request</a></li>
<li>Sale System saves message reference details in local persistent storage.</li>
<li>Sale System power failure occurs.</li>
<li>Sale System start up after power failure.</li>
<li>Sale System checks if txn_in_progress flag is set. If so, access and use message reference details and enter error handling.<!-- -->
<ol>
<li>Sale System sends an <a href="/fusion/docs/api-reference/fusion-cloud#abort-transaction">abort transaction request</a>.<!-- -->
<ul>
<li>Sale System must set the <code>AbortRequest.AbortReason</code> field to &quot;Power Failure&quot;.</li>
</ul>
</li>
<li>For a maximum of 90 seconds, Sale System enters loop to check transaction status.</li>
<li>If the Sale System is unable retrieve a result within 90 seconds:<!-- -->
<ul>
<li>Sale System must display UI to ask Cashier to check the transaction history in the POI terminal.</li>
<li>Cashier confirms in the Sale System whether the payment transaction succeeded or failed basing on the transaction record in the transaction history in the POI terminal.</li>
</ul>
</li>
<li>Sale System clears the message reference details in the local persistent storage.</li>
<li>Sale System clears the txn_in_progress flag in the local persistent storage.</li>
</ol>
</li>
<li>Sale System proceeds with its successful/failed transaction processing, depending on the transaction result.</li>
</ol>
<p><img decoding="async" loading="lazy" src="/fusion/assets/images/payment-error-handling-power-failure-c302edd97c35196dda4610669dc165c5.png" width="1023" height="1724" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/fusion/docs/api-reference/fusion-app"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Fusion App</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/fusion/docs/api-reference/fusion-satellite"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Fusion Satellite</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#reference-code">Reference code</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#security-requirements">Security requirements</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#endpoints">Endpoints</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#message-format">Message format</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#messageheader">MessageHeader</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#payload">Payload</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#securitytrailer">SecurityTrailer</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#perform-a-purchase">Perform a purchase</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#perform-a-refund">Perform a refund</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#sample-code-for-performing-a-purchase-or-refund">Sample code for Performing a Purchase or Refund</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#methods">Methods</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#login">Login</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#login-request">Login request</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#login-response">Login response</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#logout">Logout</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#logout-request">Logout request</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#logout-response">Logout response</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#payment">Payment</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#payment-request">Payment request</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#payment-response">Payment response</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#display">Display</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#display-request">Display request</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#display-response">Display response</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#input">Input</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#input-request">Input request</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#input-response">Input response</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#print">Print</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#print-request">Print request</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#print-response">Print response</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#transaction-status">Transaction status</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#transaction-status-request">Transaction status request</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#transaction-status-response">Transaction status response</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#abort-transaction">Abort transaction</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#abort-transaction-request">Abort transaction request</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#abort-transaction-response">Abort transaction response</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#reconciliation">Reconciliation</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#reconciliation-request">Reconciliation request</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#reconciliation-response">Reconciliation response</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#card-acquisition">Card acquisition</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#card-acquisition-request">Card acquisition request</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#card-acquisition-response">Card acquisition response</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#voidreversal">Void/Reversal</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#reversal-request">Reversal request</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#reversal-response">Reversal response</a></li></ul></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-cloud#error-handling">Error handling</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">2024-12-02</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">Useful Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.datameshgroup.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">DataMesh Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/datameshgroup" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:integrations@datameshgroup.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">DataMesh<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 <a href="https://www.datameshgroup.com/">DataMesh Group</a>.</div></div></div></footer></div>
</body>
</html>