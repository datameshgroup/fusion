<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-api-reference/fusion-api-fuel-extension" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Fusion API Fuel Extension | DataMesh Fusion API</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://datameshgroup.github.io/fusion/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://datameshgroup.github.io/fusion/img/logo.png"><meta data-rh="true" property="og:url" content="https://datameshgroup.github.io/fusion/docs/api-reference/fusion-api-fuel-extension"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Fusion API Fuel Extension | DataMesh Fusion API"><meta data-rh="true" name="description" content="The Fusion API Fuel Extension is of features and requirements which extend the Fusion API Core which adds support for current and future fuel payment types accepted by DataMesh. (e.g. FleetCard, Shell Card, MotorPass etc)"><meta data-rh="true" property="og:description" content="The Fusion API Fuel Extension is of features and requirements which extend the Fusion API Core which adds support for current and future fuel payment types accepted by DataMesh. (e.g. FleetCard, Shell Card, MotorPass etc)"><link data-rh="true" rel="icon" href="/fusion/img/logo.png"><link data-rh="true" rel="canonical" href="https://datameshgroup.github.io/fusion/docs/api-reference/fusion-api-fuel-extension"><link data-rh="true" rel="alternate" href="https://datameshgroup.github.io/fusion/docs/api-reference/fusion-api-fuel-extension" hreflang="en"><link data-rh="true" rel="alternate" href="https://datameshgroup.github.io/fusion/docs/api-reference/fusion-api-fuel-extension" hreflang="x-default"><link rel="stylesheet" href="/fusion/assets/css/styles.427cef24.css">
<script src="/fusion/assets/js/runtime~main.bb1269d6.js" defer="defer"></script>
<script src="/fusion/assets/js/main.ef0916e1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/fusion/"><div class="navbar__logo"><img src="/fusion/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/fusion/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">DataMesh Group</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fusion/docs/getting-started">Fusion API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/datameshgroup" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fusion/docs/getting-started">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/fusion/docs/category/api-reference">API Reference</a><button aria-label="Collapse sidebar category &#x27;API Reference&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/fusion-app">Fusion App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/fusion-cloud">Fusion Cloud</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/fusion-satellite">Fusion Satellite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/fusion/docs/api-reference/fusion-api-fuel-extension">Fusion API Fuel Extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/fusion-api-stored-value-extension">Fusion API Stored Value Extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fusion/docs/api-reference/data-model">Data model</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fusion/docs/testing">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fusion/docs/production">Production</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fusion/docs/appendix">Appendix</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/fusion/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/fusion/docs/category/api-reference"><span itemprop="name">API Reference</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Fusion API Fuel Extension</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Fusion API Fuel Extension</h1>
<p>The Fusion API Fuel Extension is of features and requirements which extend the Fusion API Core which adds support for current and future fuel payment types accepted by DataMesh. (e.g. FleetCard, Shell Card, MotorPass etc)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-fuel-card">What is a fuel card<a class="hash-link" aria-label="Direct link to What is a fuel card" title="Direct link to What is a fuel card" href="/fusion/docs/api-reference/fusion-api-fuel-extension#what-is-a-fuel-card">​</a></h2>
<p>A fuel card is a payment card specifically designed for drivers of business vehicles to pay for their fuel.</p>
<p>They can be configured to allow the purchase of only certain product categories, making it easier for business owners to track and manage fuel expenses. Fuel cards also reduce paper work, and can offer volume discounts.</p>
<p>Service stations accepting fuel card payments can attract more customers, especially those using company vehicles.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mandatory-features">Mandatory features<a class="hash-link" aria-label="Direct link to Mandatory features" title="Direct link to Mandatory features" href="/fusion/docs/api-reference/fusion-api-fuel-extension#mandatory-features">​</a></h2>
<p>The table below provides an overview of the mandatory integration requirements for the Fusion API Fuel Extension which are required for your selected integration type.</p>
<table><thead><tr><th>Feature</th><th style="text-align:center">Fusion App</th><th style="text-align:center">Fusion Satellite</th><th style="text-align:center">Fusion Cloud</th></tr></thead><tbody><tr><td>Purchase</td><td style="text-align:center">✔</td><td style="text-align:center">✔</td><td style="text-align:center">✔</td></tr><tr><td>Refund</td><td style="text-align:center">✔</td><td style="text-align:center">✔</td><td style="text-align:center">✔</td></tr><tr><td>Cashout (not supported on fuel cards)</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-api-fuel-extension#extended-saleitem">Extended SaleItem</a> fuel product fields</td><td style="text-align:center">✔</td><td style="text-align:center">✔</td><td style="text-align:center">✔</td></tr><tr><td><a href="/fusion/docs/getting-started#dynamic-surcharge">Dynamic surcharge</a></td><td style="text-align:center">✔</td><td style="text-align:center">✔</td><td style="text-align:center">✔</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-api-fuel-extension#split-payments">Split payments</a></td><td style="text-align:center">✔</td><td style="text-align:center">✔</td><td style="text-align:center">✔</td></tr><tr><td><a href="/fusion/docs/getting-started#matched-refund">Matched refund</a></td><td style="text-align:center">✔</td><td style="text-align:center">✔</td><td style="text-align:center">✔</td></tr><tr><td><a href="/fusion/docs/getting-started#qr-code-pairing">QR code pairing</a></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">✔</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#display">Display request handling</a></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">✔</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#input">Input request handling</a></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">✔</td></tr><tr><td><a href="/fusion/docs/api-reference/fusion-cloud#print">Print request handling</a></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">✔</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="extended-saleitem">Extended SaleItem<a class="hash-link" aria-label="Direct link to Extended SaleItem" title="Direct link to Extended SaleItem" href="/fusion/docs/api-reference/fusion-api-fuel-extension#extended-saleitem">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>A payment through the Fusion API Fuel Extension expands the mandatory fields for a <code>SaleItem</code>.</p></div></div>
<p>The Fusion API requires the Sale System populate the <a href="/fusion/docs/api-reference/data-model#saleitem">SaleItem</a> array with the basket items for every payment. The Fusion API Fuel Extension expands the mandatory fields required in each item to enable fuel card purchases.</p>
<p>The extra <a href="/fusion/docs/api-reference/data-model#saleitem">SaleItem</a> fields required for the Fusion API Fuel Extension are as follows:</p>
<ul>
<li>For <strong>every</strong> basket item, the Sale System must populate the fuel product code(s) within CustomFields</li>
<li>For fuel sale items only, the Sale System must populate  <code>UnitOfMeasure</code>, <code>Quantity</code>, <code>UnitPrice</code>, and <code>ItemAmount</code> representing the number of litres, price per litre, and total fuel price</li>
</ul>
<div class="theme-admonition theme-admonition-success admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_BuS1"><p>For fuel sale items, <code>ItemAmount</code> must equal <code>Quantity</code> multiplied by <code>UnitPrice</code>, rounded up, or to the nearest cent.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="consolidation-of-items">Consolidation of items<a class="hash-link" aria-label="Direct link to Consolidation of items" title="Direct link to Consolidation of items" href="/fusion/docs/api-reference/fusion-api-fuel-extension#consolidation-of-items">​</a></h4>
<p>The Sale System must consolodate any items in the <code>SaleItem[]</code> array with the same <code>ProductCode</code>.</p>
<p>When non-fuel items are combined, <code>Quantity</code> indicates the total count of the product in the sale and <code>UnitPrice</code> is the price per product, and <code>ItemAmount</code> is the total amount of the product in the sale (e.g. <code>Quantity</code> * <code>UnitPrice</code> rounded up to the nearest cent)</p>
<p>When fuel items are combined, <code>Quantity</code> indicates the total combined litres, <code>UnitPrice</code> indicates the price per litre, and <code>ItemAmount</code> is the total amount of the product in the sale (e.g. <code>Quantity</code> * <code>UnitPrice</code> rounded up to the nearest cent).</p>
<p>As they are combined, fuel products with the same fuel product code must have the same <code>UnitPrice</code> (price per litre) value.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fuel-sale-item-details">Fuel sale item details<a class="hash-link" aria-label="Direct link to Fuel sale item details" title="Direct link to Fuel sale item details" href="/fusion/docs/api-reference/fusion-api-fuel-extension#fuel-sale-item-details">​</a></h4>
<table><thead><tr><th>Attribute</th><th style="text-align:center">Requ.</th><th>Format</th><th>Description</th></tr></thead><tbody><tr><td><a href="/fusion/docs/api-reference/data-model#itemid">ItemID</a></td><td style="text-align:center">✔</td><td><a href="/fusion/docs/api-reference/data-model#data-format">Integer(0,9999)</a></td><td>A unique identifier for the sale item within the context of this payment. e.g. a 0..n integer which increments by one for each sale item.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#productcode">ProductCode</a></td><td style="text-align:center">✔</td><td><a href="/fusion/docs/api-reference/data-model#data-format">String(0,128)</a></td><td>A unique identifier for the product within the merchant, such as the SKU. For example if two customers purchase the same product at two different stores owned by the merchant, both purchases should contain the same <code>ProductCode</code>.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#unitofmeasure">UnitOfMeasure</a></td><td style="text-align:center">✔</td><td><a href="/fusion/docs/api-reference/data-model#data-format">Enum</a></td><td>Unit of measure of the <code>Quantity</code>. Set to &quot;Litre&quot;</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#quantity">Quantity</a></td><td style="text-align:center">✔</td><td><a href="/fusion/docs/api-reference/data-model#data-format">Decimal(0,999999,8)</a></td><td>Number of litres as read from the pump (decimal, maximum precision 6.8)</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#unitprice">UnitPrice</a></td><td style="text-align:center">✔</td><td><a href="/fusion/docs/api-reference/data-model#data-format">Decimal(0,999999,8)</a></td><td>Price per litre from the pump (decimal, maximum precision 6.8)</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#itemamount">ItemAmount</a></td><td style="text-align:center">✔</td><td><a href="/fusion/docs/api-reference/data-model#data-format">Currency(0.01,99999.99)</a></td><td>The amount of the fuel product as presented to the cardholder (decimal 6.2 rounded to the nearest cent). This must equal Quantity * UnitPrice rounded up, or to the nearest cent.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#productlabel">ProductLabel</a></td><td style="text-align:center">✔</td><td><a href="/fusion/docs/api-reference/data-model#data-format">String(0,1024)</a></td><td>A short, human readable, descriptive name of the product.  For example, <code>ProductLabel</code> could contain the product name typically printed on the customer receipt.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#categories">Categories</a></td><td style="text-align:center"></td><td><a href="/fusion/docs/api-reference/data-model#data-format">Array(String)</a></td><td>Array of categories. Top level &quot;main&quot; category at categories[0]. See <a href="/fusion/docs/api-reference/data-model#categories">Categories</a> for more information.</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#sale-item-tags">Tags</a></td><td style="text-align:center"></td><td><a href="/fusion/docs/api-reference/data-model#data-format">Array(String)</a></td><td>String array with descriptive tags for the product</td></tr><tr><td><a href="/fusion/docs/api-reference/data-model#customfields">CustomFields</a></td><td style="text-align:center">✔</td><td><a href="/fusion/docs/api-reference/data-model#data-format">Array(Object)</a></td><td>Array of key/type/value objects which define the fuel product code for the item.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fuel-product-code">Fuel product code<a class="hash-link" aria-label="Direct link to Fuel product code" title="Direct link to Fuel product code" href="/fusion/docs/api-reference/fusion-api-fuel-extension#fuel-product-code">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-fuel-product-code">What is a fuel product code<a class="hash-link" aria-label="Direct link to What is a fuel product code" title="Direct link to What is a fuel product code" href="/fusion/docs/api-reference/fusion-api-fuel-extension#what-is-a-fuel-product-code">​</a></h4>
<p>A fuel card may be configured by the fuel card provider to allow the purchase of specific product categories (e.g. only fuel, or fuel + services, or fuel + services + shop items)</p>
<p>For each item in the basket the Sale System must include a <em>fuel product code</em> which defines the product category the sale item belongs to.</p>
<p>This enables the fuel card provider to determine if the basket should be accepted for the fuel card presented.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-the-fuel-product-code">Setting the fuel product code<a class="hash-link" aria-label="Direct link to Setting the fuel product code" title="Direct link to Setting the fuel product code" href="/fusion/docs/api-reference/fusion-api-fuel-extension#setting-the-fuel-product-code">​</a></h4>
<p>The Sale System <strong>must</strong> add at least one fuel product code into <strong>every</strong> sale item.</p>
<p>The Sale System sets a fuel product code in each sale item by adding a key/value/type entry to the <a href="/fusion/docs/api-reference/data-model#customfields">CustomFields</a> array, where:</p>
<ul>
<li><strong>Key</strong> is the product code type (e.g. <code>FuelProductCodeShellCard</code> or <code>FuelProductCode</code>)</li>
<li><strong>Type</strong> is &quot;String&quot;</li>
<li><strong>Value</strong> is the value of the product code</li>
</ul>
<p>For example, the follow <code>CustomFields</code> JSON sets <code>FuelProductCodeShellCard</code> to <code>2</code>.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;CustomFields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Key&quot;: &quot;FuelProductCodeShellCard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Value&quot;: &quot;2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>See <a href="/fusion/docs/api-reference/fusion-api-fuel-extension#example-fuel-api-basket">example fuel api basket</a> for an example basket.</p>
<p>Currently, DataMesh supports the Sale System setting either <code>FuelProductCodeShellCard</code> or <code>FuelProductCode</code>. DataMesh will perform the required mapping from these codes to handle all other supported fuel card types.</p>
<div class="theme-admonition theme-admonition-success admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_BuS1"><p><strong>If the Sale System only supports setting one code, it should set <code>FuelProductCodeShellCard</code></strong></p></div></div>
<p>Supported product codes:</p>
<table><thead><tr><th>Product code type (Key)</th><th>Fuel card support</th><th>Product codes (Value)</th></tr></thead><tbody><tr><td>FuelProductCode</td><td>BP, Shell Card, Fleet Card, Motorpass</td><td><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>FuelProductCode codes</p></summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Code</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>Tobacco</td></tr><tr><td>2</td><td>Lottery</td></tr><tr><td>3</td><td>Premium ULP</td></tr><tr><td>4</td><td>Auto Gas</td></tr><tr><td>5</td><td>Unleaded</td></tr><tr><td>6</td><td>AdBlue Packaged</td></tr><tr><td>7</td><td>Oils</td></tr><tr><td>8</td><td>Services</td></tr><tr><td>9</td><td>Parts</td></tr><tr><td>10</td><td>Tyres</td></tr><tr><td>11</td><td>Battery</td></tr><tr><td>12</td><td>Repairs and Maintenance</td></tr><tr><td>13</td><td>Shop</td></tr><tr><td>14</td><td>Car Wash</td></tr><tr><td>15</td><td>Accident and Damage</td></tr><tr><td>16</td><td>Diner</td></tr><tr><td>17</td><td>Diesel G50</td></tr><tr><td>18</td><td>Premium Ethnl</td></tr><tr><td>19</td><td>ULP Ethnl</td></tr><tr><td>20</td><td>Opal</td></tr><tr><td>21</td><td>Bottle</td></tr><tr><td>22</td><td>No GST</td></tr><tr><td>23</td><td>Coffee</td></tr><tr><td>24</td><td>Ultimate</td></tr><tr><td>25</td><td>Diesel 5</td></tr><tr><td>26</td><td>AdBlue Pump</td></tr><tr><td>27</td><td>Weigh Bridge</td></tr><tr><td>28</td><td>N/A</td></tr><tr><td>29</td><td>10 Diesel</td></tr><tr><td>30</td><td>ULT Diesel</td></tr><tr><td>99</td><td>Cashout</td></tr></tbody></table></div></div></details></td></tr><tr><td>FuelProductCodeShellCard</td><td>BP, Shell Card, Fleet Card, Motorpass</td><td><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>FuelProductCodeShellCard codes</p></summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Code</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>Unleaded E10</td></tr><tr><td>2</td><td>Unleaded Petrol</td></tr><tr><td>3</td><td>Premium Unleaded</td></tr><tr><td>4</td><td>Diesel</td></tr><tr><td>5</td><td>Gogas</td></tr><tr><td>6</td><td>AdBlue</td></tr><tr><td>7</td><td>Premium Unleaded 98</td></tr><tr><td>8</td><td>V-Power</td></tr><tr><td>9</td><td>Unleaded 95</td></tr><tr><td>10</td><td>Premium Diesel</td></tr><tr><td>11</td><td>Car Parts</td></tr><tr><td>12</td><td>Car Service Labour</td></tr><tr><td>13</td><td>Auto Care Oils</td></tr><tr><td>14</td><td>Franchised Car Service</td></tr><tr><td>17</td><td>Car Tyres</td></tr><tr><td>18</td><td>Car Batteries</td></tr><tr><td>19</td><td>Car Service Opp</td></tr><tr><td>20</td><td>Car Service Other</td></tr><tr><td>31</td><td>Car Wash &amp; Detail</td></tr><tr><td>40</td><td>GST-Free Products</td></tr><tr><td>42</td><td>Car Accessories</td></tr><tr><td>43</td><td>Car Care</td></tr><tr><td>45</td><td>Tobacco</td></tr><tr><td>46</td><td>Confectionery</td></tr><tr><td>47</td><td>Dairy &amp; Deli</td></tr><tr><td>48</td><td>Drinks</td></tr><tr><td>49</td><td>Take Away Food</td></tr><tr><td>50</td><td>Groceries</td></tr><tr><td>52</td><td>Ice Products</td></tr><tr><td>54</td><td>Newsagency</td></tr><tr><td>55</td><td>Auto Oils</td></tr><tr><td>56</td><td>Rentals &amp; Deposits</td></tr><tr><td>57</td><td>Travel &amp; Leisure</td></tr><tr><td>59</td><td>Hardware</td></tr><tr><td>60</td><td>LP Gas Bottles</td></tr><tr><td>65</td><td>Services</td></tr><tr><td>66</td><td>Kerosene</td></tr><tr><td>67</td><td>Premix</td></tr><tr><td>71</td><td>Bakery</td></tr></tbody></table></div></div></details></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="maximum-number-of-product-codes">Maximum number of product codes<a class="hash-link" aria-label="Direct link to Maximum number of product codes" title="Direct link to Maximum number of product codes" href="/fusion/docs/api-reference/fusion-api-fuel-extension#maximum-number-of-product-codes">​</a></h4>
<ul>
<li>There is no limit on the number of individual product entries in the <code>SaleItem[]</code> array.</li>
<li>A single sale can include up to <strong>5 unique</strong> fuel product codes.</li>
<li>A single sale can include up to <strong>12 unique</strong> product codes in total (both fuel and non-fuel).</li>
</ul>
<p>Example: If a purchase includes 15 grocery items and E10 petrol:</p>
<ul>
<li>The <code>SaleItem[]</code> array will have 16 entries</li>
<li>There will be two unique product codes: one for groceries/shop and one for E10 petrol.</li>
</ul>
<p>This is a valid request.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="supporting-multiple-fuel-product-codes">Supporting multiple fuel product codes<a class="hash-link" aria-label="Direct link to Supporting multiple fuel product codes" title="Direct link to Supporting multiple fuel product codes" href="/fusion/docs/api-reference/fusion-api-fuel-extension#supporting-multiple-fuel-product-codes">​</a></h4>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This is optional. If the Sale System only supports setting one code, it should set <code>FuelProductCodeShellCard</code></p></div></div>
<p>DataMesh supports the Sale System providing multiple fuel product codes for each sale item.</p>
<p>If multiple fuel product codes are provided and a fuel card is presented, DataMesh will first attempt to use the fuel product codes for the card brand. If not provided, DataMesh will map from <code>FuelProductCodeShellCard</code> or <code>FuelProductCode</code>.</p>
<p>For example; if an Caltex StarCard is presented, DataMesh will attempt to load the fuel product code from <code>FuelProductCodeCaltexStarCard</code>. If not provied by the Sale System, DataMesh will map from <code>FuelProductCodeShellCard</code> or <code>FuelProductCode</code>.</p>
<p>All supported fuel product code types:</p>
<table><thead><tr><th>Product code</th><th>Fuel card</th></tr></thead><tbody><tr><td>FuelProductCodeAmpolCard</td><td>Ampol Card</td></tr><tr><td>FuelProductCode</td><td>BP Card</td></tr><tr><td>FuelProductCodeCaltexStarCard</td><td>Caltex StarCard</td></tr><tr><td>FuelProductCodeFleetCard</td><td>Fleet Card</td></tr><tr><td>FuelProductCodeFreedomFuelCard</td><td>Freedom Fuel Card</td></tr><tr><td>FuelProductCodeLibertyCard</td><td>Liberty Card</td></tr><tr><td>FuelProductCodeMotorpass</td><td>Motorpass</td></tr><tr><td>FuelProductCodeShellCard</td><td>Shell Card</td></tr><tr><td>FuelProductCodeTrinityFuelCard</td><td>Trinity Fuel Card</td></tr><tr><td>FuelProductCodeUnitedFuelCard</td><td>United Fuel Card</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="discounts-and-surcharges">Discounts and surcharges<a class="hash-link" aria-label="Direct link to Discounts and surcharges" title="Direct link to Discounts and surcharges" href="/fusion/docs/api-reference/fusion-api-fuel-extension#discounts-and-surcharges">​</a></h3>
<div class="theme-admonition theme-admonition-success admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_BuS1"><p>Fuel card payments require the amount requested to always match the sum of the items in the basket.</p></div></div>
<p>The Sale System must ensure that after the discount or surcharge has been applied;</p>
<ol>
<li>The amount requested matches the sum of the items in the basket.</li>
<li><code>ItemAmount</code> equals <code>Quantity</code> multiplied by <code>UnitPrice</code>, rounded up, or to the nearest cent.</li>
</ol>
<p>To apply a surcharge:</p>
<ul>
<li>Adjust the <code>Quantity</code> and/or <code>UnitPrice</code> to reflect the surcharged price, ensuring <code>ItemAmount</code> equals <code>Quantity</code> multiplied by <code>UnitPrice</code></li>
<li>Send the payment request</li>
</ul>
<p>To apply a fuel item discount:</p>
<ul>
<li>Adjust the <code>Quantity</code> and/or <code>UnitPrice</code> to reflect the discounted price, ensuring <code>ItemAmount</code> equals <code>Quantity</code> multiplied by <code>UnitPrice</code></li>
<li>In the SaleItem, populate <code>Discount</code> with the discounted amount</li>
<li>In the SaleItem, populate <code>DiscountReason</code> with the reason the discount was applied</li>
<li>Send the payment request</li>
</ul>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Example discounted fuel item </summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;SaleItem&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;ItemID&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;ProductCode&quot;: &quot;ABX123&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;UnitOfMeasure&quot;: &quot;Litre&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;Quantity&quot;: 42.252,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;UnitPrice&quot;: 2.00,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;ItemAmount&quot;: 84.50,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;Discount&quot;: 6.34,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;Discount&quot;: &quot;Cafe + fuel discount&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;ProductLabel&quot;: &quot;Unleaded Petrol&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;Categories&quot;: [&quot;Fuel&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;CustomFields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;Key&quot;: &quot;FuelProductCodeShellCard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;Value&quot;: &quot;2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-fuel-api-basket">Example fuel API basket<a class="hash-link" aria-label="Direct link to Example fuel API basket" title="Direct link to Example fuel API basket" href="/fusion/docs/api-reference/fusion-api-fuel-extension#example-fuel-api-basket">​</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Example fuel API sale item</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;SaleItem&quot;: [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ItemID&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ProductCode&quot;: &quot;ABX123&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;UnitOfMeasure&quot;: &quot;Litre&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Quantity&quot;: 42.252,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;UnitPrice&quot;: 2.15,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ItemAmount&quot;: 90.84,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ProductLabel&quot;: &quot;Unleaded Petrol&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Categories&quot;: [&quot;Fuel&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;CustomFields&quot;: [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;Key&quot;: &quot;FuelProductCodeShellCard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;Value&quot;: &quot;2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ItemID&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ProductCode&quot;: &quot;5000112576009&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;EanUpc&quot;: &quot;5000112576009&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;UnitOfMeasure&quot;: &quot;Other&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Quantity&quot;: &quot;2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;UnitPrice&quot;: &quot;1.95&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ItemAmount&quot;: &quot;3.90&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ProductLabel&quot;: &quot;Coca-Cola No Sugar 1.25L&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;CostBase&quot;: &quot;0.75&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Categories&quot;: [&quot;Drinks&quot;, &quot;Soft Drink&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Brand&quot;: &quot;Coca-Cola&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;QuantityInStock&quot;: &quot;42&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;CustomFields&quot;: [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;Key&quot;: &quot;FuelProductCodeShellCard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;Value&quot;: &quot;48&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="split-payments">Split payments<a class="hash-link" aria-label="Direct link to Split payments" title="Direct link to Split payments" href="/fusion/docs/api-reference/fusion-api-fuel-extension#split-payments">​</a></h2>
<div class="theme-admonition theme-admonition-success admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_BuS1"><p>For fuel card payments, the amount requested must match the sum of the items in the basket.</p></div></div>
<p>For cash and scheme cards, the standard split payments user flow (described <a href="/fusion/docs/getting-started#split-payments">here</a>) applies.</p>
<p>However, fuel card payments have unique split payment requirements:</p>
<ol>
<li><strong>No Split for Single Fuel Purchase:</strong> A single fuel purchase cannot be split between a fuel card and another payment option. For instance, a $100 fuel purchase cannot be split into $50 cash and $50 fuel card payments.</li>
<li><strong>Mandatory Basket Split for Unsupported Items:</strong> If a fuel card is used to purchase fuel along with items not supported by the card (e.g. tobacco), the Sale System must split the basket. For example, a purchase of $100 fuel and $50 tobacco would require the Sale System to send two transactions with separate baskets. The fuel sale, with the fuel item in the basket followed by and a second sale, with the tobacco item in the basket.</li>
</ol>
<p>Fuel card holders are typically familiar with these operational processes. Cashiers need to understand this flow for correct POS processing.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Refer <a href="/fusion/docs/getting-started#split-payments">here</a> for details on performing a split payment.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="purchase">Purchase<a class="hash-link" aria-label="Direct link to Purchase" title="Direct link to Purchase" href="/fusion/docs/api-reference/fusion-api-fuel-extension#purchase">​</a></h2>
<p>To perform a fuel purchase:</p>
<ul>
<li>Construct a purchase request based on the Sale System integration type:<!-- -->
<ul>
<li>Fusion App - <a href="/fusion/docs/api-reference/fusion-app#perform-a-purchase-events-mode">perform a purchase</a></li>
<li>Fusion Cloud - <a href="/fusion/docs/api-reference/fusion-cloud#perform-a-purchase">perform a purchase</a></li>
<li>Fusion Satellite - <a href="/fusion/docs/api-reference/fusion-satellite#payment">perform a purchase</a></li>
</ul>
</li>
<li>Populate <strong>every</strong> product in the SaleItem[] array with fuel product data <code>CustomFields</code></li>
<li>Populate every <strong>fuel</strong> product in the SaleItem[] array with fuel product data</li>
<li>Fusion Cloud only; handle <a href="/fusion/docs/api-reference/fusion-cloud#display">display</a>, <a href="/fusion/docs/api-reference/fusion-cloud#input">input</a>, and <a href="/fusion/docs/api-reference/fusion-cloud#print">print</a> requests.</li>
<li>Handle the payment response<!-- -->
<ul>
<li>The <a href="/fusion/docs/api-reference/data-model#paymentbrandid">PaymentBrandID</a> field indicates the card type used to complete the payment</li>
</ul>
</li>
</ul>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Fusion API Fuel Extension purchase request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;SaleToPOIRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageCategory&quot;: &quot;Payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageType&quot;: &quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ServiceID&quot;: &quot;ec6b7b5f7330484eb533cd26a1306bb0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleID&quot;: &quot;INT POS&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;INTP9205&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;PaymentRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;422543aba9fc4e9a9a6512517961513c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T04:33:56.8703432Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentTransaction&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;AmountsReq&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;Currency&quot;: &quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RequestedAmount&quot;: 117.41</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleItem&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemID&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductCode&quot;: &quot;HHETDY12321&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitOfMeasure&quot;: &quot;Litre&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Quantity&quot;: 57.62,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitPrice&quot;: 1.97,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemAmount&quot;: 113.51,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductLabel&quot;: &quot;Unleaded Petrol&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;CustomFields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Key&quot;: &quot;FuelProductCode&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Value&quot;: &quot;5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Key&quot;: &quot;FuelProductCodeShellCard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Value&quot;: &quot;2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemID&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductCode&quot;: &quot;5000112576009&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;EanUpc&quot;: &quot;5000112576009&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitOfMeasure&quot;: &quot;Other&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Quantity&quot;: &quot;2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitPrice&quot;: &quot;1.95&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemAmount&quot;: &quot;3.90&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductLabel&quot;: &quot;Coca-Cola No Sugar 1.25L&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;CostBase&quot;: &quot;0.75&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Categories&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							&quot;Drinks&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							&quot;Soft Drink&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Brand&quot;: &quot;Coca-Cola&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;QuantityInStock&quot;: &quot;42&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;CustomFields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Key&quot;: &quot;FuelProductCode&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Value&quot;: &quot;13&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Key&quot;: &quot;FuelProductCodeShellCard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Value&quot;: &quot;48&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentType&quot;: &quot;Normal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;SecurityTrailer&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Fusion API Fuel Extension purchase response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;SaleToPOIResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageCategory&quot;: &quot;Payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageType&quot;: &quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ServiceID&quot;: &quot;ec6b7b5f7330484eb533cd26a1306bb0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleID&quot;: &quot;INT POS&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;INTP9205&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;PaymentResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;Response&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;Result&quot;: &quot;Success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;422543aba9fc4e9a9a6512517961513c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T04:33:56.8703432Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;65656db57a54cb8f801069ee&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T15:34:10.16+11:00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POIReconciliationID&quot;: &quot;64f7f88bd677b0362581bbb5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentResult&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentType&quot;: &quot;Normal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentInstrumentData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;PaymentInstrumentType&quot;: &quot;Card&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;CardData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;EntryMode&quot;: &quot;MagStripe&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;PaymentBrand&quot;: &quot;Shell Card&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;PaymentBrandID&quot;: &quot;0103&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;PaymentBrandLabel&quot;: &quot;Shell Card&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Account&quot;: &quot;Default&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Expiry&quot;: &quot;=720&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;MaskedPAN&quot;: &quot;7034305XXXXX2521&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;AmountsResp&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;Currency&quot;: &quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AuthorizedAmount&quot;: 117.41,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TotalFeesAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;CashBackAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;SurchargeAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TipAmount&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;OnlineFlag&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentAcquirerData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AcquirerID&quot;: &quot;560251&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;MerchantID&quot;: &quot;33435368&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AcquirerPOIID&quot;: &quot;M3AU41&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AcquirerTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;TransactionID&quot;: &quot;5de73ec1454dde9d70124b5d&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;TimeStamp&quot;: &quot;2023-11-28T04:34:10.320Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;ApprovalCode&quot;: &quot;554004&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;ResponseCode&quot;: &quot;00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;HostReconciliationID&quot;: &quot;20231129&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RRN&quot;: &quot;328132214339126&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentReceipt&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;DocumentQualifier&quot;: &quot;SaleReceipt&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;IntegratedPrintFlag&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RequiredSignatureFlag&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;OutputContent&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputFormat&quot;: &quot;XHTML&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputXHTML&quot;: &quot;PHAgaWQ9InJlY2VpcHQtaW5mbyI+MjgvMTEvMjAyMyAxNTozNDoxMDxici8+TWVyY2hhbnQgSUQ6IFBPU01lcmNoYW50PGJyLz5UZXJtaW5hbCBJRDogSU5UUDkyMDU8L3A+PHAgaWQ9InJlY2VpcHQtZGV0YWlscyI+PGI+UHVyY2hhc2UgVHJhbnNhY3Rpb248L2I+PGJyLz5BbW91bnQ6ICQxNS4wODxici8+U2hlbGwgQ2FyZDogNDc2MTczWFhYWFhYMDExOSAoVCk8YnIvPkNyZWRpdCBBY2NvdW50PC9wPjxwIGlkPSJyZWNlaXB0LXJlc3VsdCI+PGI+QXBwcm92ZWQ8L2I+PGJyLz5SZWZlcmVuY2U6IDAwMDAgMDAxMyA0NTk4PGJyLz5BdXRoIENvZGU6IDU1NDAwNDxici8+QUlEOiBBMDAwMDAwMDAzMTAxMDxici8+QVRDOiAwMDAxPGJyLz5UVlI6IDAwMDAwMDAwMDA8YnIvPkFSUUM6IEQ5Mzc2MDIwMDgzOEQwNzM8L3A+&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;SecurityTrailer&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="refund">Refund<a class="hash-link" aria-label="Direct link to Refund" title="Direct link to Refund" href="/fusion/docs/api-reference/fusion-api-fuel-extension#refund">​</a></h2>
<div class="theme-admonition theme-admonition-success admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_BuS1"><p>To perform a fuel card refund, some fuel card providers require that the refund be matched to an original purchase.</p><p>To ensure that all fuel card refunds can be completed successfully; refunds must be &quot;matched refunds&quot;.</p><p>We recommend that the Sale System implements matched refunds by including the POITransactionID from the original purchase request.  However, if the Sale System doesn’t provide this information (POITransactionID), the Satellite application will request for it.</p></div></div>
<p>To perform a fuel refund:</p>
<ul>
<li>Construct a refund request based on the Sale System integration type:<!-- -->
<ul>
<li>Fusion App - <a href="/fusion/docs/api-reference/fusion-app#perform-a-refund-events-mode">perform a purchase</a></li>
<li>Fusion Cloud - <a href="/fusion/docs/api-reference/fusion-cloud#perform-a-refund">perform a purchase</a></li>
<li>Fusion Satellite - <a href="/fusion/docs/api-reference/fusion-satellite#payment">perform a purchase</a></li>
</ul>
</li>
<li>Populate the <a href="/fusion/docs/getting-started#matched-refund">matched refund</a> fields</li>
<li>Populate the <code>SaleItem[]</code> array with fuel product data of the items being refunded</li>
<li>Fusion Cloud only; handle <a href="/fusion/docs/api-reference/fusion-cloud#display">display</a>, <a href="/fusion/docs/api-reference/fusion-cloud#input">input</a>, and <a href="/fusion/docs/api-reference/fusion-cloud#print">print</a> requests.</li>
<li>Handle the payment response</li>
</ul>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Fusion API Fuel Extension refund request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;SaleToPOIRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageCategory&quot;: &quot;Payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageType&quot;: &quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ServiceID&quot;: &quot;ec6b7b5f7330484eb533cd26a1306bb0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleID&quot;: &quot;INT POS&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;INTP9205&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;PaymentRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;422543aba9fc4e9a9a6512517961513c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T04:33:56.8703432Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentTransaction&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;AmountsReq&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;Currency&quot;: &quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RequestedAmount&quot;: 117.41</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;OriginalPOITransaction&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;TransactionID&quot;: &quot;65656db57a54cb8f801069ee&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;TimeStamp&quot;: &quot;2023-11-28T15:34:10.16+11:00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleItem&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemID&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductCode&quot;: &quot;HHETDY12321&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitOfMeasure&quot;: &quot;Litre&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Quantity&quot;: 57.62,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitPrice&quot;: 1.97,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemAmount&quot;: 113.51,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductLabel&quot;: &quot;Unleaded Petrol&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;CustomFields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Key&quot;: &quot;FuelProductCode&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Value&quot;: &quot;5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Key&quot;: &quot;FuelProductCodeShellCard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Value&quot;: &quot;2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemID&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductCode&quot;: &quot;5000112576009&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;EanUpc&quot;: &quot;5000112576009&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitOfMeasure&quot;: &quot;Other&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Quantity&quot;: &quot;2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitPrice&quot;: &quot;1.95&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemAmount&quot;: &quot;3.90&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductLabel&quot;: &quot;Coca-Cola No Sugar 1.25L&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;CostBase&quot;: &quot;0.75&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Categories&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							&quot;Drinks&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							&quot;Soft Drink&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Brand&quot;: &quot;Coca-Cola&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;QuantityInStock&quot;: &quot;42&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;CustomFields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Key&quot;: &quot;FuelProductCode&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Value&quot;: &quot;13&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Key&quot;: &quot;FuelProductCodeShellCard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Value&quot;: &quot;48&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentType&quot;: &quot;Refund&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;SecurityTrailer&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Fusion API Fuel Extension refund response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;SaleToPOIResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageCategory&quot;: &quot;Payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageType&quot;: &quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ServiceID&quot;: &quot;ec6b7b5f7330484eb533cd26a1306bb0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleID&quot;: &quot;INT POS&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;INTP9205&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;PaymentResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;Response&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;Result&quot;: &quot;Success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;422543aba9fc4e9a9a6512517961513c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T04:33:56.8703432Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;65656db57a54cb8f801069ee&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T15:34:10.16+11:00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POIReconciliationID&quot;: &quot;64f7f88bd677b0362581bbb5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentResult&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentType&quot;: &quot;Normal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentInstrumentData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;PaymentInstrumentType&quot;: &quot;Card&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;CardData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;EntryMode&quot;: &quot;MagStripe&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;PaymentBrand&quot;: &quot;Shell Card&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;PaymentBrandID&quot;: &quot;0103&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;PaymentBrandLabel&quot;: &quot;Shell Card&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Account&quot;: &quot;Default&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Expiry&quot;: &quot;=720&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;MaskedPAN&quot;: &quot;7034305XXXXX2521&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;AmountsResp&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;Currency&quot;: &quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AuthorizedAmount&quot;: 117.41,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TotalFeesAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;CashBackAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;SurchargeAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TipAmount&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;OnlineFlag&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentAcquirerData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AcquirerID&quot;: &quot;560251&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;MerchantID&quot;: &quot;33435368&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AcquirerPOIID&quot;: &quot;M3AU41&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AcquirerTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;TransactionID&quot;: &quot;5de73ec1454dde9d70124b5d&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;TimeStamp&quot;: &quot;2023-11-28T04:34:10.320Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;ApprovalCode&quot;: &quot;554004&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;ResponseCode&quot;: &quot;00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;HostReconciliationID&quot;: &quot;20231129&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RRN&quot;: &quot;328132214339126&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentReceipt&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;DocumentQualifier&quot;: &quot;SaleReceipt&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;IntegratedPrintFlag&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RequiredSignatureFlag&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;OutputContent&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputFormat&quot;: &quot;XHTML&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputXHTML&quot;: &quot;PHAgaWQ9InJlY2VpcHQtaW5mbyI+MjgvMTEvMjAyMyAxNTozNDoxMDxici8+TWVyY2hhbnQgSUQ6IFBPU01lcmNoYW50PGJyLz5UZXJtaW5hbCBJRDogSU5UUDkyMDU8L3A+PHAgaWQ9InJlY2VpcHQtZGV0YWlscyI+PGI+UHVyY2hhc2UgVHJhbnNhY3Rpb248L2I+PGJyLz5BbW91bnQ6ICQxNS4wODxici8+U2hlbGwgQ2FyZDogNDc2MTczWFhYWFhYMDExOSAoVCk8YnIvPkNyZWRpdCBBY2NvdW50PC9wPjxwIGlkPSJyZWNlaXB0LXJlc3VsdCI+PGI+QXBwcm92ZWQ8L2I+PGJyLz5SZWZlcmVuY2U6IDAwMDAgMDAxMyA0NTk4PGJyLz5BdXRoIENvZGU6IDU1NDAwNDxici8+QUlEOiBBMDAwMDAwMDAzMTAxMDxici8+QVRDOiAwMDAxPGJyLz5UVlI6IDAwMDAwMDAwMDA8YnIvPkFSUUM6IEQ5Mzc2MDIwMDgzOEQwNzM8L3A+&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;SecurityTrailer&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-authorisation-payment-flow">Pre-authorisation payment flow<a class="hash-link" aria-label="Direct link to Pre-authorisation payment flow" title="Direct link to Pre-authorisation payment flow" href="/fusion/docs/api-reference/fusion-api-fuel-extension#pre-authorisation-payment-flow">​</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Pre-authorisation payment flow is only available from <a href="/fusion/docs/api-reference/fusion-satellite">Fusion Satellite</a> API.</p></div></div>
<p>The pre-authorisation payment flow allows the Sale System to reserve funds on a customer&#x27;s card, enabling the payment to be completed at a later time. This is commonly used in situations where funds need to be reserved before the cardholder can dispense fuel (e.g., pay-at-the-pump).</p>
<p>In the pre-authorisation payment flow:</p>
<ul>
<li>The Sale System sends a pre-authorisation request, specifying the requested products and the amount to reserve on the card.</li>
<li>The cardholder presents their fuel card at the POI Terminal, which then completes the authorisation.</li>
<li>The Sale System receives a pre-authorisation response, including the authorisation result and, if a fuel card was used, the products allowed on the card.</li>
<li>Based on the allowed products, the Sale System unlocks the pump, allowing the cardholder to dispense fuel.</li>
<li>After the fuel is dispensed, the Sale System sends a completion request with the full fuel product information.</li>
<li>If the cardholder cancels the payment, the Sale System sends a pre-authorisation cancel request instead of a completion request.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pre-authorisation">Pre-authorisation<a class="hash-link" aria-label="Direct link to Pre-authorisation" title="Direct link to Pre-authorisation" href="/fusion/docs/api-reference/fusion-api-fuel-extension#pre-authorisation">​</a></h3>
<div class="theme-admonition theme-admonition-success admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_BuS1"><p>A pre-authorisation must be followed by a completion or pre-authorisation cancel.</p></div></div>
<p>The pre-authorisation allows the Sale System to reserve funds on a customers card, enabling the payment to be completed at a later time.</p>
<p>The Sale System should follow the <a href="/fusion/docs/api-reference/fusion-api-fuel-extension#extended-saleitem">extended SaleItem</a> rules to ensure the <code>SaleItem[]</code> array is populated with valid <strong>requested</strong> fuel products, with the following exceptions:</p>
<ul>
<li><code>SaleItem.ItemAmount</code> is set to 0</li>
<li><code>SaleItem.Quantity</code> is set to 0</li>
<li>Sum of the items in the basket will not match the <code>RequestedAmount</code></li>
</ul>
<p>To perform a pre-authorisation:</p>
<ul>
<li>Construct a <a href="/fusion/docs/api-reference/fusion-satellite#payment">payment request</a></li>
<li>Set <a href="/fusion/docs/api-reference/data-model#paymenttype">PaymentRequest.PaymentData.PaymentType</a> to &quot;FirstReservation&quot;</li>
<li>Set <a href="/fusion/docs/api-reference/data-model#requestedamount">PaymentRequest.PaymentTransaction.AmountsReq.RequestedAmount</a> to the amount to reserve</li>
<li>Set <a href="/fusion/docs/api-reference/data-model#salereferenceid">PaymentRequest.SaleData.SaleReferenceID</a> to a unique <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier" target="_blank" rel="noopener noreferrer">UUID</a>. Note this value must be included in the matching completion.</li>
<li>Populate SaleItem[] with the <strong>requested</strong> products. Ensure that:<!-- -->
<ul>
<li>A fuel code is set in <code>CustomFields</code> for <strong>every</strong> item</li>
<li>Fuel product data is set in every <strong>fuel</strong> product, with both <code>ItemAmount</code> and <code>Quantity</code> set to 0.</li>
</ul>
</li>
<li>Handle the payment response<!-- -->
<ul>
<li>The <a href="/fusion/docs/api-reference/data-model#paymentbrandid">PaymentBrandID</a> field indicates the card type used</li>
<li>If a fuel card has been presented, the <a href="/fusion/docs/api-reference/data-model#salereferenceid">PaymentResponse.AllowedProductCodes</a> is populated with the <code>SaleItem.ProductCode</code> of items which are allowed on the card</li>
</ul>
</li>
<li>Ensure the following are recorded:<!-- -->
<ul>
<li><a href="/fusion/docs/api-reference/data-model#salereferenceid">PaymentRequest.SaleData.SaleReferenceID</a></li>
<li><a href="/fusion/docs/api-reference/data-model#poitransactionid">PaymentResponse.POIData.POITransactionID</a></li>
</ul>
</li>
</ul>
<p>If no <strong>requested</strong> products are allowed on the card presented, the POI Terminal will decline the payment request with the payment response set to:</p>
<ul>
<li><a href="/fusion/docs/api-reference/data-model#result">PaymentResponse.Response.Result</a> will be set to <code>Failure</code></li>
<li><a href="/fusion/docs/api-reference/data-model#errorcondition">PaymentResponse.Response.ErrorCondition</a> will be set to <code>PaymentRestriction</code></li>
<li><a href="/fusion/docs/api-reference/data-model#additionalresponse">PaymentResponse.Response.AdditionalResponse</a> will contain &quot;None of the requested products are allowed&quot;</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>In the example provided below, the Sale System has been requested a $200 pre-authorisation with the requested products &quot;Unleaded Petrol&quot;, &quot;Premium Unleaded 98&quot;, and &quot;Diesel&quot;. The POI Terminal has approved the pre-authorisation, indicating that the allowed products for the card presented are &quot;Unleaded Petrol&quot; and &quot;Premium Unleaded 98&quot;.</p></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Fusion API Fuel Extension pre-authorisation request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;SaleToPOIRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageCategory&quot;: &quot;Payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageType&quot;: &quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ServiceID&quot;: &quot;dac2d360-ade3-4a20-a724-ddae65188058&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleID&quot;: &quot;INT POS&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;INTP9205&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;PaymentRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;422543aba9fc4e9a9a6512517961513c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T04:33:56.8703432Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleReferenceID&quot;: &quot;8c583b0d-f1dc-4b7d-a13f-adb8bf0c761d&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentTransaction&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;AmountsReq&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;Currency&quot;: &quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RequestedAmount&quot;: 200.00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleItem&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemID&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductCode&quot;: &quot;XXXXXX123456&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitOfMeasure&quot;: &quot;Litre&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Quantity&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitPrice&quot;: 1.97,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductLabel&quot;: &quot;Unleaded Petrol&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;CustomFields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Key&quot;: &quot;FuelProductCodeShellCard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Value&quot;: &quot;2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemID&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductCode&quot;: &quot;YYYYYY123456&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitOfMeasure&quot;: &quot;Litre&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Quantity&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitPrice&quot;: 2.45,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductLabel&quot;: &quot;Premium Unleaded 98&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;CustomFields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Key&quot;: &quot;FuelProductCodeShellCard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Value&quot;: &quot;7&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemID&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductCode&quot;: &quot;ZZZZZZ123456&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitOfMeasure&quot;: &quot;Litre&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Quantity&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitPrice&quot;: 2.20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductLabel&quot;: &quot;Diesel&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;CustomFields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Key&quot;: &quot;FuelProductCodeShellCard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Value&quot;: &quot;4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},				</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentType&quot;: &quot;FirstReservation&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;SecurityTrailer&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Fusion API Fuel Extension pre-authorisation response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;SaleToPOIResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageCategory&quot;: &quot;Payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageType&quot;: &quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ServiceID&quot;: &quot;ec6b7b5f7330484eb533cd26a1306bb0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleID&quot;: &quot;INT POS&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;INTP9205&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;PaymentResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;Response&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;Result&quot;: &quot;Success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;422543aba9fc4e9a9a6512517961513c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T04:33:56.8703432Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleReferenceID&quot;: &quot;8c583b0d-f1dc-4b7d-a13f-adb8bf0c761d&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;65656db57a54cb8f801069ee&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T15:34:10.16+11:00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POIReconciliationID&quot;: &quot;64f7f88bd677b0362581bbb5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentResult&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentType&quot;: &quot;FirstReservation&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentInstrumentData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;PaymentInstrumentType&quot;: &quot;Card&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;CardData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;EntryMode&quot;: &quot;MagStripe&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;PaymentBrand&quot;: &quot;Shell Card&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;PaymentBrandID&quot;: &quot;0103&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;PaymentBrandLabel&quot;: &quot;Shell Card&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Account&quot;: &quot;Default&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Expiry&quot;: &quot;=720&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;MaskedPAN&quot;: &quot;7034305XXXXX2521&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;AmountsResp&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;Currency&quot;: &quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AuthorizedAmount&quot;: 200.00,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TotalFeesAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;CashBackAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;SurchargeAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TipAmount&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;OnlineFlag&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentAcquirerData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AcquirerID&quot;: &quot;560251&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;MerchantID&quot;: &quot;33435368&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AcquirerPOIID&quot;: &quot;M3AU41&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AcquirerTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;TransactionID&quot;: &quot;5de73ec1454dde9d70124b5d&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;TimeStamp&quot;: &quot;2023-11-28T04:34:10.320Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;ApprovalCode&quot;: &quot;554004&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;ResponseCode&quot;: &quot;00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;HostReconciliationID&quot;: &quot;20231129&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RRN&quot;: &quot;328132214339126&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;AllowedProductCodes&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;XXXXXX123456&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;YYYYYY123456&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			],			</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentReceipt&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;DocumentQualifier&quot;: &quot;SaleReceipt&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;IntegratedPrintFlag&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RequiredSignatureFlag&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;OutputContent&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputFormat&quot;: &quot;XHTML&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputXHTML&quot;: &quot;PHAgaWQ9InJlY2VpcHQtaW5mbyI+MjgvMTEvMjAyMyAxNTozNDoxMDxici8+TWVyY2hhbnQgSUQ6IFBPU01lcmNoYW50PGJyLz5UZXJtaW5hbCBJRDogSU5UUDkyMDU8L3A+PHAgaWQ9InJlY2VpcHQtZGV0YWlscyI+PGI+UHVyY2hhc2UgVHJhbnNhY3Rpb248L2I+PGJyLz5BbW91bnQ6ICQxNS4wODxici8+U2hlbGwgQ2FyZDogNDc2MTczWFhYWFhYMDExOSAoVCk8YnIvPkNyZWRpdCBBY2NvdW50PC9wPjxwIGlkPSJyZWNlaXB0LXJlc3VsdCI+PGI+QXBwcm92ZWQ8L2I+PGJyLz5SZWZlcmVuY2U6IDAwMDAgMDAxMyA0NTk4PGJyLz5BdXRoIENvZGU6IDU1NDAwNDxici8+QUlEOiBBMDAwMDAwMDAzMTAxMDxici8+QVRDOiAwMDAxPGJyLz5UVlI6IDAwMDAwMDAwMDA8YnIvPkFSUUM6IEQ5Mzc2MDIwMDgzOEQwNzM8L3A+&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;SecurityTrailer&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="completion">Completion<a class="hash-link" aria-label="Direct link to Completion" title="Direct link to Completion" href="/fusion/docs/api-reference/fusion-api-fuel-extension#completion">​</a></h3>
<div class="theme-admonition theme-admonition-success admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_BuS1"><p>A <code>RequestedAmount</code> of a completion must be equal, or less than pre-authorisation <code>RequestedAmount</code>.</p></div></div>
<p>Completion captures payment of the amount previously reserved through pre-authorisation.</p>
<p>The Sale System should follow the <a href="/fusion/docs/api-reference/fusion-api-fuel-extension#extended-saleitem">extended SaleItem</a> rules to ensure the <code>SaleItem[]</code> array is populated with with valid fuel product information.</p>
<p>All products included in a completion must have previously been returned in <code>AllowedProductCodes</code> of the pre-authorisation.</p>
<p>To perform a completion:</p>
<ul>
<li>Construct a <a href="/fusion/docs/api-reference/fusion-satellite#payment">payment request</a></li>
<li>Set <a href="/fusion/docs/api-reference/data-model#paymenttype">PaymentRequest.PaymentData.PaymentType</a> to &quot;Completion&quot;</li>
<li>Set <a href="/fusion/docs/api-reference/data-model#requestedamount">PaymentRequest.PaymentTransaction.AmountsReq.RequestedAmount</a> the completion amount. Must be less than or equal to reserved amount.</li>
<li>Set <a href="/fusion/docs/api-reference/data-model#salereferenceid">PaymentRequest.SaleData.SaleReferenceID</a> to the same <code>SaleReferenceID</code> as used in the pre-authoristaion request</li>
<li>Set <a href="/fusion/docs/api-reference/data-model#poitransactionid">PaymentRequest.PaymentTransaction.OriginalPOITransaction.POITransactionID</a> to the value returned in <a href="/fusion/docs/api-reference/data-model#poitransactionid">PaymentResponse.POIData.POITransactionID</a> from the original pre-authorisation response</li>
<li>Populate <code>SaleItem[]</code> array with the purchased products, following <a href="/fusion/docs/api-reference/fusion-api-fuel-extension#extended-saleitem">extended SaleItem</a> rules<!-- -->
<ul>
<li>Set a fuel code in <code>CustomFields</code> for <strong>every</strong> item</li>
<li>Set fuel product data in every <strong>fuel</strong> product</li>
</ul>
</li>
</ul>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Fusion API Fuel Extension completion request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;SaleToPOIRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageCategory&quot;: &quot;Payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageType&quot;: &quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ServiceID&quot;: &quot;ec6b7b5f7330484eb533cd26a1306bb0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleID&quot;: &quot;INT POS&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;INTP9205&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;PaymentRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;422543aba9fc4e9a9a6512517961513c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T04:33:56.8703432Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleReferenceID&quot;: &quot;8c583b0d-f1dc-4b7d-a13f-adb8bf0c761d&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentTransaction&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;AmountsReq&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;Currency&quot;: &quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RequestedAmount&quot;: 83.71</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;OriginalPOITransaction&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;TransactionID&quot;: &quot;65656db57a54cb8f801069ee&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;TimeStamp&quot;: &quot;2023-11-28T15:34:10.16+11:00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},				</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleItem&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemID&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductCode&quot;: &quot;XXXXXX123456&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitOfMeasure&quot;: &quot;Litre&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Quantity&quot;: 42.49,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;UnitPrice&quot;: 1.97,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ItemAmount&quot;: 83.71,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;ProductLabel&quot;: &quot;Unleaded Petrol&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;CustomFields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Key&quot;: &quot;FuelProductCodeShellCard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Type&quot;: &quot;String&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&quot;Value&quot;: &quot;2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					}		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentType&quot;: &quot;Completion&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;SecurityTrailer&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Fusion API Fuel Extension completion response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;SaleToPOIResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageCategory&quot;: &quot;Payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageType&quot;: &quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ServiceID&quot;: &quot;ec6b7b5f7330484eb533cd26a1306bb0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleID&quot;: &quot;INT POS&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;INTP9205&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;PaymentResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;Response&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;Result&quot;: &quot;Success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;422543aba9fc4e9a9a6512517961513c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T04:33:56.8703432Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleReferenceID&quot;: &quot;8c583b0d-f1dc-4b7d-a13f-adb8bf0c761d&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;982309876239870423987&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T15:34:10.16+11:00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POIReconciliationID&quot;: &quot;64f7f88bd677b0362581bbb5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentResult&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentType&quot;: &quot;Completion&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentInstrumentData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;PaymentInstrumentType&quot;: &quot;Card&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;CardData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;EntryMode&quot;: &quot;MagStripe&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;PaymentBrand&quot;: &quot;Shell Card&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;PaymentBrandID&quot;: &quot;0103&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;PaymentBrandLabel&quot;: &quot;Shell Card&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Account&quot;: &quot;Default&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;Expiry&quot;: &quot;=720&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;MaskedPAN&quot;: &quot;7034305XXXXX2521&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;AmountsResp&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;Currency&quot;: &quot;AUD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AuthorizedAmount&quot;: 83.71,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TotalFeesAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;CashBackAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;SurchargeAmount&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TipAmount&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;OnlineFlag&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;PaymentAcquirerData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AcquirerID&quot;: &quot;560251&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;MerchantID&quot;: &quot;33435368&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AcquirerPOIID&quot;: &quot;M3AU41&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;AcquirerTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;TransactionID&quot;: &quot;5de73ec1454dde9d70124b5d&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;TimeStamp&quot;: &quot;2023-11-28T04:34:10.320Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;ApprovalCode&quot;: &quot;554004&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;ResponseCode&quot;: &quot;00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;HostReconciliationID&quot;: &quot;20231129&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RRN&quot;: &quot;328132214339126&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentReceipt&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;DocumentQualifier&quot;: &quot;SaleReceipt&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;IntegratedPrintFlag&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RequiredSignatureFlag&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;OutputContent&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputFormat&quot;: &quot;XHTML&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputXHTML&quot;: &quot;PHAgaWQ9InJlY2VpcHQtaW5mbyI+MjgvMTEvMjAyMyAxNTozNDoxMDxici8+TWVyY2hhbnQgSUQ6IFBPU01lcmNoYW50PGJyLz5UZXJtaW5hbCBJRDogSU5UUDkyMDU8L3A+PHAgaWQ9InJlY2VpcHQtZGV0YWlscyI+PGI+UHVyY2hhc2UgVHJhbnNhY3Rpb248L2I+PGJyLz5BbW91bnQ6ICQxNS4wODxici8+U2hlbGwgQ2FyZDogNDc2MTczWFhYWFhYMDExOSAoVCk8YnIvPkNyZWRpdCBBY2NvdW50PC9wPjxwIGlkPSJyZWNlaXB0LXJlc3VsdCI+PGI+QXBwcm92ZWQ8L2I+PGJyLz5SZWZlcmVuY2U6IDAwMDAgMDAxMyA0NTk4PGJyLz5BdXRoIENvZGU6IDU1NDAwNDxici8+QUlEOiBBMDAwMDAwMDAzMTAxMDxici8+QVRDOiAwMDAxPGJyLz5UVlI6IDAwMDAwMDAwMDA8YnIvPkFSUUM6IEQ5Mzc2MDIwMDgzOEQwNzM8L3A+&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;SecurityTrailer&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pre-authorisation-cancel">Pre-authorisation cancel<a class="hash-link" aria-label="Direct link to Pre-authorisation cancel" title="Direct link to Pre-authorisation cancel" href="/fusion/docs/api-reference/fusion-api-fuel-extension#pre-authorisation-cancel">​</a></h3>
<p>A successful pre-authorisation must be either completed, or cancelled. To cancel a pre-authorisation, the Sale System sends a <code>ReversalRequest</code>.</p>
<p>To perform a pre-authorisation cancel:</p>
<ul>
<li>Construct a <a href="/fusion/docs/api-reference/fusion-satellite#voidreversal">reversal request</a></li>
<li>Set <a href="/fusion/docs/api-reference/data-model#poitransactionid">ReversalRequest.OriginalPOITransaction.POITransactionID</a> to the value returned in <a href="/fusion/docs/api-reference/data-model#poitransactionid">PaymentResponse.POIData.POITransactionID</a> from the original pre-authorisation response</li>
<li>Set <a href="/fusion/docs/api-reference/data-model#salereferenceid">ReversalRequest.SaleData.SaleReferenceID</a> to the same <code>SaleReferenceID</code> as used in the pre-authoristaion request</li>
<li>Set <code>ReversalReason</code> to <code>&quot;MerchantCancel&quot;</code>.</li>
</ul>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Fusion API Fuel Extension reversal request</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;SaleToPOIRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageCategory&quot;: &quot;Reversal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageType&quot;: &quot;Request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ServiceID&quot;: &quot;ec6b7b5f7330484eb533cd26a1306bb0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleID&quot;: &quot;INT POS&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;INTP9205&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;ReversalRequest&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleTransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;422543aba9fc4e9a9a6512517961513c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T04:33:56.8703432Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;SaleReferenceID&quot;: &quot;8c583b0d-f1dc-4b7d-a13f-adb8bf0c761d&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},			</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;OriginalPOITransaction&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;65656db57a54cb8f801069ee&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T15:34:10.16+11:00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ReversalReason&quot;: &quot;MerchantCancel&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Fusion API Fuel Extension reversal response</p></summary><div><div class="collapsibleContent_i85q"><p></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;SaleToPOIResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;MessageHeader&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageClass&quot;: &quot;Service&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageCategory&quot;: &quot;Reversal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;MessageType&quot;: &quot;Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;ServiceID&quot;: &quot;ec6b7b5f7330484eb533cd26a1306bb0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;SaleID&quot;: &quot;INT POS&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIID&quot;: &quot;INTP9205&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;ReversalResponse&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;POIData&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POITransactionID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TransactionID&quot;: &quot;982309876239870423987&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;TimeStamp&quot;: &quot;2023-11-28T15:34:10.16+11:00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;POIReconciliationID&quot;: &quot;64f7f88bd677b0362581bbb5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;PaymentReceipt&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;DocumentQualifier&quot;: &quot;SaleReceipt&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;IntegratedPrintFlag&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;RequiredSignatureFlag&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					&quot;OutputContent&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputFormat&quot;: &quot;XHTML&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&quot;OutputXHTML&quot;: &quot;PHAgaWQ9InJlY2VpcHQtaW5mbyI+MjgvMTEvMjAyMyAxNTozNDoxMDxici8+TWVyY2hhbnQgSUQ6IFBPU01lcmNoYW50PGJyLz5UZXJtaW5hbCBJRDogSU5UUDkyMDU8L3A+PHAgaWQ9InJlY2VpcHQtZGV0YWlscyI+PGI+UHVyY2hhc2UgVHJhbnNhY3Rpb248L2I+PGJyLz5BbW91bnQ6ICQxNS4wODxici8+U2hlbGwgQ2FyZDogNDc2MTczWFhYWFhYMDExOSAoVCk8YnIvPkNyZWRpdCBBY2NvdW50PC9wPjxwIGlkPSJyZWNlaXB0LXJlc3VsdCI+PGI+QXBwcm92ZWQ8L2I+PGJyLz5SZWZlcmVuY2U6IDAwMDAgMDAxMyA0NTk4PGJyLz5BdXRoIENvZGU6IDU1NDAwNDxici8+QUlEOiBBMDAwMDAwMDAzMTAxMDxici8+QVRDOiAwMDAxPGJyLz5UVlI6IDAwMDAwMDAwMDA8YnIvPkFSUUM6IEQ5Mzc2MDIwMDgzOEQwNzM8L3A+&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			&quot;Response&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				&quot;Result&quot;: &quot;Success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="accreditation">Accreditation<a class="hash-link" aria-label="Direct link to Accreditation" title="Direct link to Accreditation" href="/fusion/docs/api-reference/fusion-api-fuel-extension#accreditation">​</a></h2>
<p>There are an expanded set of test cases in the Fusion <a href="/fusion/docs/testing">accreditation</a> to support payments via the Fusion API Fuel Extension.</p>
<p><a href="mailto:integrations@datameshgroup.com" target="_blank" rel="noopener noreferrer">Contact the DataMesh Integrations Team</a> to discuss the accreditation process.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/fusion/docs/api-reference/fusion-satellite"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Fusion Satellite</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/fusion/docs/api-reference/fusion-api-stored-value-extension"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Fusion API Stored Value Extension</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#what-is-a-fuel-card">What is a fuel card</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#mandatory-features">Mandatory features</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#extended-saleitem">Extended SaleItem</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#consolidation-of-items">Consolidation of items</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#fuel-sale-item-details">Fuel sale item details</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#fuel-product-code">Fuel product code</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#what-is-a-fuel-product-code">What is a fuel product code</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#setting-the-fuel-product-code">Setting the fuel product code</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#maximum-number-of-product-codes">Maximum number of product codes</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#supporting-multiple-fuel-product-codes">Supporting multiple fuel product codes</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#discounts-and-surcharges">Discounts and surcharges</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#example-fuel-api-basket">Example fuel API basket</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#split-payments">Split payments</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#purchase">Purchase</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#refund">Refund</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#pre-authorisation-payment-flow">Pre-authorisation payment flow</a><ul><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#pre-authorisation">Pre-authorisation</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#completion">Completion</a></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#pre-authorisation-cancel">Pre-authorisation cancel</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/fusion/docs/api-reference/fusion-api-fuel-extension#accreditation">Accreditation</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">2024-12-02</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">Useful Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.datameshgroup.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">DataMesh Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/datameshgroup" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:integrations@datameshgroup.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">DataMesh<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 <a href="https://www.datameshgroup.com/">DataMesh Group</a>.</div></div></div></footer></div>
</body>
</html>