---
sidebar_position: 6
---

# Appendix

## Glossary of terms

- **API** - application programming interface.
- **Card holder** - the owner of a credit or debit card.
- **Cashier** - operator of the Sale System.
- **CHD** - cardholder data. Personally identifiable information associated with a person who has a credit or debit card.
- **JSON** - JavaScript object notation.
- **MAC** - message authentication code.
- **Merchant** - a business entity which can accept payments.
- **Payment** - a request sent from a `Sale System` to a `POI System` to perform an operation on a `Card holders` card.
- **Payment receipt** - receipt generated by the `POI Terminal` which contains information about the payment
- **PIN** - personal identification number.
- **POI** - point of interaction.
- **POI System** - system which co-ordinates communication between a Sale System and POI Terminal. i.e. DataMesh Unify.
- **POI Terminal** - the physical PIN entry device which processes the card payment. i.e. DataMesh Satellite.
- **POS** - point of sale.
- **Sale** - a sale, created by a `Cashier` on a `Sale System`, with associated `Sale Items`. A Sale may be paid with one or more `Payments`.
- **Sale item** - a item sold to a card holder as a part of a sale.
- **Sale receipt** - the receipt generated by the `Sale System` which contains all sale information. The `Payment receipt` may be embedded into the `Sale receipt`
- **Sale system** - the system used to process merchant sales. The POS.
- **Satellite app** - the DataMesh payment application 
- **Unify** - the DataMesh payment switch
- **UUID** - universally unique identifier.


## Cloud API - Migrating ProtocolVersion 3.1 to 3.1-dmg

The DataMesh API supports two versions. 
- "3.1" is based on the Nexo 3.1 standard
- "3.1-dmg" is "3.1" with additional fields added by DataMesh which are outside the Nexo standard (e.g. surcharge)

Breaking changes when moving from "3.1" to "3.1-dmg"

- [MessageHeader.ProtocolVersion](/docs/api-reference/data-model#protocolversion) should be set to "3.1-dmg"
- Tip amount is now present in [PaymentResponse.PaymentResult.AmountsResp.TipAmount](/docs/api-reference/data-model#tipamount).
- Surchage amount is now present in [PaymentResponse.PaymentResult.AmountsResp.SurchargeAmount](/docs/api-reference/data-model#surchargeamount).
- `PaymentResponse.PaymentResult.PaymentReceipt` is now an array of receipts. This was a single object in "3.1"
- For a successful payment, the acquirer STAN is returned in `PaymentResponse.PaymentResult.PaymentAcquirerData.STAN`. 
- For a successful payment, the acquirer RRN is returned in `PaymentResponse.PaymentResult.PaymentAcquirerData.RRN`. 
- POS should support the "3.1-dmg" `mandatory features checklist`
  - Include [product data](/docs/api-reference/fusion-cloud#product-data) in each payment request
  - Support for [purchase](/docs/api-reference/fusion-cloud#perform-a-purchase) and [refund](/docs/api-reference/fusion-cloud#perform-a-refund) payment types
  - Additional fields will be added to the message specification over time. To ensure forwards compatibility the Sale System must ignore when extra objects and fields are present in response messages. This includes valid MAC handling in the SecurityTrailer.
  - Support for TLS and other [security requirements](/docs/api-reference/fusion-cloud#security-requirements)
  - [Settings user interface](#settings-user-interface)
  - [Payments user interface](#payment-user-interface) which handles the `Initial UI`, `Final UI`, and `cancelling a sale in progress`
  - Handle error scenarios as outlined in [error handling](/docs/api-reference/fusion-cloud#error-handling)
  - Ensure Sale System provides a unique [payment identification](#payment-identification)


## Satellite API - Migrating to new API

The previous Satellite API has been updated so that both the Fusion Satellite API and Fusion Cloud API share a common data model.

The following is a guide for updating a previous integration to the new data model. 

### Intent Request

Old Field            | New Field                                                         | Notes                |
-------------------- | -------------------                                               | -------------------- |
TransType            | [PaymentData.PaymentType](/docs/api-reference/data-model#paymenttype)           |                      |
Amount               | [PaymentTransaction.AmountsReq.RequestedAmount](/docs/api-reference/data-model#requestedamount) | Amount was represented as an integer 'cents' in the previous API, where the new API `RequestedAmount` is represented as decimal dollar and cents | 
CashOut              | [PaymentTransaction.AmountsReq.CashBackAmount](/docs/api-reference/data-model#cashbackamount) | CashOut was represented as an integer 'cents' in the previous API, where the new API `CashBackAmount` is represented as decimal dollar and cents | 
POS                  | ApplicationName | Set as extra data in the intent, not part of the `Request` json object |
Source               | SoftwareVersion | Only include the software version, not the POS name. Set as extra data in the intent, not part of the `Request` json object |


### Intent Response

Old Field            | New Field                                                         | Notes                |
-------------------- | -------------------                                               | -------------------- |
TransState           | [Response.Result](/docs/api-reference/data-model#result)                        |                      |
TransID              | [POIData.POITransactionID.TransactionID](/docs/api-reference/data-model#poitransactionid) | |
TerminalID           | [PaymentResult.PaymentAcquirerData.AcquirerPOIID](/docs/api-reference/data-model#acquirerpoiid) | |
PAN                  | [PaymentResult.PaymentInstrumentData.CardData.MaskedPAN](/docs/api-reference/data-model#maskedpan) |  |
Totalamount          | [PaymentResult.AmountsResp.AuthorizedAmount](/docs/api-reference/data-model#authorizedamount) | Totalamount was represented as an integer 'cents' in the previous API, where the new API `AuthorizedAmount` is represented as decimal dollar and cents. Note the may not match [AuthorizedAmount](/docs/api-reference/data-model#authorizedamount) may not match the [RequestedAmount](/docs/api-reference/data-model#requestedamount). If implementing tipping or surcharge, the POS should also check for [TipAmount](/docs/api-reference/data-model#tipamount) and [SurchargeAmount](/docs/api-reference/data-model#surchargeamount). |
STAN                 | [PaymentResult.PaymentAcquirerData.STAN](/docs/api-reference/data-model#stan) |  |
AcqRRN               | [PaymentResult.PaymentAcquirerData.RRN](/docs/api-reference/data-model#rrn) |  |
TransDateTime        | [POIData.POITransactionID.TimeStamp](/docs/api-reference/data-model#poitransactionid) |  |
EntryMode            | [PaymentResult.PaymentInstrumentData.CardData.EntryMode](/docs/api-reference/data-model#entrymode) |  |
MerchantID           | [PaymentResult.PaymentAcquirerData.MerchantID](/docs/api-reference/data-model#merchantid) |  |
HostErrorCode        | [PaymentResult.PaymentAcquirerData.ResponseCode](/docs/api-reference/data-model#responsecode) |  |
TokenValue           | [PaymentResult.PaymentInstrumentData.PaymentToken.TokenValue](/docs/api-reference/data-model#tokenvalue) |  |
    

## Terminal configuration 

### Enable access to the home screen

In a production environment a terminal will typically be locked to the payment application, however in development and test it is useful to enable access to the home screen. 

- In the Satellite payment app, tap the settings icon (⚙)

![](/img/pinpad-merchant-password-270x480.png)

- Enter `0000` as the merchant password and ensure the following are ticked
  - Navigation bar
  - Status Bar

![](/img/pinpad-settings-270x480.png)

- Tap the back icon (⬅) 
- Hit the "home" button on the terminal to view the home page


### Configure terminal environment

Your development terminal will be conncted to the UAT environment, which is the correct environment for testing. 

To confirm or change the environment:

- Launch the Satellite payment app
- Tap the settings icon (⚙)
- Enter 8801 as the merchant password
- You'll be presented with a "Change Host URL" dialog
- Ensure the URL is `wss://test.datameshgroup.com.au/peduat1` and tap Enter

![](/img/pinpad-host-url-270x480.png)

- Restart the Satellite payment app 
  - Tap the task switcher button
  - Close the Satellite payment app
  - Launch the Satellite payment app again 

### Update settings

The terminal will periodically connect to the host and download updated settings.

To force a settings update:

- Make sure that your terminal has internet/mobile data connection
- Launch the Satellite payment app
- Tap the "info" icon (ⓘ) at the top of the screen

![](/img/satellite-i.png)
- The terminal will update settings from the host
- Then current software version, terminal ID, merchant ID, and the list of POS paired with the terminal will be displayed on the screen

![](/img/pinpad-info.png)

### Update software

The terminal will periodically connect to the host and update to the configured software version. 

To force a software update:

- Launch the Satellite payment app
- Tap the settings icon (⚙) at the top of the screen
- Enter `0000` as the merchant password
- Select the `SOFTWARE UPGRADE` option and select `YES` on the confirmation dialog
- The software will be downloaded, and Satellite will restart

### Update firmware

:::danger
Before updating the terminal firmware, please contact the DataMesh Integration Team at <a href="mailto:integrations@datameshgroup.com">integrations@datameshgroup.com</a> to confirm that your terminal setting has been configured with the correct firmware version.
:::

<details>

<summary>
To initiate a firmware update
</summary>

<p>

- Confirm with DataMesh if the terminal firmware update is required.  If the update is required, confirm with DataMesh that the terminal's firmware configuration has been set correctly
- Set Terminal Display `Sleep` settings to `Never`
- Launch the Satellite payment app
- Tap the settings icon (⚙) at the top of the screen
- Enter `51201202` as the merchant password
- Select `YES` on the Download/Install Firmware confirmation dialog
- The firmware will then be downloaded 
- Please wait for a few minutes for the terminal to install the update and reboot multiple times, as required
- Once the firmware update is complete, the terminal will reboot and the Satellite application will be launched

  ![](/img/pinpad-update-firmware-complete-270x418.png)


</p>
</details>

#### PAX - Firmware Version

Please refer to the `Build number` field of the `Device status` for the Firmware version.

  ![](/img/pinpad-build-number-270x460.png)

### Checking Wi-Fi connection

To check Wi-FI connection status at any time:

- Swipe down from the top of the screen to open the notification shade
- Swipe down again to expand the notification shade
- Top left icon will be your Wi-Fi status and connected access point

### QR code pairing

:::info
To pair your Sale System through QR code: 
- your Sale System must support [QR code pairing](/docs/getting-started#qr-code-pairing)
- your Satellite payment app Software Version must be at least 46J.  
  - The Software Version can be found at the top portion of Satellite's [info screen](#update-settings).
- the Pair With POS option must be enabled on your Satellite payment app

If you are unable to see the <code>Pair With POS</code> option on your Satellite payment app, please contact the DataMesh Integration Team at <a href="mailto:integrations@datameshgroup.com">integrations@datameshgroup.com</a>.
:::

- Launch your Sale System and access the option to display the QR code for pairing
- In the Satellite payment app, tap the settings icon (⚙)

![](/img/pinpad-merchant-password-270x480.png)
- Enter `0000` as the merchant password
- Tap the `Pair With POS` option
- Scan the pairing QR code displayed by your Sale System 
- After the pairing QR code has been scanned, follow the instructions on the Satellite payment app

![](/img/pair-with-pos-setting.png)

#### Pairing Result
- If the pairing was successful, you'll need to continue the pairing process in the Sale System

![](/img/pair-with-pos-successful.png)

- If the pairing was *not* successful and the error displayed on the Satellite payment app starts with:
  - POS Config Error
    -   Please contact your Sale System provider and inform them about the error.
  - Terminal Config Error (and all other errors)
    -   Please contact the DataMesh Integrations team at <a href="mailto:integrations@datameshgroup.com">integrations@datameshgroup.com</a>.

### Android Debug Bridge (ADB)

:::warning
This section is only applicable to _debug development_ POI terminals.
:::

To execute ADB commands, download the Android SDK Platform Tools:
1. If you have not done this previously, download the standalone [Android SDK Platform Tools](https://developer.android.com/tools/releases/platform-tools) package:
  - [Windows](https://dl.google.com/android/repository/platform-tools-latest-windows.zip)
  - [Mac](https://dl.google.com/android/repository/platform-tools-latest-darwin.zip)
  - [Linux](https://dl.google.com/android/repository/platform-tools-latest-linux.zip)
2. Extract the contents of the downloaded Zip file into an easily accessible folder (e.g. C:\Android-Tools).

3. Open the File Explorer and browse to where you extracted the contents of the Zip file and copy the full path.

![](/img/adb-location.png)

_This path will also be the location of your ADB log file._

4. Use a USB cable to connect your POI Terminal to your PC.

5. Make sure that your POI Terminal is the only Android device connected to your PC.

6. Open the Command Prompt (Windows) or Terminal (macOS/Linux).

7. Navigate to the location where you extracted the contents of the Zip file.

8. Verify the POI Terminal connection by typing the following command and pressing Enter:
```js
adb devices
```

_This command lists all connected Android devices. Make sure your POI Terminal is listed, and its status is “device.”_

_**If not**, ensure USB debugging is enabled and that your POI Terminal is connected properly._

![](/img/adb-devices.png)

### Device Logs

During development, DataMesh may request device logs from your development POI Terminal using the Android Debug Bridge (ADB).  

To capture logs from your POI Terminal, please refer to **Steps 1 to 8** in the [Android Debug Bridge](#android-debug-bridge-adb) section and then, proceed with the steps listed below.

9. If you see your POI Terminal's serial number and its status is _device_ (when running the _adb devices_ command), run the following command (in the same Command Prompt (Windows) or Terminal (macOS/Linux) window where you executed the _adb devices_ command) to start capturing logs:
```js
adb logcat > android-logs.txt
```
_This command tells ADB to capture the device logs and save them to a file named "android-logs.txt” in the current directory._
- Once logging has been enabled, you may now start performing your specific test case(s).
- Once you’ve replicated the issue or captured enough data, stop capturing logs by pressing _Ctrl + C_ in the Command Prompt or Terminal window where ADB is running.

![](/img/adb-stop-logging.png)
- Open the File Explorer and browse to the location of your ADB log file.

![](/img/adb-log-file.png)
- Zip (if the size is too big), copy, and share the ADB log file to DataMesh.

### Loading a custom APK using the Android Debug Bridge (ADB)

To install the Satellite APK (or a custom APK) on your development POI Terminal using the Android Debug Bridge (ADB), please refer to **Steps 1 to 8** in the [Android Debug Bridge](#android-debug-bridge-adb) section and then, proceed with the steps listed below.

9. If you see your POI Terminal's serial number and its status is _device_ (when running the _adb devices_ command), run the following command (in the same Command Prompt (Windows) or Terminal (macOS/Linux) window where you executed the _adb devices_ command) to install the Satellite APK or custom APK:
```js
adb -s DeviceSerialNumber install "APKFullFilePath"
```
- Replace:
  - _DeviceSerialNumber_ with your POI Terminal's serial number listed in the _adb devices_ result
  - _APKFullFilePath_ with the full APK file path (e.g. C:\Android-tools\Satellite.apk)  
- Please wait until installation is complete before accessing the installed application on your POI Terminal.
- Only if you're installing the Satellite APK **and** after the Satellite APK has been installed successfully:
    - Launch the Satellite application
    - Follow the prompts
    - Tap the "info" icon (ⓘ) at the top of the Satellite screen
    - Restart your terminal

### PAX

#### Connect to Wi-Fi

The terminal can be connected to Wi-Fi where cellular access isn't avaiable. 

- Press the Home button 
- Launch the "Settings" app (⚙icon)

  ![](/img/pinpad-launch-settings-270x480.png)

- If it asks for a password, enter `pax9876@@`- if this doesn't work, please try `pax9876` or `9876`
- Select the Wi-Fi option and tap the `On` toggle switch - Wi-Fi is enabled when the toggle switch is green
- Choose your Wi-Fi network and enter the password
- You should see your Wi-Fi network with a "Connected" status underneath

#### Loading a custom APK

For Fusion Satellite integrations, the DataMesh _debug development_ POI terminals are configured to allow loading of custom APKs.

If Satellite was installed previously on your _debug development_ POI terminal, you'll need to unistall the old version before installing the updated version of Satellite.

<details>

<summary>
Uninstall previous version of Satellite
</summary>

<p>

  - Only on a _debug development_ POI terminal and if you require to install a different version of Satellite, you'll need to uninstall any previous version of Satellite:
    - Long press on the Satellite application and drag it to _Remove_

      ![](/img/Pax-UninstallSatellite.png)        
</p>
</details>

There are two methods for installing an APK: 

<details>

<summary>
Copy the APK to the terminal
</summary>

<p>

  - Connect the USB port on the side of the POI Terminal to your PC
  - The terminal will appear as "MTP USB Device" (or "A920" or "A930") in the PC file manager
  - Navigate to "MTP USB Device", and copy your APK to the terminal "Download" directory
  - ![](/img/load-apk-01.png)  
  - On the terminal, launch "File Manager" and navigate to the "Download" directory
  - ![](/img/load-apk-02.png)  
  - Tap your APK version and accept the install.
  - ![](/img/load-apk-03.png)  

</p>
</details>

<details>

<summary>
Install using the Android Debug Bridge (ADB)
</summary>

<p>

  - Please refer to the [Loading a custom APK using the Android Debug Bridge (ADB)](#loading-a-custom-apk-using-the-android-debug-bridge-adb) section.

</p>
</details>

### Ingenico

#### Connect to Wi-Fi

The terminal can be connected to Wi-Fi where cellular access isn't avaiable. 

- Press the Home button
- Launch the "Settings" app (⚙icon)
- If it asks for a password, enter `350000`
- Select Network & Internet option and then select Wi-Fi
- Tap the `Use Wi-Fi` toggle switch - Wi-Fi is enabled when the toggle switch is green
- Choose your Wi-Fi network and enter the password
- You should see your Wi-Fi network with a "Connected" status underneath

#### Loading a custom APK

For Fusion Satellite integrations, the DataMesh _debug development_ POI terminals are configured to allow loading of custom APKs.

If Satellite was installed previously on your _debug development_ POI terminal, you'll need to unistall the old version before installing the updated version of Satellite.

<details>

<summary>
Uninstall previous version of Satellite
</summary>

<p>

  - Only on a _debug development_ POI terminal, uninstall any previous version of Satellite:
    - Long press on the Satellite application and drag it to _Uninstall_

      ![](/img/Ingenico-UninstallSatellite.png)        
</p>
</details>

There are two methods for installing an APK: 

<details>

<summary>
Install through AxToolkit
</summary>

<p>

  - Uninstall Satellite.
  - Connect the USB port on the side of the POI Terminal to your PC
  - Install AxToolkit (Contact the DataMesh Integrations team at <a href="mailto:integrations@datameshgroup.com">integrations@datameshgroup.com</a> if you don't have an AxToolkit)
  - Open the AxToolkit.
  - Access Tools > Software Manager > Run
    ![](/img/Ingenico-AxToolkit.png)  
  - `Append` the file that you want to be installed and click on `Start`
    ![](/img/Ingenico-AppendAndStart.png)  
  - After the Satellite APK has been installed successfully:
    - Launch the Satellite application
    - Follow the prompts
    - Tap the "info" icon (ⓘ) at the top of the screen
    - Restart your terminal


</p>
</details>

<details>

<summary>
Install using the Android Debug Bridge (ADB)
</summary>

<p>

  - Please refer to the [Loading a custom APK using the Android Debug Bridge (ADB)](#loading-a-custom-apk-using-the-android-debug-bridge-adb) section.

</p>
</details>


#### Accessing the terminal file(s)

In certain scenarios, you might need to access files from the terminal (e.g. screenshots)

<details>

<summary>
Access the terminal file(s)
</summary>

<p>
  - Press the Home button
  - Launch the "Settings" app (⚙icon)
  - If it asks for a password, enter `350000`
  - Select the _Connected devices_ option and then select _USB_
  - Tap the _File Transfer_ under the _USE USB FOR_ section
  - Then, tap on the back button  
  - Connect the USB port on the side of the POI Terminal to your PC
  - The terminal will appear as _DX8000_ in the PC file manager
  - Navigate to _DX8000_ > _Internal shared storage_ and access/copy the file that you require from the terminal to your PC
  ![](/img/Ingenico-DX8000Folder.png)  

</p>
</details>

#### Device Renewal

Development mode on Ingenico devices has a 3-month expiration. 

Once your development device has expired or when required, you will need to request for another signed Auth file to continue using it.

:::info
Please contact the DataMesh Integrations team at <a href="mailto:integrations@datameshgroup.com">integrations@datameshgroup.com</a> to request for :
  - your device's Auth file and
  - the AxToolkit installer, if you don't have it.

Please provide your terminal’s Serial Number when making a request.  
:::

<details>

<summary>
Install the Auth File via AxToolKit
</summary>

<p>
Once you’ve received the Auth File from DataMesh, please install it using the instructions below:
  - Install the AxToolkit.
  - Make sure that your Ingenico device is connected to your PC but is turned OFF.
  - Open the AxToolkit.
  - Navigate to the Tools section, find Device Setup and click Run
    ![](/img/Ingenico-DeviceSetup.png)  
  - Expand Development Mode with TECS Auth File
    ![](/img/Ingenico-DevelopmentModeTECSFile.png)    
  - Turn ON your Ingenico device.  
  - After ~60 seconds, once Device Setup has detected your device (indicated at the top of the window)
  - Scroll to the Switch to Dev Mode with Auth File, click on Browse and import the Auth File that DataMesh has provided, and click Start

    ![](/img/Ingenico-SwithToDevMode.png)
  - Wait for the device to be refreshed (~60 seconds)
    ![](/img/Ingenico-DeviceSetupRefresh.png)    
  - Once update has been successful, you should see a _Development Mode_ text/logo on the main screen

    ![](/img/Ingenico-DevelopmentMode.png)    

</p>
</details>

## Change log

### 2024-02-01
* Added [Perform a balance inquiry (events mode)](/docs/api-reference/fusion-app#perform-a-balance-inquiry-events-mode)
* Added Fusion App endpoints for [balance inquiry](/docs/api-reference/fusion-app#balance-inquiry) and [stored value](/docs/api-reference/fusion-app#stored-value) requests
* Updated Fusion App [payments](/docs/api-reference/fusion-app#payments) endpoints

### 2024-01-18 
* Added [Getting started → Product level blocking (PLB)](/docs/getting-started#product-level-blocking-plb)
* Added [Getting started → Restricted payment brands](/docs/getting-started#restricted-payment-brands)
* Updated [AllowedPaymentBrand](/docs/api-reference/data-model#allowedpaymentbrand)

### 2024-02-19
* Updated AllowedPaymentBrands references to AllowedPaymentBrand

### 2024-04-11
* Added [Device Renewal](#device-renewal)

### 2024-05-06
* Added CurrentBalance and Currency to [PaymentResponse](/docs/api-reference/data-model#payment-response)

### 2024-05-20
* Added [Device Logs](#device-logs)
