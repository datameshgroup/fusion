"use strict";(self.webpackChunkfusion_doc=self.webpackChunkfusion_doc||[]).push([[44],{978:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>l,toc:()=>a});var r=n(5893),s=n(1151);const d={sidebar_position:4},i="Fusion API Fuel Extension",l={id:"api-reference/fusion-api-fuel-extension",title:"Fusion API Fuel Extension",description:"The Fusion API Fuel Extension is of features and requirements which extend the Fusion API Core which adds support for current and future fuel payment types accepted by DataMesh. (e.g. FleetCard, Shell Card, MotorPass etc)",source:"@site/docs/api-reference/fusion-api-fuel-extension.md",sourceDirName:"api-reference",slug:"/api-reference/fusion-api-fuel-extension",permalink:"/fusion/docs/api-reference/fusion-api-fuel-extension",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Fusion Satellite",permalink:"/fusion/docs/api-reference/fusion-satellite"},next:{title:"Fusion API Stored Value Extension",permalink:"/fusion/docs/api-reference/fusion-api-stored-value-extension"}},c={},a=[{value:"What is a fuel card",id:"what-is-a-fuel-card",level:2},{value:"Mandatory features",id:"mandatory-features",level:2},{value:"Extended SaleItem",id:"extended-saleitem",level:2},{value:"Fuel product code",id:"fuel-product-code",level:3},{value:"What is a fuel product code",id:"what-is-a-fuel-product-code",level:4},{value:"Setting the fuel product code",id:"setting-the-fuel-product-code",level:4},{value:"Supporting multiple fuel product codes",id:"supporting-multiple-fuel-product-codes",level:4},{value:"Discounts and surcharges",id:"discounts-and-surcharges",level:3},{value:"Example fuel API basket",id:"example-fuel-api-basket",level:3},{value:"Split payments",id:"split-payments",level:2},{value:"Purchase",id:"purchase",level:2},{value:"Refund",id:"refund",level:2},{value:"Accreditation",id:"accreditation",level:2}];function o(t){const e={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...t.components},{Details:n}=e;return n||function(t,e){throw new Error("Expected "+(e?"component":"object")+" `"+t+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"fusion-api-fuel-extension",children:"Fusion API Fuel Extension"}),"\n",(0,r.jsx)(e.p,{children:"The Fusion API Fuel Extension is of features and requirements which extend the Fusion API Core which adds support for current and future fuel payment types accepted by DataMesh. (e.g. FleetCard, Shell Card, MotorPass etc)"}),"\n",(0,r.jsx)(e.h2,{id:"what-is-a-fuel-card",children:"What is a fuel card"}),"\n",(0,r.jsx)(e.p,{children:"A fuel card is a payment card specifically designed for drivers of business vehicles to pay for their fuel."}),"\n",(0,r.jsx)(e.p,{children:"They can be configured to allow the purchase of only certain product categories, making it easier for business owners to track and manage fuel expenses. Fuel cards also reduce paper work, and can offer volume discounts."}),"\n",(0,r.jsx)(e.p,{children:"Service stations accepting fuel card payments can attract more customers, especially those using company vehicles."}),"\n",(0,r.jsx)(e.h2,{id:"mandatory-features",children:"Mandatory features"}),"\n",(0,r.jsx)(e.p,{children:"The table below provides an overview of the mandatory integration requirements for the Fusion API Fuel Extension which are required for your selected integration type."}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Feature"}),(0,r.jsx)(e.th,{style:{textAlign:"center"},children:"Fusion App"}),(0,r.jsx)(e.th,{style:{textAlign:"center"},children:"Fusion Satellite"}),(0,r.jsx)(e.th,{style:{textAlign:"center"},children:"Fusion Cloud"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Purchase"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Refund"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Cashout (not supported on fuel cards)"}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"}})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-api-fuel-extension#extended-saleitem",children:"Extended SaleItem"})," fuel product fields"]}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/getting-started#dynamic-surcharge",children:"Dynamic surcharge"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-api-fuel-extension#split-payments",children:"Split payments"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/getting-started#matched-refund",children:"Matched refund"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/getting-started#qr-code-pairing",children:"QR code pairing"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#display",children:"Display request handling"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#input",children:"Input request handling"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#print",children:"Print request handling"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"extended-saleitem",children:"Extended SaleItem"}),"\n",(0,r.jsx)(e.admonition,{type:"info",children:(0,r.jsxs)(e.p,{children:["A payment through the Fusion API Fuel Extension expands the mandatory fields for a ",(0,r.jsx)(e.code,{children:"SaleItem"}),"."]})}),"\n",(0,r.jsx)(e.p,{children:"The Fusion API requires the Sale System to provide the basket items for every payment. The Fusion API Fuel Extension expands the mandatory fields required to enable fuel card purchases."}),"\n",(0,r.jsxs)(e.p,{children:["The extra ",(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#saleitem",children:"SaleItem"})," fields required for the Fusion API Fuel Extension are as follows:"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["For ",(0,r.jsx)(e.strong,{children:"every"})," basket item, the Sale System must populate the fuel product code(s) within CustomFields"]}),"\n",(0,r.jsxs)(e.li,{children:["For fuel sale items only, the Sale System must populate  ",(0,r.jsx)(e.code,{children:"UnitOfMeasure"}),", ",(0,r.jsx)(e.code,{children:"Quantity"}),", ",(0,r.jsx)(e.code,{children:"UnitPrice"}),", and ",(0,r.jsx)(e.code,{children:"ItemAmount"})," representing the number of litres, price per litre, and total fuel price"]}),"\n"]}),"\n",(0,r.jsx)(e.admonition,{type:"success",children:(0,r.jsxs)(e.p,{children:["For fuel sale items, ",(0,r.jsx)(e.code,{children:"ItemAmount"})," must equal ",(0,r.jsx)(e.code,{children:"Quantity"})," multiplied by ",(0,r.jsx)(e.code,{children:"UnitPrice"}),", rounded up, or to the nearest cent."]})}),"\n",(0,r.jsx)(e.p,{children:"Fuel sale item details:"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Attribute"}),(0,r.jsx)(e.th,{style:{textAlign:"center"},children:"Requ."}),(0,r.jsx)(e.th,{children:"Format"}),(0,r.jsx)(e.th,{children:"Description"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#itemid",children:"ItemID"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Integer(0,9999)"})}),(0,r.jsx)(e.td,{children:"A unique identifier for the sale item within the context of this payment. e.g. a 0..n integer which increments by one for each sale item."})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#productcode",children:"ProductCode"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"String(0,128)"})}),(0,r.jsxs)(e.td,{children:["A unique identifier for the product within the merchant, such as the SKU. For example if two customers purchase the same product at two different stores owned by the merchant, both purchases should contain the same ",(0,r.jsx)(e.code,{children:"ProductCode"}),"."]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#unitofmeasure",children:"UnitOfMeasure"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Enum"})}),(0,r.jsxs)(e.td,{children:["Unit of measure of the ",(0,r.jsx)(e.code,{children:"Quantity"}),'. Set to "Litre"']})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#quantity",children:"Quantity"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Decimal(0,999999,8)"})}),(0,r.jsx)(e.td,{children:"Number of litres as read from the pump (decimal, maximum precision 6.8)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#unitprice",children:"UnitPrice"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Decimal(0,999999,8)"})}),(0,r.jsx)(e.td,{children:"Price per litre from the pump (decimal, maximum precision 6.8)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#itemamount",children:"ItemAmount"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Currency(0.01,99999.99)"})}),(0,r.jsx)(e.td,{children:"The amount of the fuel as presented to the cardholder (decimal 6.2 rounded to the nearest cent). This must equal Quantity * UnitPrice rounded up, or to the nearest cent."})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#productlabel",children:"ProductLabel"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"String(0,1024)"})}),(0,r.jsxs)(e.td,{children:["A short, human readable, descriptive name of the product.  For example, ",(0,r.jsx)(e.code,{children:"ProductLabel"})," could contain the product name typically printed on the customer receipt."]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#categories",children:"Categories"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Array(String)"})}),(0,r.jsxs)(e.td,{children:['Array of categories. Top level "main" category at categories[0]. See ',(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#categories",children:"Categories"})," for more information."]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#sale-item-tags",children:"Tags"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Array(String)"})}),(0,r.jsx)(e.td,{children:"String array with descriptive tags for the product"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#customfields",children:"CustomFields"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Array(Object)"})}),(0,r.jsx)(e.td,{children:"Array of key/type/value objects which define the fuel product code for the item."})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"fuel-product-code",children:"Fuel product code"}),"\n",(0,r.jsx)(e.h4,{id:"what-is-a-fuel-product-code",children:"What is a fuel product code"}),"\n",(0,r.jsx)(e.p,{children:"A fuel card may be configured by the fuel card provider to allow the purchase of specific product categories (e.g. only fuel, or fuel + services, or fuel + services + shop items)"}),"\n",(0,r.jsxs)(e.p,{children:["For each item in the basket the Sale System must include a ",(0,r.jsx)(e.em,{children:"fuel product code"})," which defines the product category the sale item belongs to."]}),"\n",(0,r.jsx)(e.p,{children:"This enables the fuel card provider to determine if the basket should be accepted for the fuel card presented."}),"\n",(0,r.jsx)(e.h4,{id:"setting-the-fuel-product-code",children:"Setting the fuel product code"}),"\n",(0,r.jsxs)(e.p,{children:["The Sale System ",(0,r.jsx)(e.strong,{children:"must"})," add at least one fuel product code into ",(0,r.jsx)(e.strong,{children:"every"})," sale item."]}),"\n",(0,r.jsxs)(e.p,{children:["The Sale System sets a fuel product code in each sale item by adding a key/value/type entry to the ",(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#customfields",children:"CustomFields"})," array, where:"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Key"})," is the product code type (e.g. ",(0,r.jsx)(e.code,{children:"FuelProductCodeShellCard"})," or ",(0,r.jsx)(e.code,{children:"FuelProductCode"}),")"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Type"}),' is "String"']}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Value"})," is the value of the product code"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["For example, the follow ",(0,r.jsx)(e.code,{children:"CustomFields"})," JSON sets ",(0,r.jsx)(e.code,{children:"FuelProductCodeShellCard"})," to ",(0,r.jsx)(e.code,{children:"2"}),"."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "CustomFields": [\n    {\n      "Key": "FuelProductCodeShellCard",\n      "Type": "String",\n      "Value": "2"\n    }\n  ]\n}\n'})}),"\n",(0,r.jsxs)(e.p,{children:["See ",(0,r.jsx)(e.a,{href:"#example-fuel-api-basket",children:"example fuel api basket"})," for an example basket."]}),"\n",(0,r.jsxs)(e.p,{children:["Currently, DataMesh supports the Sale System setting either ",(0,r.jsx)(e.code,{children:"FuelProductCodeShellCard"})," or ",(0,r.jsx)(e.code,{children:"FuelProductCode"}),". DataMesh will perform the required mapping from these codes to handle all other supported fuel card types."]}),"\n",(0,r.jsx)(e.admonition,{type:"success",children:(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:["If the Sale System only supports setting one code, it should set ",(0,r.jsx)(e.code,{children:"FuelProductCodeShellCard"})]})})}),"\n",(0,r.jsx)(e.p,{children:"Supported product codes:"}),"\n",(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Product code type (Key)"}),(0,r.jsx)("th",{children:"Fuel card support"}),(0,r.jsx)("th",{children:"Product codes (Value)"})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"FuelProductCode"}),(0,r.jsx)("td",{children:"BP, Shell Card, Fleet Card, Motorpass"}),(0,r.jsx)("td",{children:(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(e.p,{children:"FuelProductCode codes"})}),(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Code"}),(0,r.jsx)(e.th,{children:"Description"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"Tobacco"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"2"}),(0,r.jsx)(e.td,{children:"Lottery"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"3"}),(0,r.jsx)(e.td,{children:"Premium ULP"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"4"}),(0,r.jsx)(e.td,{children:"Auto Gas"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"5"}),(0,r.jsx)(e.td,{children:"Unleaded"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"6"}),(0,r.jsx)(e.td,{children:"AdBlue Packaged"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"7"}),(0,r.jsx)(e.td,{children:"Oils"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"8"}),(0,r.jsx)(e.td,{children:"Services"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"9"}),(0,r.jsx)(e.td,{children:"Parts"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"10"}),(0,r.jsx)(e.td,{children:"Tyres"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"11"}),(0,r.jsx)(e.td,{children:"Battery"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"12"}),(0,r.jsx)(e.td,{children:"Repairs and Maintenance"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"13"}),(0,r.jsx)(e.td,{children:"Shop"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"14"}),(0,r.jsx)(e.td,{children:"Car Wash"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"15"}),(0,r.jsx)(e.td,{children:"Accident and Damage"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"16"}),(0,r.jsx)(e.td,{children:"Diner"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"17"}),(0,r.jsx)(e.td,{children:"Diesel G50"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"18"}),(0,r.jsx)(e.td,{children:"Premium Ethnl"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"19"}),(0,r.jsx)(e.td,{children:"ULP Ethnl"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"20"}),(0,r.jsx)(e.td,{children:"Opal"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"21"}),(0,r.jsx)(e.td,{children:"Bottle"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"22"}),(0,r.jsx)(e.td,{children:"No GST"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"23"}),(0,r.jsx)(e.td,{children:"Coffee"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"24"}),(0,r.jsx)(e.td,{children:"Ultimate"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"25"}),(0,r.jsx)(e.td,{children:"Diesel 5"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"26"}),(0,r.jsx)(e.td,{children:"AdBlue Pump"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"27"}),(0,r.jsx)(e.td,{children:"Weigh Bridge"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"28"}),(0,r.jsx)(e.td,{children:"N/A"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"29"}),(0,r.jsx)(e.td,{children:"10 Diesel"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"30"}),(0,r.jsx)(e.td,{children:"ULT Diesel"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"99"}),(0,r.jsx)(e.td,{children:"Cashout"})]})]})]})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"FuelProductCodeShellCard"}),(0,r.jsx)("td",{children:"BP, Shell Card, Fleet Card, Motorpass"}),(0,r.jsx)("td",{children:(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(e.p,{children:"FuelProductCodeShellCard codes"})}),(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Code"}),(0,r.jsx)(e.th,{children:"Description"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"Unleaded E10"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"2"}),(0,r.jsx)(e.td,{children:"Unleaded Petrol"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"3"}),(0,r.jsx)(e.td,{children:"Premium Unleaded"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"4"}),(0,r.jsx)(e.td,{children:"Diesel"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"5"}),(0,r.jsx)(e.td,{children:"Gogas"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"6"}),(0,r.jsx)(e.td,{children:"AdBlue"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"7"}),(0,r.jsx)(e.td,{children:"Premium Unleaded 98"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"8"}),(0,r.jsx)(e.td,{children:"V-Power"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"9"}),(0,r.jsx)(e.td,{children:"Unleaded 95"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"10"}),(0,r.jsx)(e.td,{children:"Premium Diesel"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"11"}),(0,r.jsx)(e.td,{children:"Car Parts"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"12"}),(0,r.jsx)(e.td,{children:"Car Service Labour"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"13"}),(0,r.jsx)(e.td,{children:"Auto Care Oils"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"14"}),(0,r.jsx)(e.td,{children:"Franchised Car Service"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"17"}),(0,r.jsx)(e.td,{children:"Car Tyres"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"18"}),(0,r.jsx)(e.td,{children:"Car Batteries"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"19"}),(0,r.jsx)(e.td,{children:"Car Service Opp"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"20"}),(0,r.jsx)(e.td,{children:"Car Service Other"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"31"}),(0,r.jsx)(e.td,{children:"Car Wash & Detail"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"40"}),(0,r.jsx)(e.td,{children:"GST-Free Products"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"42"}),(0,r.jsx)(e.td,{children:"Car Accessories"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"43"}),(0,r.jsx)(e.td,{children:"Car Care"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"45"}),(0,r.jsx)(e.td,{children:"Tobacco"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"46"}),(0,r.jsx)(e.td,{children:"Confectionery"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"47"}),(0,r.jsx)(e.td,{children:"Dairy & Deli"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"48"}),(0,r.jsx)(e.td,{children:"Drinks"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"49"}),(0,r.jsx)(e.td,{children:"Take Away Food"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"50"}),(0,r.jsx)(e.td,{children:"Groceries"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"52"}),(0,r.jsx)(e.td,{children:"Ice Products"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"54"}),(0,r.jsx)(e.td,{children:"Newsagency"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"55"}),(0,r.jsx)(e.td,{children:"Auto Oils"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"56"}),(0,r.jsx)(e.td,{children:"Rentals & Deposits"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"57"}),(0,r.jsx)(e.td,{children:"Travel & Leisure"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"59"}),(0,r.jsx)(e.td,{children:"Hardware"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"60"}),(0,r.jsx)(e.td,{children:"LP Gas Bottles"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"65"}),(0,r.jsx)(e.td,{children:"Services"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"66"}),(0,r.jsx)(e.td,{children:"Kerosene"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"67"}),(0,r.jsx)(e.td,{children:"Premix"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"71"}),(0,r.jsx)(e.td,{children:"Bakery"})]})]})]})]})})]})]})]}),"\n",(0,r.jsx)(e.h4,{id:"supporting-multiple-fuel-product-codes",children:"Supporting multiple fuel product codes"}),"\n",(0,r.jsx)(e.admonition,{type:"info",children:(0,r.jsxs)(e.p,{children:["This is optional. If the Sale System only supports setting one code, it should set ",(0,r.jsx)(e.code,{children:"FuelProductCodeShellCard"})]})}),"\n",(0,r.jsx)(e.p,{children:"DataMesh supports the Sale System providing multiple fuel product codes for each sale item."}),"\n",(0,r.jsxs)(e.p,{children:["If multiple fuel product codes are provided and a fuel card is presented, DataMesh will first attempt to use the fuel product codes for the card brand. If not provided, DataMesh will map from ",(0,r.jsx)(e.code,{children:"FuelProductCodeShellCard"})," or ",(0,r.jsx)(e.code,{children:"FuelProductCode"}),"."]}),"\n",(0,r.jsxs)(e.p,{children:["For example; if an Caltex StarCard is presented, DataMesh will attempt to load the fuel product code from ",(0,r.jsx)(e.code,{children:"FuelProductCodeCaltexStarCard"}),". If not provied by the Sale System, DataMesh will map from ",(0,r.jsx)(e.code,{children:"FuelProductCodeShellCard"})," or ",(0,r.jsx)(e.code,{children:"FuelProductCode"}),"."]}),"\n",(0,r.jsx)(e.p,{children:"All supported fuel product code types:"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Product code"}),(0,r.jsx)(e.th,{children:"Fuel card"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeAmpolCard"}),(0,r.jsx)(e.td,{children:"Ampol Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCode"}),(0,r.jsx)(e.td,{children:"BP Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeCaltexStarCard"}),(0,r.jsx)(e.td,{children:"Caltex StarCard"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeFleetCard"}),(0,r.jsx)(e.td,{children:"Fleet Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeFreedomFuelCard"}),(0,r.jsx)(e.td,{children:"Freedom Fuel Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeLibertyCard"}),(0,r.jsx)(e.td,{children:"Liberty Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeMotorpass"}),(0,r.jsx)(e.td,{children:"Motorpass"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeShellCard"}),(0,r.jsx)(e.td,{children:"Shell Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeTrinityFuelCard"}),(0,r.jsx)(e.td,{children:"Trinity Fuel Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeUnitedFuelCard"}),(0,r.jsx)(e.td,{children:"United Fuel Card"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"discounts-and-surcharges",children:"Discounts and surcharges"}),"\n",(0,r.jsx)(e.admonition,{type:"success",children:(0,r.jsx)(e.p,{children:"Fuel card payments require the amount requested to always match the sum of the items in the basket."})}),"\n",(0,r.jsx)(e.p,{children:"The Sale System must ensure that after the discount or surcharge has been applied;"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"The amount requested matches the sum of the items in the basket."}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"ItemAmount"})," equals ",(0,r.jsx)(e.code,{children:"Quantity"})," multiplied by ",(0,r.jsx)(e.code,{children:"UnitPrice"}),", rounded up, or to the nearest cent."]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"To apply a surcharge:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Adjust the ",(0,r.jsx)(e.code,{children:"Quantity"})," and/or ",(0,r.jsx)(e.code,{children:"UnitPrice"})," to reflect the surcharged price, ensuring ",(0,r.jsx)(e.code,{children:"ItemAmount"})," equals ",(0,r.jsx)(e.code,{children:"Quantity"})," multiplied by ",(0,r.jsx)(e.code,{children:"UnitPrice"})]}),"\n",(0,r.jsx)(e.li,{children:"Send the payment request"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"To apply a fuel item discount:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Adjust the ",(0,r.jsx)(e.code,{children:"Quantity"})," and/or ",(0,r.jsx)(e.code,{children:"UnitPrice"})," to reflect the discounted price, ensuring ",(0,r.jsx)(e.code,{children:"ItemAmount"})," equals ",(0,r.jsx)(e.code,{children:"Quantity"})," multiplied by ",(0,r.jsx)(e.code,{children:"UnitPrice"})]}),"\n",(0,r.jsxs)(e.li,{children:["In the SaleItem, populate ",(0,r.jsx)(e.code,{children:"Discount"})," with the discounted amount"]}),"\n",(0,r.jsxs)(e.li,{children:["In the SaleItem, populate ",(0,r.jsx)(e.code,{children:"DiscountReason"})," with the reason the discount was applied"]}),"\n",(0,r.jsx)(e.li,{children:"Send the payment request"}),"\n"]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:" Example discounted fuel item "}),(0,r.jsx)("p",{children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{ \n"SaleItem": [\n\t{\n\t\t"ItemID": 0,\n\t\t"ProductCode": "ABX123",\n\t\t"UnitOfMeasure": "Litre",\n\t\t"Quantity": 42.252,\n\t\t"UnitPrice": 2.00,\n\t\t"ItemAmount": 84.50,\n\t\t"Discount": 6.34,\n\t\t"Discount": "Cafe + fuel discount",\n\t\t"ProductLabel": "Unleaded Petrol",\n\t\t"Categories": ["Fuel"],\n\t\t"CustomFields": [\n\t\t{\n\t\t\t"Key": "FuelProductCodeShellCard",\n\t\t\t"Type": "String",\n\t\t\t"Value": "2"\n\t\t}\n\t\t]\n\t}\n}\n'})})})]}),"\n",(0,r.jsx)(e.h3,{id:"example-fuel-api-basket",children:"Example fuel API basket"}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(e.p,{children:"Example fuel API sale item"})}),(0,r.jsx)("p",{children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n    "SaleItem": [{\n            "ItemID": 0,\n            "ProductCode": "ABX123",\n            "UnitOfMeasure": "Litre",\n            "Quantity": 42.252,\n            "UnitPrice": 2.15,\n            "ItemAmount": 90.84,\n            "ProductLabel": "Unleaded Petrol",\n            "Categories": ["Fuel"],\n            "CustomFields": [{\n                    "Key": "FuelProductCodeShellCard",\n                    "Type": "String",\n                    "Value": "2"\n                }\n            ]\n        }, {\n            "ItemID": 1,\n            "ProductCode": "5000112576009",\n            "EanUpc": "5000112576009",\n            "UnitOfMeasure": "Other",\n            "Quantity": "2",\n            "UnitPrice": "1.95",\n            "ItemAmount": "3.90",\n            "ProductLabel": "Coca-Cola No Sugar 1.25L",\n            "CostBase": "0.75",\n            "Categories": ["Drinks", "Soft Drink"],\n            "Brand": "Coca-Cola",\n            "QuantityInStock": "42",\n            "CustomFields": [{\n                    "Key": "FuelProductCodeShellCard",\n                    "Type": "String",\n                    "Value": "48"\n                }\n            ]\n        }\n    ]\n}\n\n'})})})]}),"\n",(0,r.jsx)(e.h2,{id:"split-payments",children:"Split payments"}),"\n",(0,r.jsx)(e.admonition,{type:"success",children:(0,r.jsx)(e.p,{children:"For fuel card payments, the amount requested must match the sum of the items in the basket."})}),"\n",(0,r.jsxs)(e.p,{children:["For cash and scheme cards, the standard split payments user flow (described ",(0,r.jsx)(e.a,{href:"/docs/getting-started#split-payments",children:"here"}),") applies."]}),"\n",(0,r.jsx)(e.p,{children:"However, fuel card payments have unique split payment requirements:"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"No Split for Single Fuel Purchase:"})," A single fuel purchase cannot be split between a fuel card and another payment option. For instance, a $100 fuel purchase cannot be split into $50 cash and $50 fuel card payments."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Mandatory Basket Split for Unsupported Items:"})," If a fuel card is used to purchase fuel along with items not supported by the card (e.g. tobacco), the Sale System must split the basket. For example, a purchase of $100 fuel and $50 tobacco would require the Sale System to send two transactions with separate baskets. The fuel sale, with the fuel item in the basket followed by and a second sale, with the tobacco item in the basket."]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"Fuel card holders are typically familiar with these operational processes. Cashiers need to understand this flow for correct POS processing."}),"\n",(0,r.jsx)(e.admonition,{type:"info",children:(0,r.jsxs)(e.p,{children:["Refer ",(0,r.jsx)(e.a,{href:"/docs/getting-started#split-payments",children:"here"})," for details on performing a split payment."]})}),"\n",(0,r.jsx)(e.h2,{id:"purchase",children:"Purchase"}),"\n",(0,r.jsx)(e.p,{children:"To perform a fuel purchase:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Construct a purchase request based on the Sale System integration type:","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Fusion App - ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-app#perform-a-purchase-events-mode",children:"perform a purchase"})]}),"\n",(0,r.jsxs)(e.li,{children:["Fusion Cloud - ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#perform-a-purchase",children:"perform a purchase"})]}),"\n",(0,r.jsxs)(e.li,{children:["Fusion Satellite - ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-satellite#payment",children:"perform a purchase"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Populate ",(0,r.jsx)(e.strong,{children:"every"})," product in the SaleItem[] array with fuel product data ",(0,r.jsx)(e.code,{children:"CustomFields"})]}),"\n",(0,r.jsxs)(e.li,{children:["Populate every ",(0,r.jsx)(e.strong,{children:"fuel"})," product in the SaleItem[] array with fuel product data"]}),"\n",(0,r.jsxs)(e.li,{children:["Fusion Cloud only; handle ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#display",children:"display"}),", ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#input",children:"input"}),", and ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#print",children:"print"})," requests."]}),"\n",(0,r.jsxs)(e.li,{children:["Handle the payment response","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["The ",(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#paymentbrandid",children:"PaymentBrandID"})," field indicates the card type used to complete the payment"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(e.p,{children:"Fusion API Fuel Extension purchase request"})}),(0,r.jsx)("p",{children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n\t"SaleToPOIRequest": {\n\t\t"MessageHeader": {\n\t\t\t"MessageClass": "Service",\n\t\t\t"MessageCategory": "Payment",\n\t\t\t"MessageType": "Request",\n\t\t\t"ServiceID": "ec6b7b5f7330484eb533cd26a1306bb0",\n\t\t\t"SaleID": "INT POS",\n\t\t\t"POIID": "INTP9205"\n\t\t},\n\t\t"PaymentRequest": {\n\t\t\t"SaleData": {\n\t\t\t\t"SaleTransactionID": {\n\t\t\t\t\t"TransactionID": "422543aba9fc4e9a9a6512517961513c",\n\t\t\t\t\t"TimeStamp": "2023-11-28T04:33:56.8703432Z"\n\t\t\t\t}\n\t\t\t},\n\t\t\t"PaymentTransaction": {\n\t\t\t\t"AmountsReq": {\n\t\t\t\t\t"Currency": "AUD",\n\t\t\t\t\t"RequestedAmount": 117.41\n\t\t\t\t},\n\t\t\t\t"SaleItem": [\n\t\t\t\t\t{\n\t\t\t\t\t\t"ItemID": 0,\n\t\t\t\t\t\t"ProductCode": "HHETDY12321",\n\t\t\t\t\t\t"UnitOfMeasure": "Litre",\n\t\t\t\t\t\t"Quantity": 57.62,\n\t\t\t\t\t\t"UnitPrice": 1.97,\n\t\t\t\t\t\t"ItemAmount": 113.51,\n\t\t\t\t\t\t"ProductLabel": "Unleaded Petrol",\n\t\t\t\t\t\t"CustomFields": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCode", \n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "5"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCodeShellCard",\n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "2"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t"ItemID": 1,\n\t\t\t\t\t\t"ProductCode": "5000112576009",\n\t\t\t\t\t\t"EanUpc": "5000112576009",\n\t\t\t\t\t\t"UnitOfMeasure": "Other",\n\t\t\t\t\t\t"Quantity": "2",\n\t\t\t\t\t\t"UnitPrice": "1.95",\n\t\t\t\t\t\t"ItemAmount": "3.90",\n\t\t\t\t\t\t"ProductLabel": "Coca-Cola No Sugar 1.25L",\n\t\t\t\t\t\t"CostBase": "0.75",\n\t\t\t\t\t\t"Categories": [\n\t\t\t\t\t\t\t"Drinks",\n\t\t\t\t\t\t\t"Soft Drink"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t"Brand": "Coca-Cola",\n\t\t\t\t\t\t"QuantityInStock": "42",\n\t\t\t\t\t\t"CustomFields": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCode", \n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "13"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCodeShellCard",\n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "48"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t"PaymentData": {\n\t\t\t\t"PaymentType": "Normal"\n\t\t\t}\n\t\t},\n\t\t"SecurityTrailer": {}\n\t}\n}\n'})})})]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(e.p,{children:"Fusion API Fuel Extension purchase response"})}),(0,r.jsx)("p",{children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n\t"SaleToPOIResponse": {\n\t\t"MessageHeader": {\n\t\t\t"MessageClass": "Service",\n\t\t\t"MessageCategory": "Payment",\n\t\t\t"MessageType": "Response",\n\t\t\t"ServiceID": "ec6b7b5f7330484eb533cd26a1306bb0",\n\t\t\t"SaleID": "INT POS",\n\t\t\t"POIID": "INTP9205"\n\t\t},\n\t\t"PaymentResponse": {\n\t\t\t"Response": {\n\t\t\t\t"Result": "Success"\n\t\t\t},\n\t\t\t"SaleData": {\n\t\t\t\t"SaleTransactionID": {\n\t\t\t\t\t"TransactionID": "422543aba9fc4e9a9a6512517961513c",\n\t\t\t\t\t"TimeStamp": "2023-11-28T04:33:56.8703432Z"\n\t\t\t\t}\n\t\t\t},\n\t\t\t"POIData": {\n\t\t\t\t"POITransactionID": {\n\t\t\t\t\t"TransactionID": "65656db57a54cb8f801069ee",\n\t\t\t\t\t"TimeStamp": "2023-11-28T15:34:10.16+11:00"\n\t\t\t\t},\n\t\t\t\t"POIReconciliationID": "64f7f88bd677b0362581bbb5"\n\t\t\t},\n\t\t\t"PaymentResult": {\n\t\t\t\t"PaymentType": "Normal",\n\t\t\t\t"PaymentInstrumentData": {\n\t\t\t\t\t"PaymentInstrumentType": "Card",\n\t\t\t\t\t"CardData": {\n\t\t\t\t\t\t"EntryMode": "MagStripe",\n\t\t\t\t\t\t"PaymentBrand": "Shell Card",\n\t\t\t\t\t\t"PaymentBrandID": "0103",\n\t\t\t\t\t\t"PaymentBrandLabel": "Shell Card",\n\t\t\t\t\t\t"Account": "Default",\n\t\t\t\t\t\t"Expiry": "=720",\n\t\t\t\t\t\t"MaskedPAN": "7034305XXXXX2521"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t"AmountsResp": {\n\t\t\t\t\t"Currency": "AUD",\n\t\t\t\t\t"AuthorizedAmount": 117.41,\n\t\t\t\t\t"TotalFeesAmount": 0,\n\t\t\t\t\t"CashBackAmount": 0,\n\t\t\t\t\t"SurchargeAmount": 0,\n\t\t\t\t\t"TipAmount": 0\n\t\t\t\t},\n\t\t\t\t"OnlineFlag": true,\n\t\t\t\t"PaymentAcquirerData": {\n\t\t\t\t\t"AcquirerID": "560251",\n\t\t\t\t\t"MerchantID": "33435368",\n\t\t\t\t\t"AcquirerPOIID": "M3AU41",\n\t\t\t\t\t"AcquirerTransactionID": {\n\t\t\t\t\t\t"TransactionID": "5de73ec1454dde9d70124b5d",\n\t\t\t\t\t\t"TimeStamp": "2023-11-28T04:34:10.320Z"\n\t\t\t\t\t},\n\t\t\t\t\t"ApprovalCode": "554004",\n\t\t\t\t\t"ResponseCode": "00",\n\t\t\t\t\t"HostReconciliationID": "20231129",\n\t\t\t\t\t"RRN": "328132214339126"\n\t\t\t\t}\n\t\t\t},\n\t\t\t"PaymentReceipt": [\n\t\t\t\t{\n\t\t\t\t\t"DocumentQualifier": "SaleReceipt",\n\t\t\t\t\t"IntegratedPrintFlag": true,\n\t\t\t\t\t"RequiredSignatureFlag": false,\n\t\t\t\t\t"OutputContent": {\n\t\t\t\t\t\t"OutputFormat": "XHTML",\n\t\t\t\t\t\t"OutputXHTML": "PHAgaWQ9InJlY2VpcHQtaW5mbyI+MjgvMTEvMjAyMyAxNTozNDoxMDxici8+TWVyY2hhbnQgSUQ6IFBPU01lcmNoYW50PGJyLz5UZXJtaW5hbCBJRDogSU5UUDkyMDU8L3A+PHAgaWQ9InJlY2VpcHQtZGV0YWlscyI+PGI+UHVyY2hhc2UgVHJhbnNhY3Rpb248L2I+PGJyLz5BbW91bnQ6ICQxNS4wODxici8+U2hlbGwgQ2FyZDogNDc2MTczWFhYWFhYMDExOSAoVCk8YnIvPkNyZWRpdCBBY2NvdW50PC9wPjxwIGlkPSJyZWNlaXB0LXJlc3VsdCI+PGI+QXBwcm92ZWQ8L2I+PGJyLz5SZWZlcmVuY2U6IDAwMDAgMDAxMyA0NTk4PGJyLz5BdXRoIENvZGU6IDU1NDAwNDxici8+QUlEOiBBMDAwMDAwMDAzMTAxMDxici8+QVRDOiAwMDAxPGJyLz5UVlI6IDAwMDAwMDAwMDA8YnIvPkFSUUM6IEQ5Mzc2MDIwMDgzOEQwNzM8L3A+"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t"SecurityTrailer": {}\n\t}\n}\n'})})})]}),"\n",(0,r.jsx)(e.h2,{id:"refund",children:"Refund"}),"\n",(0,r.jsxs)(e.admonition,{type:"success",children:[(0,r.jsx)(e.p,{children:"To perform a fuel card refund, some fuel card providers require that the refund be matched to an original purchase."}),(0,r.jsx)(e.p,{children:'To ensure that all fuel card refunds can be completed successfully; refunds must be "matched refunds".'}),(0,r.jsx)(e.p,{children:"We recommend that the Sale System implements matched refunds by including the POITransactionID from the original purchase request.  However, if the Sale System doesn\u2019t provide this information (POITransactionID), the Satellite application will request for it."})]}),"\n",(0,r.jsx)(e.p,{children:"To perform a fuel refund:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Construct a refund request based on the Sale System integration type:","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Fusion App - ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-app#perform-a-refund-events-mode",children:"perform a purchase"})]}),"\n",(0,r.jsxs)(e.li,{children:["Fusion Cloud - ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#perform-a-refund",children:"perform a purchase"})]}),"\n",(0,r.jsxs)(e.li,{children:["Fusion Satellite - ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-satellite#payment",children:"perform a purchase"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Populate the ",(0,r.jsx)(e.a,{href:"/docs/getting-started#matched-refund",children:"matched refund"})," fields"]}),"\n",(0,r.jsxs)(e.li,{children:["Populate the ",(0,r.jsx)(e.code,{children:"SaleItem[]"})," array with fuel product data of the items being refunded"]}),"\n",(0,r.jsxs)(e.li,{children:["Fusion Cloud only; handle ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#display",children:"display"}),", ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#input",children:"input"}),", and ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#print",children:"print"})," requests."]}),"\n",(0,r.jsx)(e.li,{children:"Handle the payment response"}),"\n"]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(e.p,{children:"Fusion API Fuel Extension refund request"})}),(0,r.jsx)("p",{children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n\t"SaleToPOIRequest": {\n\t\t"MessageHeader": {\n\t\t\t"MessageClass": "Service",\n\t\t\t"MessageCategory": "Payment",\n\t\t\t"MessageType": "Request",\n\t\t\t"ServiceID": "ec6b7b5f7330484eb533cd26a1306bb0",\n\t\t\t"SaleID": "INT POS",\n\t\t\t"POIID": "INTP9205"\n\t\t},\n\t\t"PaymentRequest": {\n\t\t\t"SaleData": {\n\t\t\t\t"SaleTransactionID": {\n\t\t\t\t\t"TransactionID": "422543aba9fc4e9a9a6512517961513c",\n\t\t\t\t\t"TimeStamp": "2023-11-28T04:33:56.8703432Z"\n\t\t\t\t}\n\t\t\t},\n\t\t\t"PaymentTransaction": {\n\t\t\t\t"AmountsReq": {\n\t\t\t\t\t"Currency": "AUD",\n\t\t\t\t\t"RequestedAmount": 117.41\n\t\t\t\t},\n\t\t\t\t"OriginalPOITransaction": {\n\t\t\t\t\t"POITransactionID": {\n\t\t\t\t\t\t"TransactionID": "65656db57a54cb8f801069ee",\n\t\t\t\t\t\t"TimeStamp": "2023-11-28T15:34:10.16+11:00"\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t"SaleItem": [\n\t\t\t\t\t{\n\t\t\t\t\t\t"ItemID": 0,\n\t\t\t\t\t\t"ProductCode": "HHETDY12321",\n\t\t\t\t\t\t"UnitOfMeasure": "Litre",\n\t\t\t\t\t\t"Quantity": 57.62,\n\t\t\t\t\t\t"UnitPrice": 1.97,\n\t\t\t\t\t\t"ItemAmount": 113.51,\n\t\t\t\t\t\t"ProductLabel": "Unleaded Petrol",\n\t\t\t\t\t\t"CustomFields": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCode",\n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "5"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCodeShellCard",\n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "2"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t"ItemID": 1,\n\t\t\t\t\t\t"ProductCode": "5000112576009",\n\t\t\t\t\t\t"EanUpc": "5000112576009",\n\t\t\t\t\t\t"UnitOfMeasure": "Other",\n\t\t\t\t\t\t"Quantity": "2",\n\t\t\t\t\t\t"UnitPrice": "1.95",\n\t\t\t\t\t\t"ItemAmount": "3.90",\n\t\t\t\t\t\t"ProductLabel": "Coca-Cola No Sugar 1.25L",\n\t\t\t\t\t\t"CostBase": "0.75",\n\t\t\t\t\t\t"Categories": [\n\t\t\t\t\t\t\t"Drinks",\n\t\t\t\t\t\t\t"Soft Drink"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t"Brand": "Coca-Cola",\n\t\t\t\t\t\t"QuantityInStock": "42",\n\t\t\t\t\t\t"CustomFields": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCode", \n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "13"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCodeShellCard",\n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "48"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t"PaymentData": {\n\t\t\t\t"PaymentType": "Refund"\n\t\t\t}\n\t\t},\n\t\t"SecurityTrailer": {}\n\t}\n}\n'})})})]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(e.p,{children:"Fusion API Fuel Extension refund response"})}),(0,r.jsx)("p",{children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n\t"SaleToPOIResponse": {\n\t\t"MessageHeader": {\n\t\t\t"MessageClass": "Service",\n\t\t\t"MessageCategory": "Payment",\n\t\t\t"MessageType": "Response",\n\t\t\t"ServiceID": "ec6b7b5f7330484eb533cd26a1306bb0",\n\t\t\t"SaleID": "INT POS",\n\t\t\t"POIID": "INTP9205"\n\t\t},\n\t\t"PaymentResponse": {\n\t\t\t"Response": {\n\t\t\t\t"Result": "Success"\n\t\t\t},\n\t\t\t"SaleData": {\n\t\t\t\t"SaleTransactionID": {\n\t\t\t\t\t"TransactionID": "422543aba9fc4e9a9a6512517961513c",\n\t\t\t\t\t"TimeStamp": "2023-11-28T04:33:56.8703432Z"\n\t\t\t\t}\n\t\t\t},\n\t\t\t"POIData": {\n\t\t\t\t"POITransactionID": {\n\t\t\t\t\t"TransactionID": "65656db57a54cb8f801069ee",\n\t\t\t\t\t"TimeStamp": "2023-11-28T15:34:10.16+11:00"\n\t\t\t\t},\n\t\t\t\t"POIReconciliationID": "64f7f88bd677b0362581bbb5"\n\t\t\t},\n\t\t\t"PaymentResult": {\n\t\t\t\t"PaymentType": "Normal",\n\t\t\t\t"PaymentInstrumentData": {\n\t\t\t\t\t"PaymentInstrumentType": "Card",\n\t\t\t\t\t"CardData": {\n\t\t\t\t\t\t"EntryMode": "MagStripe",\n\t\t\t\t\t\t"PaymentBrand": "Shell Card",\n\t\t\t\t\t\t"PaymentBrandID": "0103",\n\t\t\t\t\t\t"PaymentBrandLabel": "Shell Card",\n\t\t\t\t\t\t"Account": "Default",\n\t\t\t\t\t\t"Expiry": "=720",\n\t\t\t\t\t\t"MaskedPAN": "7034305XXXXX2521"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t"AmountsResp": {\n\t\t\t\t\t"Currency": "AUD",\n\t\t\t\t\t"AuthorizedAmount": 117.41,\n\t\t\t\t\t"TotalFeesAmount": 0,\n\t\t\t\t\t"CashBackAmount": 0,\n\t\t\t\t\t"SurchargeAmount": 0,\n\t\t\t\t\t"TipAmount": 0\n\t\t\t\t},\n\t\t\t\t"OnlineFlag": true,\n\t\t\t\t"PaymentAcquirerData": {\n\t\t\t\t\t"AcquirerID": "560251",\n\t\t\t\t\t"MerchantID": "33435368",\n\t\t\t\t\t"AcquirerPOIID": "M3AU41",\n\t\t\t\t\t"AcquirerTransactionID": {\n\t\t\t\t\t\t"TransactionID": "5de73ec1454dde9d70124b5d",\n\t\t\t\t\t\t"TimeStamp": "2023-11-28T04:34:10.320Z"\n\t\t\t\t\t},\n\t\t\t\t\t"ApprovalCode": "554004",\n\t\t\t\t\t"ResponseCode": "00",\n\t\t\t\t\t"HostReconciliationID": "20231129",\n\t\t\t\t\t"RRN": "328132214339126"\n\t\t\t\t}\n\t\t\t},\n\t\t\t"PaymentReceipt": [\n\t\t\t\t{\n\t\t\t\t\t"DocumentQualifier": "SaleReceipt",\n\t\t\t\t\t"IntegratedPrintFlag": true,\n\t\t\t\t\t"RequiredSignatureFlag": false,\n\t\t\t\t\t"OutputContent": {\n\t\t\t\t\t\t"OutputFormat": "XHTML",\n\t\t\t\t\t\t"OutputXHTML": "PHAgaWQ9InJlY2VpcHQtaW5mbyI+MjgvMTEvMjAyMyAxNTozNDoxMDxici8+TWVyY2hhbnQgSUQ6IFBPU01lcmNoYW50PGJyLz5UZXJtaW5hbCBJRDogSU5UUDkyMDU8L3A+PHAgaWQ9InJlY2VpcHQtZGV0YWlscyI+PGI+UHVyY2hhc2UgVHJhbnNhY3Rpb248L2I+PGJyLz5BbW91bnQ6ICQxNS4wODxici8+U2hlbGwgQ2FyZDogNDc2MTczWFhYWFhYMDExOSAoVCk8YnIvPkNyZWRpdCBBY2NvdW50PC9wPjxwIGlkPSJyZWNlaXB0LXJlc3VsdCI+PGI+QXBwcm92ZWQ8L2I+PGJyLz5SZWZlcmVuY2U6IDAwMDAgMDAxMyA0NTk4PGJyLz5BdXRoIENvZGU6IDU1NDAwNDxici8+QUlEOiBBMDAwMDAwMDAzMTAxMDxici8+QVRDOiAwMDAxPGJyLz5UVlI6IDAwMDAwMDAwMDA8YnIvPkFSUUM6IEQ5Mzc2MDIwMDgzOEQwNzM8L3A+"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t"SecurityTrailer": {}\n\t}\n}\n'})})})]}),"\n",(0,r.jsx)(e.h2,{id:"accreditation",children:"Accreditation"}),"\n",(0,r.jsxs)(e.p,{children:["There are an expanded set of test cases in the Fusion ",(0,r.jsx)(e.a,{href:"/docs/testing",children:"accreditation"})," to support payments via the Fusion API Fuel Extension."]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:"mailto:integrations@datameshgroup.com",children:"Contact the DataMesh Integrations Team"})," to discuss the accreditation process."]})]})}function h(t={}){const{wrapper:e}={...(0,s.a)(),...t.components};return e?(0,r.jsx)(e,{...t,children:(0,r.jsx)(o,{...t})}):o(t)}},1151:(t,e,n)=>{n.d(e,{Z:()=>l,a:()=>i});var r=n(7294);const s={},d=r.createContext(s);function i(t){const e=r.useContext(d);return r.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function l(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:i(t.components),r.createElement(d.Provider,{value:e},t.children)}}}]);