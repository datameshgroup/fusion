"use strict";(self.webpackChunkfusion_doc=self.webpackChunkfusion_doc||[]).push([[517],{4897:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var r=n(5893),s=n(1151);const i={sidebar_position:4},d="Fusion Fuel API",a={id:"api-reference/fusion-fuel-api",title:"Fusion Fuel API",description:"The Fusion Fuel API is an extension to the Fusion Core API which adds support for current and future fuel payment types accepted by DataMesh. (e.g. FleetCard, Shell Card, MotorPass etc)",source:"@site/docs/api-reference/fusion-fuel-api.md",sourceDirName:"api-reference",slug:"/api-reference/fusion-fuel-api",permalink:"/fusion/docs/api-reference/fusion-fuel-api",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Fusion Satellite",permalink:"/fusion/docs/api-reference/fusion-satellite"},next:{title:"Data model",permalink:"/fusion/docs/api-reference/data-model"}},l={},c=[{value:"Mandatory features",id:"mandatory-features",level:2},{value:"SaleItem",id:"saleitem",level:2},{value:"CustomFields",id:"customfields",level:3},{value:"Purchase",id:"purchase",level:2},{value:"Refund",id:"refund",level:2},{value:"Accreditation",id:"accreditation",level:2}];function o(t){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...t.components},{Details:n}=e;return n||function(t,e){throw new Error("Expected "+(e?"component":"object")+" `"+t+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"fusion-fuel-api",children:"Fusion Fuel API"}),"\n",(0,r.jsx)(e.p,{children:"The Fusion Fuel API is an extension to the Fusion Core API which adds support for current and future fuel payment types accepted by DataMesh. (e.g. FleetCard, Shell Card, MotorPass etc)"}),"\n",(0,r.jsx)(e.h2,{id:"mandatory-features",children:"Mandatory features"}),"\n",(0,r.jsx)(e.p,{children:"The table below provides an overview of the mandatory integration requirements for the Fusion Fuel API which are required for your selected integration type."}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Feature"}),(0,r.jsx)(e.th,{style:{textAlign:"center"},children:"Fusion App"}),(0,r.jsx)(e.th,{style:{textAlign:"center"},children:"Fusion Satellite"}),(0,r.jsx)(e.th,{style:{textAlign:"center"},children:"Fusion Cloud"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Purchase"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Refund"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Cashout (not supported on fuel cards)"}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"}})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-fuel-api#saleitem",children:"Fuel SaleItem"})," fields"]}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/getting-started#dynamic-surcharge",children:"Dynamic surcharge"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/getting-started#split-payments",children:"Split-payment"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/getting-started#matched-refund",children:"Matched refund"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/getting-started#qr-code-pairing",children:"QR code pairing"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#display",children:"Display request handling"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#input",children:"Input request handling"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#print",children:"Print request handling"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"saleitem",children:"SaleItem"}),"\n",(0,r.jsx)(e.admonition,{type:"info",children:(0,r.jsxs)(e.p,{children:["A payment through the Fusion Fuel API expands the mandatory fields for a ",(0,r.jsx)(e.code,{children:"SaleItem"}),"."]})}),"\n",(0,r.jsxs)(e.p,{children:["For every payment, the Sale System must populate the ",(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#saleitem",children:"SaleItem"})," with:"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["For ",(0,r.jsx)(e.strong,{children:"every"})," item, the FuelProductCode fields within CustomFields"]}),"\n",(0,r.jsxs)(e.li,{children:["For fuel sale items only, the ",(0,r.jsx)(e.code,{children:"UnitOfMeasure"}),", ",(0,r.jsx)(e.code,{children:"Quantity"}),", ",(0,r.jsx)(e.code,{children:"UnitPrice"}),", and ",(0,r.jsx)(e.code,{children:"ItemAmount"})," representing the number of litres, price per litre, and total fuel price"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"Fuel sale item details:"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Attribute"}),(0,r.jsx)(e.th,{style:{textAlign:"center"},children:"Requ."}),(0,r.jsx)(e.th,{children:"Format"}),(0,r.jsx)(e.th,{children:"Description"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#itemid",children:"ItemID"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Integer(0,9999)"})}),(0,r.jsx)(e.td,{children:"A unique identifier for the sale item within the context of this payment. e.g. a 0..n integer which increments by one for each sale item."})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#productcode",children:"ProductCode"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"String(0,128)"})}),(0,r.jsxs)(e.td,{children:["A unique identifier for the product within the merchant, such as the SKU. For example if two customers purchase the same product at two different stores owned by the merchant, both purchases should contain the same ",(0,r.jsx)(e.code,{children:"ProductCode"}),"."]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#unitofmeasure",children:"UnitOfMeasure"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Enum"})}),(0,r.jsxs)(e.td,{children:["Unit of measure of the ",(0,r.jsx)(e.code,{children:"Quantity"}),'. Set to "Litre"']})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#quantity",children:"Quantity"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Decimal(0,999999,8)"})}),(0,r.jsx)(e.td,{children:"Number of litres as read from the pump (decimal, maximum precision 6.8)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#unitprice",children:"UnitPrice"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Currency(0.01,999999.99)"})}),(0,r.jsx)(e.td,{children:"Price per litre from the pump (decimal, maximum precision 6.8)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#itemamount",children:"ItemAmount"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Currency(0.01,999999.99)"})}),(0,r.jsx)(e.td,{children:"The amount of the fuel as presented to the cardholder (decimal 6.2 rounded to the nearest cent). This must equal Quantity * UnitPrice rounded up, or to the nearest cent."})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#productlabel",children:"ProductLabel"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"String(0,1024)"})}),(0,r.jsxs)(e.td,{children:["A short, human readable, descriptive name of the product.  For example, ",(0,r.jsx)(e.code,{children:"ProductLabel"})," could contain the product name typically printed on the customer receipt."]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#categories",children:"Categories"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Array(String)"})}),(0,r.jsxs)(e.td,{children:['Array of categories. Top level "main" category at categories[0]. See ',(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#categories",children:"Categories"})," for more information."]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#sale-item-tags",children:"Tags"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"}}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Array(String)"})}),(0,r.jsx)(e.td,{children:"String array with descriptive tags for the product"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#customfields",children:"CustomFields"})}),(0,r.jsx)(e.td,{style:{textAlign:"center"},children:"\u2714"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#data-format",children:"Array(Object)"})}),(0,r.jsx)(e.td,{children:"Array of key/type/value objects which define the EFT code for the item."})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"customfields",children:"CustomFields"}),"\n",(0,r.jsxs)(e.p,{children:["The Sale System must populate the ",(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#customfields",children:"CustomFields"}),' array with a fuel "eft/product" code for the supported card types.']}),"\n",(0,r.jsx)(e.p,{children:"Supported CustomFields product codes:"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Product code"}),(0,r.jsx)(e.th,{children:"Fuel card"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCode"}),(0,r.jsx)(e.td,{children:"Generic / BP"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeShellCard"}),(0,r.jsx)(e.td,{children:"Shell Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeCaltexStarCard"}),(0,r.jsx)(e.td,{children:"Caltex StarCard"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeFleetCard"}),(0,r.jsx)(e.td,{children:"Fleet Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeMotorpass"}),(0,r.jsx)(e.td,{children:"Motorpass"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeUnitedFuelCard"}),(0,r.jsx)(e.td,{children:"United Fuel Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeAmpolCard"}),(0,r.jsx)(e.td,{children:"Ampol Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeTrinityFuelCard"}),(0,r.jsx)(e.td,{children:"Trinity Fuel Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeFreedomFuelCard"}),(0,r.jsx)(e.td,{children:"Freedom Fuel Card"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FuelProductCodeLibertyCard"}),(0,r.jsx)(e.td,{children:"Liberty Card"})]})]})]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(e.p,{children:"Example fuel API sale item"})}),(0,r.jsx)("p",{children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{ \n  "SaleItem": [\n  {\n    "ItemID": 0,\n\t"ProductCode": "ABX123",\n\t"UnitOfMeasure": "Litre",\n\t"Quantity": 42.252,\n\t"UnitPrice": 2.15,\n\t"ItemAmount": 90.84,\n\t"ProductLabel": "Premium ULP",\n\t"Categories": ["Fuel"],\n    "CustomFields": [\n      {\n        "Key": "FuelProductCode", \n\t    "Type": "String",\n        "Value": "21"\n      },\n      {\n        "Key": "FuelProductCodeShellCard",\n\t    "Type": "String",\n        "Value": "35"\n      },\n      {\n        "Key": "FuelProductCodeFleetCard",\n\t    "Type": "String",\n        "Value": "21"\n      },\n      {\n        "Key": "FuelProductCodeMotorpass",\n\t    "Type": "String",\n        "Value": "4"\n      }\t  \n    ]\n  }\n}\n'})})})]}),"\n",(0,r.jsx)(e.h2,{id:"purchase",children:"Purchase"}),"\n",(0,r.jsx)(e.p,{children:"To perform a fuel purchase:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Construct a purchase request based on the Sale System integration type:","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Fusion App - ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-app#perform-a-purchase-events-mode",children:"perform a purchase"})]}),"\n",(0,r.jsxs)(e.li,{children:["Fusion Cloud - ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#perform-a-purchase",children:"perform a purchase"})]}),"\n",(0,r.jsxs)(e.li,{children:["Fusion Satellite - ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-satellite#payment",children:"perform a purchase"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Populate ",(0,r.jsx)(e.strong,{children:"every"})," product in the SaleItem[] array with fuel product data ",(0,r.jsx)(e.code,{children:"CustomFields"})]}),"\n",(0,r.jsxs)(e.li,{children:["Populate every ",(0,r.jsx)(e.strong,{children:"fuel"})," product in the SaleItem[] array with fuel product data"]}),"\n",(0,r.jsxs)(e.li,{children:["Fusion Cloud only; handle ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#display",children:"display"}),", ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#input",children:"input"}),", and ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#print",children:"print"})," requests."]}),"\n",(0,r.jsxs)(e.li,{children:["Handle the payment response","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["The ",(0,r.jsx)(e.a,{href:"/docs/api-reference/data-model#paymentbrand",children:"PaymentBrand"})," field indicates the card type used to complete the payment"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(e.p,{children:"Fusion Fuel API purchase request"})}),(0,r.jsx)("p",{children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n\t"SaleToPOIRequest": {\n\t\t"MessageHeader": {\n\t\t\t"MessageClass": "Service",\n\t\t\t"MessageCategory": "Payment",\n\t\t\t"MessageType": "Request",\n\t\t\t"ServiceID": "ec6b7b5f7330484eb533cd26a1306bb0",\n\t\t\t"SaleID": "INT POS",\n\t\t\t"POIID": "INTP9205"\n\t\t},\n\t\t"PaymentRequest": {\n\t\t\t"SaleData": {\n\t\t\t\t"SaleTransactionID": {\n\t\t\t\t\t"TransactionID": "422543aba9fc4e9a9a6512517961513c",\n\t\t\t\t\t"TimeStamp": "2023-11-28T04:33:56.8703432Z"\n\t\t\t\t}\n\t\t\t},\n\t\t\t"PaymentTransaction": {\n\t\t\t\t"AmountsReq": {\n\t\t\t\t\t"Currency": "AUD",\n\t\t\t\t\t"RequestedAmount": 117.41\n\t\t\t\t},\n\t\t\t\t"SaleItem": [\n\t\t\t\t\t{\n\t\t\t\t\t\t"ItemID": 0,\n\t\t\t\t\t\t"ProductCode": "HHETDY12321",\n\t\t\t\t\t\t"UnitOfMeasure": "Litre",\n\t\t\t\t\t\t"Quantity": 57.62,\n\t\t\t\t\t\t"UnitPrice": 1.97,\n\t\t\t\t\t\t"ItemAmount": 113.51,\n\t\t\t\t\t\t"ProductLabel": "BP Unleaded 91",\n\t\t\t\t\t\t"CustomFields": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCode",\n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "21"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCodeShellCard",\n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "35"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCodeFleetcore",\n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "21"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t"ItemID": 1,\n\t\t\t\t\t\t"ProductCode": "5000112576009",\n\t\t\t\t\t\t"EanUpc": "5000112576009",\n\t\t\t\t\t\t"UnitOfMeasure": "Other",\n\t\t\t\t\t\t"Quantity": "2",\n\t\t\t\t\t\t"UnitPrice": "1.95",\n\t\t\t\t\t\t"ItemAmount": "3.90",\n\t\t\t\t\t\t"ProductLabel": "Coca-Cola No Sugar 1.25L",\n\t\t\t\t\t\t"CostBase": "0.75",\n\t\t\t\t\t\t"Categories": [\n\t\t\t\t\t\t\t"Drinks",\n\t\t\t\t\t\t\t"Soft Drink"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t"Brand": "Coca-Cola",\n\t\t\t\t\t\t"QuantityInStock": "42"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t"PaymentData": {\n\t\t\t\t"PaymentType": "Normal"\n\t\t\t}\n\t\t},\n\t\t"SecurityTrailer": {}\n\t}\n}\n'})})})]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(e.p,{children:"Fusion Fuel API purchase response"})}),(0,r.jsx)("p",{children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n\t"SaleToPOIResponse": {\n\t\t"MessageHeader": {\n\t\t\t"MessageClass": "Service",\n\t\t\t"MessageCategory": "Payment",\n\t\t\t"MessageType": "Response",\n\t\t\t"ServiceID": "ec6b7b5f7330484eb533cd26a1306bb0",\n\t\t\t"SaleID": "INT POS",\n\t\t\t"POIID": "INTP9205"\n\t\t},\n\t\t"PaymentResponse": {\n\t\t\t"Response": {\n\t\t\t\t"Result": "Success"\n\t\t\t},\n\t\t\t"SaleData": {\n\t\t\t\t"SaleTransactionID": {\n\t\t\t\t\t"TransactionID": "422543aba9fc4e9a9a6512517961513c",\n\t\t\t\t\t"TimeStamp": "2023-11-28T04:33:56.8703432Z"\n\t\t\t\t}\n\t\t\t},\n\t\t\t"POIData": {\n\t\t\t\t"POITransactionID": {\n\t\t\t\t\t"TransactionID": "65656db57a54cb8f801069ee",\n\t\t\t\t\t"TimeStamp": "2023-11-28T15:34:10.16+11:00"\n\t\t\t\t},\n\t\t\t\t"POIReconciliationID": "64f7f88bd677b0362581bbb5"\n\t\t\t},\n\t\t\t"PaymentResult": {\n\t\t\t\t"PaymentType": "Normal",\n\t\t\t\t"PaymentInstrumentData": {\n\t\t\t\t\t"PaymentInstrumentType": "Card",\n\t\t\t\t\t"CardData": {\n\t\t\t\t\t\t"EntryMode": "MagStripe",\n\t\t\t\t\t\t"PaymentBrand": "Shell Card",\n\t\t\t\t\t\t"Account": "Default",\n\t\t\t\t\t\t"Expiry": "=720",\n\t\t\t\t\t\t"MaskedPAN": "7034305XXXXX2521"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t"AmountsResp": {\n\t\t\t\t\t"Currency": "AUD",\n\t\t\t\t\t"AuthorizedAmount": 117.41,\n\t\t\t\t\t"TotalFeesAmount": 0,\n\t\t\t\t\t"CashBackAmount": 0,\n\t\t\t\t\t"SurchargeAmount": 0,\n\t\t\t\t\t"TipAmount": 0\n\t\t\t\t},\n\t\t\t\t"OnlineFlag": true,\n\t\t\t\t"PaymentAcquirerData": {\n\t\t\t\t\t"AcquirerID": "560251",\n\t\t\t\t\t"MerchantID": "33435368",\n\t\t\t\t\t"AcquirerPOIID": "M3AU41",\n\t\t\t\t\t"AcquirerTransactionID": {\n\t\t\t\t\t\t"TransactionID": "5de73ec1454dde9d70124b5d",\n\t\t\t\t\t\t"TimeStamp": "2023-11-28T04:34:10.320Z"\n\t\t\t\t\t},\n\t\t\t\t\t"ApprovalCode": "554004",\n\t\t\t\t\t"ResponseCode": "00",\n\t\t\t\t\t"HostReconciliationID": "20231129",\n\t\t\t\t\t"RRN": "328132214339126"\n\t\t\t\t}\n\t\t\t},\n\t\t\t"PaymentReceipt": [\n\t\t\t\t{\n\t\t\t\t\t"DocumentQualifier": "SaleReceipt",\n\t\t\t\t\t"IntegratedPrintFlag": true,\n\t\t\t\t\t"RequiredSignatureFlag": false,\n\t\t\t\t\t"OutputContent": {\n\t\t\t\t\t\t"OutputFormat": "XHTML",\n\t\t\t\t\t\t"OutputXHTML": "PHAgaWQ9InJlY2VpcHQtaW5mbyI+MjgvMTEvMjAyMyAxNTozNDoxMDxici8+TWVyY2hhbnQgSUQ6IFBPU01lcmNoYW50PGJyLz5UZXJtaW5hbCBJRDogSU5UUDkyMDU8L3A+PHAgaWQ9InJlY2VpcHQtZGV0YWlscyI+PGI+UHVyY2hhc2UgVHJhbnNhY3Rpb248L2I+PGJyLz5BbW91bnQ6ICQxNS4wODxici8+U2hlbGwgQ2FyZDogNDc2MTczWFhYWFhYMDExOSAoVCk8YnIvPkNyZWRpdCBBY2NvdW50PC9wPjxwIGlkPSJyZWNlaXB0LXJlc3VsdCI+PGI+QXBwcm92ZWQ8L2I+PGJyLz5SZWZlcmVuY2U6IDAwMDAgMDAxMyA0NTk4PGJyLz5BdXRoIENvZGU6IDU1NDAwNDxici8+QUlEOiBBMDAwMDAwMDAzMTAxMDxici8+QVRDOiAwMDAxPGJyLz5UVlI6IDAwMDAwMDAwMDA8YnIvPkFSUUM6IEQ5Mzc2MDIwMDgzOEQwNzM8L3A+"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t"SecurityTrailer": {}\n\t}\n}\n'})})})]}),"\n",(0,r.jsx)(e.h2,{id:"refund",children:"Refund"}),"\n",(0,r.jsx)(e.p,{children:"To perform a fuel refund:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Construct a refund request based on the Sale System integration type:","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Fusion App - ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-app#perform-a-refund-events-mode",children:"perform a purchase"})]}),"\n",(0,r.jsxs)(e.li,{children:["Fusion Cloud - ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#perform-a-refund",children:"perform a purchase"})]}),"\n",(0,r.jsxs)(e.li,{children:["Fusion Satellite - ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-satellite#payment",children:"perform a purchase"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["When possible, populate the ",(0,r.jsx)(e.a,{href:"/docs/getting-started#matched-refund",children:"matched refund"})," fields","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Not all fuel cards support unmatched refunds"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"Populate the SaleItem[] array with fuel product data of the items being refunded"}),"\n",(0,r.jsxs)(e.li,{children:["Fusion Cloud only; handle ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#display",children:"display"}),", ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#input",children:"input"}),", and ",(0,r.jsx)(e.a,{href:"/docs/api-reference/fusion-cloud#print",children:"print"})," requests."]}),"\n",(0,r.jsx)(e.li,{children:"Handle the payment response"}),"\n"]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(e.p,{children:"Fusion Fuel API refund request"})}),(0,r.jsx)("p",{children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n\t"SaleToPOIRequest": {\n\t\t"MessageHeader": {\n\t\t\t"MessageClass": "Service",\n\t\t\t"MessageCategory": "Payment",\n\t\t\t"MessageType": "Request",\n\t\t\t"ServiceID": "ec6b7b5f7330484eb533cd26a1306bb0",\n\t\t\t"SaleID": "INT POS",\n\t\t\t"POIID": "INTP9205"\n\t\t},\n\t\t"PaymentRequest": {\n\t\t\t"SaleData": {\n\t\t\t\t"SaleTransactionID": {\n\t\t\t\t\t"TransactionID": "422543aba9fc4e9a9a6512517961513c",\n\t\t\t\t\t"TimeStamp": "2023-11-28T04:33:56.8703432Z"\n\t\t\t\t}\n\t\t\t},\n\t\t\t"PaymentTransaction": {\n\t\t\t\t"AmountsReq": {\n\t\t\t\t\t"Currency": "AUD",\n\t\t\t\t\t"RequestedAmount": 117.41\n\t\t\t\t},\n\t\t\t\t"OriginalPOITransaction": {\n\t\t\t\t\t"POITransactionID": {\n\t\t\t\t\t\t"TransactionID": "65656db57a54cb8f801069ee",\n\t\t\t\t\t\t"TimeStamp": "2023-11-28T15:34:10.16+11:00"\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t"SaleItem": [\n\t\t\t\t\t{\n\t\t\t\t\t\t"ItemID": 0,\n\t\t\t\t\t\t"ProductCode": "HHETDY12321",\n\t\t\t\t\t\t"UnitOfMeasure": "Litre",\n\t\t\t\t\t\t"Quantity": 57.62,\n\t\t\t\t\t\t"UnitPrice": 1.97,\n\t\t\t\t\t\t"ItemAmount": 113.51,\n\t\t\t\t\t\t"ProductLabel": "BP Unleaded 91",\n\t\t\t\t\t\t"CustomFields": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCode",\n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "21"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCodeShellCard",\n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "35"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"Key": "FuelProductCodeFleetcore",\n\t\t\t\t\t\t\t\t"Type": "String",\n\t\t\t\t\t\t\t\t"Value": "21"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t"ItemID": 1,\n\t\t\t\t\t\t"ProductCode": "5000112576009",\n\t\t\t\t\t\t"EanUpc": "5000112576009",\n\t\t\t\t\t\t"UnitOfMeasure": "Other",\n\t\t\t\t\t\t"Quantity": "2",\n\t\t\t\t\t\t"UnitPrice": "1.95",\n\t\t\t\t\t\t"ItemAmount": "3.90",\n\t\t\t\t\t\t"ProductLabel": "Coca-Cola No Sugar 1.25L",\n\t\t\t\t\t\t"CostBase": "0.75",\n\t\t\t\t\t\t"Categories": [\n\t\t\t\t\t\t\t"Drinks",\n\t\t\t\t\t\t\t"Soft Drink"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t"Brand": "Coca-Cola",\n\t\t\t\t\t\t"QuantityInStock": "42"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t"PaymentData": {\n\t\t\t\t"PaymentType": "Refund"\n\t\t\t}\n\t\t},\n\t\t"SecurityTrailer": {}\n\t}\n}\n'})})})]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(e.p,{children:"Fusion Fuel API refund response"})}),(0,r.jsx)("p",{children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n\t"SaleToPOIResponse": {\n\t\t"MessageHeader": {\n\t\t\t"MessageClass": "Service",\n\t\t\t"MessageCategory": "Payment",\n\t\t\t"MessageType": "Response",\n\t\t\t"ServiceID": "ec6b7b5f7330484eb533cd26a1306bb0",\n\t\t\t"SaleID": "INT POS",\n\t\t\t"POIID": "INTP9205"\n\t\t},\n\t\t"PaymentResponse": {\n\t\t\t"Response": {\n\t\t\t\t"Result": "Success"\n\t\t\t},\n\t\t\t"SaleData": {\n\t\t\t\t"SaleTransactionID": {\n\t\t\t\t\t"TransactionID": "422543aba9fc4e9a9a6512517961513c",\n\t\t\t\t\t"TimeStamp": "2023-11-28T04:33:56.8703432Z"\n\t\t\t\t}\n\t\t\t},\n\t\t\t"POIData": {\n\t\t\t\t"POITransactionID": {\n\t\t\t\t\t"TransactionID": "65656db57a54cb8f801069ee",\n\t\t\t\t\t"TimeStamp": "2023-11-28T15:34:10.16+11:00"\n\t\t\t\t},\n\t\t\t\t"POIReconciliationID": "64f7f88bd677b0362581bbb5"\n\t\t\t},\n\t\t\t"PaymentResult": {\n\t\t\t\t"PaymentType": "Normal",\n\t\t\t\t"PaymentInstrumentData": {\n\t\t\t\t\t"PaymentInstrumentType": "Card",\n\t\t\t\t\t"CardData": {\n\t\t\t\t\t\t"EntryMode": "MagStripe",\n\t\t\t\t\t\t"PaymentBrand": "Shell Card",\n\t\t\t\t\t\t"Account": "Default",\n\t\t\t\t\t\t"Expiry": "=720",\n\t\t\t\t\t\t"MaskedPAN": "7034305XXXXX2521"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t"AmountsResp": {\n\t\t\t\t\t"Currency": "AUD",\n\t\t\t\t\t"AuthorizedAmount": 117.41,\n\t\t\t\t\t"TotalFeesAmount": 0,\n\t\t\t\t\t"CashBackAmount": 0,\n\t\t\t\t\t"SurchargeAmount": 0,\n\t\t\t\t\t"TipAmount": 0\n\t\t\t\t},\n\t\t\t\t"OnlineFlag": true,\n\t\t\t\t"PaymentAcquirerData": {\n\t\t\t\t\t"AcquirerID": "560251",\n\t\t\t\t\t"MerchantID": "33435368",\n\t\t\t\t\t"AcquirerPOIID": "M3AU41",\n\t\t\t\t\t"AcquirerTransactionID": {\n\t\t\t\t\t\t"TransactionID": "5de73ec1454dde9d70124b5d",\n\t\t\t\t\t\t"TimeStamp": "2023-11-28T04:34:10.320Z"\n\t\t\t\t\t},\n\t\t\t\t\t"ApprovalCode": "554004",\n\t\t\t\t\t"ResponseCode": "00",\n\t\t\t\t\t"HostReconciliationID": "20231129",\n\t\t\t\t\t"RRN": "328132214339126"\n\t\t\t\t}\n\t\t\t},\n\t\t\t"PaymentReceipt": [\n\t\t\t\t{\n\t\t\t\t\t"DocumentQualifier": "SaleReceipt",\n\t\t\t\t\t"IntegratedPrintFlag": true,\n\t\t\t\t\t"RequiredSignatureFlag": false,\n\t\t\t\t\t"OutputContent": {\n\t\t\t\t\t\t"OutputFormat": "XHTML",\n\t\t\t\t\t\t"OutputXHTML": "PHAgaWQ9InJlY2VpcHQtaW5mbyI+MjgvMTEvMjAyMyAxNTozNDoxMDxici8+TWVyY2hhbnQgSUQ6IFBPU01lcmNoYW50PGJyLz5UZXJtaW5hbCBJRDogSU5UUDkyMDU8L3A+PHAgaWQ9InJlY2VpcHQtZGV0YWlscyI+PGI+UHVyY2hhc2UgVHJhbnNhY3Rpb248L2I+PGJyLz5BbW91bnQ6ICQxNS4wODxici8+U2hlbGwgQ2FyZDogNDc2MTczWFhYWFhYMDExOSAoVCk8YnIvPkNyZWRpdCBBY2NvdW50PC9wPjxwIGlkPSJyZWNlaXB0LXJlc3VsdCI+PGI+QXBwcm92ZWQ8L2I+PGJyLz5SZWZlcmVuY2U6IDAwMDAgMDAxMyA0NTk4PGJyLz5BdXRoIENvZGU6IDU1NDAwNDxici8+QUlEOiBBMDAwMDAwMDAzMTAxMDxici8+QVRDOiAwMDAxPGJyLz5UVlI6IDAwMDAwMDAwMDA8YnIvPkFSUUM6IEQ5Mzc2MDIwMDgzOEQwNzM8L3A+"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t"SecurityTrailer": {}\n\t}\n}\n'})})})]}),"\n",(0,r.jsx)(e.h2,{id:"accreditation",children:"Accreditation"}),"\n",(0,r.jsxs)(e.p,{children:["There are an expanded set of test cases in the Fusion ",(0,r.jsx)(e.a,{href:"/docs/testing",children:"accreditation"})," to support payments via the Fusion Fuel API."]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:"mailto:integrations@datameshgroup.com",children:"Contact the DataMesh Integrations Team"})," to discuss the accreditation process."]})]})}function h(t={}){const{wrapper:e}={...(0,s.a)(),...t.components};return e?(0,r.jsx)(e,{...t,children:(0,r.jsx)(o,{...t})}):o(t)}},1151:(t,e,n)=>{n.d(e,{Z:()=>a,a:()=>d});var r=n(7294);const s={},i=r.createContext(s);function d(t){const e=r.useContext(i);return r.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function a(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:d(t.components),r.createElement(i.Provider,{value:e},t.children)}}}]);